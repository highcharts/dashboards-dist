/*
 Highcharts Dashboards v0.0.2 (2023-07-03)

 (c) 2009-2023 Highsoft AS

 License: www.highcharts.com/license
*/
'use strict';(function(a){"object"===typeof module&&module.exports?(a["default"]=a,module.exports=a):"function"===typeof define&&define.amd?define("dashboards/datagrid",["dashboards"],function(u){a(u);a.Dashboards=u;return a}):a("undefined"!==typeof Dashboards?Dashboards:void 0)})(function(a){function u(m,a,b,D){m.hasOwnProperty(a)||(m[a]=D.apply(null,b),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("DashboardsModuleLoaded",{detail:{path:a,module:m[a]}})))}a=a?a._modules:{};
u(a,"DataGrid/DataGridUtils.js",[],function(){return{dataTableCellToString(a){return"string"===typeof a||"number"===typeof a||"boolean"===typeof a?""+a:""},emptyHTMLElement(a){for(;a.firstChild;)a.removeChild(a.firstChild)},makeDiv:(a,v)=>{const b=document.createElement("div");b.className=a;v&&(b.id=v);return b}}});u(a,"DataGrid/Globals.js",[],function(){var a,v=a||(a={});v.classNamePrefix="highcharts-datagrid-";v.classNames={gridContainer:v.classNamePrefix+"container",outerContainer:v.classNamePrefix+
"outer-container",scrollContainer:v.classNamePrefix+"scroll-container",innerContainer:v.classNamePrefix+"inner-container",cell:v.classNamePrefix+"cell",cellInput:v.classNamePrefix+"cell-input",row:v.classNamePrefix+"row",columnHeader:v.classNamePrefix+"column-header"};return a});u(a,"Core/Chart/ChartDefaults.js",[],function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{zIndex:6},
position:{align:"right",x:-10,y:10}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}});u(a,"Core/Color/Color.js",[a["Core/Globals.js"],a["Core/Utilities.js"]],function(a,v){const {isNumber:b,merge:m,pInt:z}=v;class w{static parse(a){return a?new w(a):w.None}constructor(g){this.rgba=[NaN,NaN,NaN,NaN];this.input=g;const b=a.Color;if(b&&b!==
w)return new b(g);this.init(g)}init(a){let b;let r;if("object"===typeof a&&"undefined"!==typeof a.stops)this.stops=a.stops.map(a=>new w(a[1]));else if("string"===typeof a){this.input=a=w.names[a.toLowerCase()]||a;if("#"===a.charAt(0)){var d=a.length;var g=parseInt(a.substr(1),16);7===d?b=[(g&16711680)>>16,(g&65280)>>8,g&255,1]:4===d&&(b=[(g&3840)>>4|(g&3840)>>8,(g&240)>>4|g&240,(g&15)<<4|g&15,1])}if(!b)for(g=w.parsers.length;g--&&!b;)r=w.parsers[g],(d=r.regex.exec(a))&&(b=r.parse(d))}b&&(this.rgba=
b)}get(a){const g=this.input,r=this.rgba;if("object"===typeof g&&"undefined"!==typeof this.stops){const b=m(g);b.stops=[].slice.call(b.stops);this.stops.forEach((g,d)=>{b.stops[d]=[b.stops[d][0],g.get(a)]});return b}return r&&b(r[0])?"rgb"===a||!a&&1===r[3]?"rgb("+r[0]+","+r[1]+","+r[2]+")":"a"===a?`${r[3]}`:"rgba("+r.join(",")+")":g}brighten(a){const g=this.rgba;if(this.stops)this.stops.forEach(function(b){b.brighten(a)});else if(b(a)&&0!==a)for(let b=0;3>b;b++)g[b]+=z(255*a),0>g[b]&&(g[b]=0),255<
g[b]&&(g[b]=255);return this}setOpacity(a){this.rgba[3]=a;return this}tweenTo(a,m){const g=this.rgba,d=a.rgba;if(!b(g[0])||!b(d[0]))return a.input||"none";a=1!==d[3]||1!==g[3];return(a?"rgba(":"rgb(")+Math.round(d[0]+(g[0]-d[0])*(1-m))+","+Math.round(d[1]+(g[1]-d[1])*(1-m))+","+Math.round(d[2]+(g[2]-d[2])*(1-m))+(a?","+(d[3]+(g[3]-d[3])*(1-m)):"")+")"}}w.names={white:"#ffffff",black:"#000000"};w.parsers=[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,
parse:function(a){return[z(a[1]),z(a[2]),z(a[3]),parseFloat(a[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(a){return[z(a[1]),z(a[2]),z(a[3]),1]}}];w.None=new w("");"";return w});u(a,"Core/Color/Palettes.js",[],function(){return{colors:"#2caffe #544fc5 #00e272 #fe6a35 #6b8abc #d568fb #2ee0ca #fa4b42 #feb56a #91e8e1".split(" ")}});u(a,"Core/Time.js",[a["Core/Globals.js"],a["Core/Utilities.js"]],function(a,v){const {win:b}=a,{defined:m,error:z,extend:w,
isObject:g,merge:u,objectEach:r,pad:d,pick:x,splat:C,timeUnits:q}=v,B=a.isSafari&&b.Intl&&b.Intl.DateTimeFormat.prototype.formatRange,n=a.isSafari&&b.Intl&&!b.Intl.DateTimeFormat.prototype.formatRange;class k{constructor(a){this.options={};this.variableTimezone=this.useUTC=!1;this.Date=b.Date;this.getTimezoneOffset=this.timezoneOffsetFunction();this.update(a)}get(a,b){if(this.variableTimezone||this.timezoneOffset){const p=b.getTime(),e=p-this.getTimezoneOffset(b);b.setTime(e);a=b["getUTC"+a]();b.setTime(p);
return a}return this.useUTC?b["getUTC"+a]():b["get"+a]()}set(a,b,n){if(this.variableTimezone||this.timezoneOffset){if("Milliseconds"===a||"Seconds"===a||"Minutes"===a&&0===this.getTimezoneOffset(b)%36E5)return b["setUTC"+a](n);var e=this.getTimezoneOffset(b);e=b.getTime()-e;b.setTime(e);b["setUTC"+a](n);a=this.getTimezoneOffset(b);e=b.getTime()+a;return b.setTime(e)}return this.useUTC||B&&"FullYear"===a?b["setUTC"+a](n):b["set"+a](n)}update(a={}){const n=x(a.useUTC,!0);this.options=a=u(!0,this.options,
a);this.Date=a.Date||b.Date||Date;this.timezoneOffset=(this.useUTC=n)&&a.timezoneOffset||void 0;this.getTimezoneOffset=this.timezoneOffsetFunction();this.variableTimezone=n&&!(!a.getTimezoneOffset&&!a.timezone)}makeTime(a,b,k,e,c,t){let f,h,A;this.useUTC?(f=this.Date.UTC.apply(0,arguments),h=this.getTimezoneOffset(f),f+=h,A=this.getTimezoneOffset(f),h!==A?f+=A-h:h-36E5!==this.getTimezoneOffset(f-36E5)||n||(f-=36E5)):f=(new this.Date(a,b,x(k,1),x(e,0),x(c,0),x(t,0))).getTime();return f}timezoneOffsetFunction(){const a=
this,n=this.options,k=n.getTimezoneOffset,e=n.moment||b.moment;if(!this.useUTC)return function(c){return 6E4*(new Date(c.toString())).getTimezoneOffset()};if(n.timezone){if(e)return function(c){return 6E4*-e.tz(c,n.timezone).utcOffset()};z(25)}return this.useUTC&&k?function(c){return 6E4*k(c.valueOf())}:function(){return 6E4*(a.timezoneOffset||0)}}dateFormat(b,n,k){if(!m(n)||isNaN(n))return a.defaultOptions.lang&&a.defaultOptions.lang.invalidDate||"";b=x(b,"%Y-%m-%d %H:%M:%S");const e=this;var c=
new this.Date(n);const t=this.get("Hours",c),f=this.get("Day",c),h=this.get("Date",c),A=this.get("Month",c),g=this.get("FullYear",c),p=a.defaultOptions.lang,l=p&&p.weekdays,q=p&&p.shortWeekdays;c=w({a:q?q[f]:l[f].substr(0,3),A:l[f],d:d(h),e:d(h,2," "),w:f,b:p.shortMonths[A],B:p.months[A],m:d(A+1),o:A+1,y:g.toString().substr(2,2),Y:g,H:d(t),k:t,I:d(t%12||12),l:t%12||12,M:d(this.get("Minutes",c)),p:12>t?"AM":"PM",P:12>t?"am":"pm",S:d(c.getSeconds()),L:d(Math.floor(n%1E3),3)},a.dateFormats);r(c,function(c,
a){for(;-1!==b.indexOf("%"+a);)b=b.replace("%"+a,"function"===typeof c?c.call(e,n):c)});return k?b.substr(0,1).toUpperCase()+b.substr(1):b}resolveDTLFormat(a){return g(a,!0)?a:(a=C(a),{main:a[0],from:a[1],to:a[2]})}getTimeTicks(a,b,n,e){const c=this,t=[],f={};var h=new c.Date(b);const k=a.unitRange,d=a.count||1;let g;e=x(e,1);if(m(b)){c.set("Milliseconds",h,k>=q.second?0:d*Math.floor(c.get("Milliseconds",h)/d));k>=q.second&&c.set("Seconds",h,k>=q.minute?0:d*Math.floor(c.get("Seconds",h)/d));k>=q.minute&&
c.set("Minutes",h,k>=q.hour?0:d*Math.floor(c.get("Minutes",h)/d));k>=q.hour&&c.set("Hours",h,k>=q.day?0:d*Math.floor(c.get("Hours",h)/d));k>=q.day&&c.set("Date",h,k>=q.month?1:Math.max(1,d*Math.floor(c.get("Date",h)/d)));if(k>=q.month){c.set("Month",h,k>=q.year?0:d*Math.floor(c.get("Month",h)/d));var l=c.get("FullYear",h)}k>=q.year&&c.set("FullYear",h,l-l%d);k===q.week&&(l=c.get("Day",h),c.set("Date",h,c.get("Date",h)-l+e+(l<e?-7:0)));l=c.get("FullYear",h);e=c.get("Month",h);const a=c.get("Date",
h),A=c.get("Hours",h);b=h.getTime();!c.variableTimezone&&c.useUTC||!m(n)||(g=n-b>4*q.month||c.getTimezoneOffset(b)!==c.getTimezoneOffset(n));b=h.getTime();for(h=1;b<n;)t.push(b),b=k===q.year?c.makeTime(l+h*d,0):k===q.month?c.makeTime(l,e+h*d):!g||k!==q.day&&k!==q.week?g&&k===q.hour&&1<d?c.makeTime(l,e,a,A+h*d):b+k*d:c.makeTime(l,e,a+h*d*(k===q.day?1:7)),h++;t.push(b);k<=q.hour&&1E4>t.length&&t.forEach(function(e){0===e%18E5&&"000000000"===c.dateFormat("%H%M%S%L",e)&&(f[e]="day")})}t.info=w(a,{higherRanks:f,
totalRange:k*d});return t}getDateFormat(a,b,k,e){const c=this.dateFormat("%m-%d %H:%M:%S.%L",b),t={millisecond:15,second:12,minute:9,hour:6,day:3};let f,h="millisecond";for(f in q){if(a===q.week&&+this.dateFormat("%w",b)===k&&"00:00:00.000"===c.substr(6)){f="week";break}if(q[f]>a){f=h;break}if(t[f]&&c.substr(t[f])!=="01-01 00:00:00.000".substr(t[f]))break;"week"!==f&&(h=f)}return this.resolveDTLFormat(e[f]).main}}"";return k});u(a,"Core/Defaults.js",[a["Core/Chart/ChartDefaults.js"],a["Core/Color/Color.js"],
a["Core/Globals.js"],a["Core/Color/Palettes.js"],a["Core/Time.js"],a["Core/Utilities.js"]],function(a,v,b,u,z,w){const {isTouchDevice:g,svg:m}=b,{merge:r}=w,d={colors:u.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
decimalPoint:".",numericSymbols:"kMGTPE".split(""),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:a,title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:"",align:"center",widthAdjust:-44},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",
align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",
textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:m,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %e %b, %H:%M:%S.%L",second:"%A, %e %b, %H:%M:%S",
minute:"%A, %e %b, %H:%M",hour:"%A, %e %b, %H:%M",day:"%A, %e %b %Y",week:"Week from %A, %e %b %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:g?25:10,headerFormat:'<span style="font-size: 0.8em">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",
fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}};d.chart.styledMode=!1;"";const x=new z(d.time);a={defaultOptions:d,defaultTime:x,getOptions:function(){return d},setOptions:function(a){r(!0,d,a);if(a.time||a.global)b.time?b.time.update(r(d.global,d.time,a.global,a.time)):b.time=x;return d}};"";return a});u(a,"Core/Templating.js",
[a["Core/Defaults.js"],a["Core/Utilities.js"]],function(a,v){function b(a="",k,d){const n=/\{([a-zA-Z0-9:\.,;\-\/<>%_@"'= #\(\)]+)\}/g,g=/\(([a-zA-Z0-9:\.,;\-\/<>%_@"'= ]+)\)/g,e=[],c=/f$/,t=/\.([0-9])/,f=u.lang,h=d&&d.time||w,A=d&&d.numberFormatter||m,q=(a="")=>{let c;return"true"===a?!0:"false"===a?!1:(c=Number(a)).toString()===a?c:F(a,k)};let y,l,r=0,v;for(;null!==(y=n.exec(a));){const c=g.exec(y[1]);c&&(y=c,v=!0);l&&l.isBlock||(l={ctx:k,expression:y[1],find:y[0],isBlock:"#"===y[1].charAt(0),start:y.index,
startInner:y.index+y[0].length,length:y[0].length});var p=y[1].split(" ")[0].replace("#","");B[p]&&(l.isBlock&&p===l.fn&&r++,l.fn||(l.fn=p));p="else"===y[1];if(l.isBlock&&l.fn&&(y[1]===`/${l.fn}`||p))if(r)p||r--;else{var x=l.startInner;x=a.substr(x,y.index-x);void 0===l.body?(l.body=x,l.startInner=y.index+y[0].length):l.elseBody=x;l.find+=x+y[0];p||(e.push(l),l=void 0)}else l.isBlock||e.push(l);if(c&&(null===l||void 0===l||!l.isBlock))break}e.forEach(e=>{const {body:d,elseBody:n,expression:g,fn:l}=
e;var p;if(l){var m=[e],r=g.split(" ");for(p=B[l].length;p--;)m.unshift(q(r[p+1]));p=B[l].apply(k,m);e.isBlock&&"boolean"===typeof p&&(p=b(p?d:n,k))}else m=g.split(":"),p=q(m.shift()||""),m.length&&"number"===typeof p&&(m=m.join(":"),c.test(m)?(r=parseInt((m.match(t)||["","-1"])[1],10),null!==p&&(p=A(p,r,f.decimalPoint,-1<m.indexOf(",")?f.thousandsSep:""))):p=h.dateFormat(m,p));a=a.replace(e.find,C(p,""))});return v?b(a,k,d):a}function m(a,b,g,m){a=+a||0;b=+b;const k=u.lang;var e=(a.toString().split(".")[1]||
"").split("e")[0].length;const c=a.toString().split("e"),t=b;if(-1===b)b=Math.min(e,20);else if(!d(b))b=2;else if(b&&c[1]&&0>c[1]){var f=b+ +c[1];0<=f?(c[0]=(+c[0]).toExponential(f).split("e")[0],b=f):(c[0]=c[0].split(".")[0]||0,a=20>b?(c[0]*Math.pow(10,c[1])).toFixed(b):0,c[1]=0)}f=(Math.abs(c[1]?c[0]:a)+Math.pow(10,-Math.max(b,e)-1)).toFixed(b);e=String(q(f));const h=3<e.length?e.length%3:0;g=C(g,k.decimalPoint);m=C(m,k.thousandsSep);a=(0>a?"-":"")+(h?e.substr(0,h)+m:"");a=0>+c[1]&&!t?"0":a+e.substr(h).replace(/(\d{3})(?=\d)/g,
"$1"+m);b&&(a+=g+f.slice(-b));c[1]&&0!==+a&&(a+="e"+c[1]);return a}const {defaultOptions:u,defaultTime:w}=a,{extend:g,getNestedProperty:F,isArray:r,isNumber:d,isObject:x,pick:C,pInt:q}=v,B={add:(a,b)=>a+b,divide:(a,b)=>0!==b?a/b:"",eq:(a,b)=>a==b,each:function(a){const d=arguments[arguments.length-1];return r(a)?a.map((k,n)=>b(d.body,g(x(k)?k:{"@this":k},{"@index":n,"@first":0===n,"@last":n===a.length-1}))).join(""):!1},ge:(a,b)=>a>=b,gt:(a,b)=>a>b,"if":a=>!!a,le:(a,b)=>a<=b,lt:(a,b)=>a<b,multiply:(a,
b)=>a*b,ne:(a,b)=>a!=b,subtract:(a,b)=>a-b,unless:a=>!a};return{dateFormat:function(a,b,d){return w.dateFormat(a,b,d)},format:b,helpers:B,numberFormat:m}});u(a,"DataGrid/DataGridDefaults.js",[],function(){return{cellHeight:49,columnHeaders:{enabled:!0},columns:{},defaultHeight:400,editable:!0,resizableColumns:!0}});u(a,"DataGrid/DataGrid.js",[a["Data/DataTable.js"],a["DataGrid/DataGridUtils.js"],a["DataGrid/Globals.js"],a["Core/Templating.js"],a["DataGrid/DataGridDefaults.js"],a["Core/Globals.js"],
a["Core/Utilities.js"]],function(a,v,b,u,z,w,g){const {dataTableCellToString:m,emptyHTMLElement:r,makeDiv:d}=v,{doc:x}=w,{addEvent:C,clamp:q,defined:B,fireEvent:n,isNumber:k,merge:p,pick:D}=g;class E{constructor(a,c){this.columnNames=[];this.prevTop=-1;this.scrollEndTop=this.scrollEndRowCount=0;this.bottom=!1;if("string"===typeof a){const c=x.getElementById(a);this.container=c?c:d(b.classNames.gridContainer,a)}else this.container=a;this.gridContainer=d(b.classNames.gridContainer);this.outerContainer=
d(b.classNames.outerContainer);this.scrollContainer=d(b.classNames.scrollContainer);this.innerContainer=d(b.classNames.innerContainer);this.outerContainer.appendChild(this.scrollContainer);this.gridContainer.appendChild(this.outerContainer);this.container.appendChild(this.gridContainer);this.options=p(E.defaultOptions,c);this.gridContainer.style.height=this.getDataGridSize()+"px";this.dataTable=this.initDataTable();this.rowElements=[];this.draggedColumnRightIx=this.draggedResizeHandle=null;this.render()}update(a){this.options=
p(this.options,a);this.options.dataTable!==this.dataTable&&(this.dataTable=this.initDataTable());this.scrollContainer.removeChild(this.innerContainer);this.render()}resizeColumn(a,c){var e=this.columnHeadersContainer;const b="string"===typeof c?this.columnNames.indexOf(c):c,d=`${a}`;if(k(b))-1!==b&&(e&&(e=e.children[b])&&(e.style.flex=d),this.rowElements.forEach(a=>{if(a=a.children[b])a.style.flex=d}));else{if(e)for(c=0;c<e.children.length;c++)e.children[c].style.flex=d;this.rowElements.forEach(a=>
{for(let c=0;c<a.children.length;c++)a.children[c].style.flex=d})}this.renderColumnDragHandles();this.emit({type:"afterResizeColumn",width:a,index:b,name:k(b)?this.columnNames[b]:void 0})}emit(a){n(this,a.type,a)}toggleRowHighlight(a){this.hoveredRow&&this.hoveredRow.classList.contains("hovered")&&this.hoveredRow.classList.remove("hovered");a&&(a.classList.contains("hovered")?a.classList.remove("hovered"):a.classList.add("hovered"))}on(a,c){return C(this,a,c)}scrollToRow(a){this.outerContainer.scrollTop=
a*this.options.cellHeight}getColumnsToDisplay(){const a=this.options.columns,c=this.dataTable.getColumnNames(),b=[];for(let e=0;e<c.length;e++){const d=c[e],f=a[d];f&&B(f.show)?a[d].show&&b.push(d):b.push(d)}return b}isColumnEditable(a){return D((this.options.columns[a]||{}).editable,this.options.editable)}initDataTable(){return this.options.dataTable?this.options.dataTable:new a}render(){const {options:a}=this;this.prevTop=-1;this.bottom=!1;r(this.innerContainer);a.columnHeaders.enabled?(this.columnNames=
this.getColumnsToDisplay(),this.outerContainer.style.top=this.options.cellHeight+"px",this.renderColumnHeaders()):this.outerContainer.style.top="0";this.updateInnerContainerWidth();this.renderInitialRows();this.addEvents();this.updateScrollingLength();this.updateVisibleCells();a.columnHeaders.enabled&&a.resizableColumns&&this.renderColumnDragHandles()}addEvents(){this.outerContainer.addEventListener("scroll",a=>{this.onScroll(a)});document.addEventListener("click",a=>{this.onDocumentClick(a)});this.container.addEventListener("mouseover",
a=>{this.handleMouseOver(a)})}updateVisibleCells(){var a=this.outerContainer.scrollTop;w.isSafari&&(a=q(a,0,this.outerContainer.scrollHeight-this.outerContainer.clientHeight));a=Math.floor(a/this.options.cellHeight);if(a!==this.prevTop){this.prevTop=a;var c=this.columnNames,b=this.dataTable.getRowCount();for(let e=0;e<this.rowElements.length&&a<b;e++,a++){const b=this.rowElements[e];b.dataset.rowIndex=String(a);const d=b.childNodes;for(let e=0,f=c.length;e<f;e++){const f=d[e],h=c[e],t=this.dataTable.getCell(c[e],
a);f.textContent=this.formatCell(t,h);f.dataset.originalData=""+t;f.dataset.columnName=c[e];f.dataset.dataType=typeof t;0===e&&(b.dataset.rowXIndex=String(k(t)?t:a))}}this.prevTop+this.scrollEndRowCount===b?!this.bottom&&this.scrollEndTop&&(this.bottom=!0,this.innerContainer.scrollTop=this.scrollEndTop):this.bottom&&(this.bottom=!1,this.innerContainer.scrollTop=0)}}onScroll(a){a.preventDefault();window.requestAnimationFrame(this.updateVisibleCells.bind(this))}onCellClick(a,c){if(this.isColumnEditable(c)){c=
a.querySelector("input");const e=a.getAttribute("data-original-data");if(!c){this.removeCellInputElement();const d=a.clientHeight;a.textContent="";c=this.cellInputEl=document.createElement("input");c.style.height=d+"px";c.className=b.classNames.cellInput;a.appendChild(c);c.focus();c.value=e||""}this.emit({type:"cellClick",input:c})}}onDocumentClick(a){if(this.cellInputEl&&a.target){const c=this.cellInputEl.parentNode;c&&c.contains(a.target)||this.removeCellInputElement()}}handleMouseOver(a){(a=a.target)&&
a.classList.contains(b.classNames.cell)?(a=a.parentElement,this.toggleRowHighlight(a),this.hoveredRow=a,n(this.container,"dataGridHover",{row:a})):this.hoveredRow&&(this.toggleRowHighlight(),this.hoveredRow=void 0)}removeCellInputElement(){const a=this.cellInputEl;if(a){const c=a.parentNode;if(c){const b=c.getAttribute("data-data-type"),e=c.getAttribute("data-column-name");let d=a.value;"number"===b&&(d=parseFloat(d));c.textContent=this.formatCell(d,e||"")}a.remove();delete this.cellInputEl}}updateInnerContainerWidth(){this.innerContainer.style.width=
this.scrollContainer.offsetWidth+"px"}updateScrollingLength(){var a=this.columnNames,c=this.dataTable.getRowCount()-1,b=0;const d=c-this.getNumRowsToDraw(),h=this.outerContainer.clientHeight;this.innerContainer.style.height=h+"px";for(let b=0;b<this.rowElements.length;b++){const e=this.rowElements[b].childNodes;for(let d=0;d<a.length;d++)e[d].textContent=m(this.dataTable.getCell(a[d],c-b))}this.scrollContainer.appendChild(this.innerContainer);for(a=0;c>d;c--,a++)if(b+=this.rowElements[a].offsetHeight,
b>h){c--;break}c-=d;this.scrollEndRowCount=this.rowElements.length-c;this.scrollEndTop=b-h;b=(this.dataTable.getRowCount()+c)*this.options.cellHeight;this.scrollContainer.style.height=b+"px"}getNumRowsToDraw(){return Math.min(this.dataTable.getRowCount(),Math.ceil(this.outerContainer.offsetHeight/this.options.cellHeight))}getDataGridSize(){const a=this.options,{height:c}=this.container.getBoundingClientRect();return 2<c?c:a.defaultHeight}renderCell(a,c){let e=b.classNames.cell;this.isColumnEditable(c)||
(e+=` ${e}-readonly`);const f=d(e);f.style.minHeight=this.options.cellHeight+"px";f.addEventListener("click",()=>this.onCellClick(f,c));a.appendChild(f)}renderRow(){const a=d(b.classNames.row);for(let c=0;c<this.columnNames.length;c++)this.renderCell(a,this.columnNames[c]);this.innerContainer.appendChild(a);this.rowElements.push(a)}formatHeaderCell(a){var c=this.options.columns[a];return(c=c&&c.headerFormat)?u.format(c,{text:a}):a}formatCell(a,c){c=(c=this.options.columns[c])&&c.cellFormat;let b=
a||"";c&&("number"===typeof a&&-1<c.indexOf("value")?b=u.format(c,{value:a}):"string"===typeof a&&-1<c.indexOf("text")&&(b=u.format(c,{text:a})));return b.toString()}renderColumnHeader(a,c){var e=b.classNames.columnHeader;this.isColumnEditable(c)||(e+=` ${e}-readonly`);e=d(e);e.style.height=this.options.cellHeight+"px";e.textContent=this.formatHeaderCell(c);a.appendChild(e)}renderColumnHeaders(){const a=this.columnNames,c=this.columnHeadersContainer=this.columnHeadersContainer||d(`${b.classNamePrefix}column-headers`);
r(c);a.forEach(this.renderColumnHeader.bind(this,c));this.headerContainer||(this.headerContainer=d(`${b.classNamePrefix}header-container`),this.headerContainer.appendChild(c));this.gridContainer.insertBefore(this.headerContainer,this.outerContainer)}renderInitialRows(){this.rowElements=[];const a=this.getNumRowsToDraw();for(let c=0;c<a;c++)this.renderRow()}renderColumnDragHandles(){if(this.columnHeadersContainer){var a=this.columnDragHandlesContainer=this.columnDragHandlesContainer||d(`${b.classNamePrefix}col-resize-container`),
c=this.columnHeadersContainer.children,g=this.options.cellHeight;r(a);for(let e=1;e<c.length;++e){const h=c[e],f=d(`${b.classNamePrefix}col-resize-handle`);f.style.height=g+"px";f.style.left=h.offsetLeft-2+"px";f.addEventListener("mouseover",()=>{this.draggedResizeHandle||(f.style.opacity="1")});f.addEventListener("mouseleave",()=>{this.draggedResizeHandle||(f.style.opacity="0")});f.addEventListener("mousedown",this.onHandleMouseDown.bind(this,f,e));a.appendChild(f)}this.renderColumnResizeCrosshair(a);
document.addEventListener("mouseup",a=>{this.draggedResizeHandle&&this.stopColumnResize(this.draggedResizeHandle,a)});document.addEventListener("mousemove",a=>{this.draggedResizeHandle&&this.updateColumnResizeDrag(a)});this.headerContainer&&this.headerContainer.appendChild(a)}}renderColumnResizeCrosshair(a){const c=this.columnResizeCrosshair=this.columnResizeCrosshair||d(`${b.classNamePrefix}col-resize-crosshair`);c.style.top=this.options.cellHeight+"px";c.style.height=this.innerContainer.offsetHeight+
"px";a.appendChild(c)}onHandleMouseDown(a,c,b){!this.draggedResizeHandle&&(b.preventDefault(),this.draggedResizeHandle=a,this.draggedColumnRightIx=c,this.dragResizeStart=b.pageX,c=this.columnResizeCrosshair)&&(c.style.left=a.offsetLeft+a.offsetWidth/2-c.offsetWidth/2+"px",c.style.opacity="1")}updateColumnResizeDrag(a){const b=this.draggedResizeHandle,d=this.columnResizeCrosshair,e=this.draggedColumnRightIx,h=this.columnHeadersContainer;b&&d&&null!==e&&h&&this.dragResizeStart&&(a=h.children[e].offsetLeft+
(a.pageX-this.dragResizeStart),b.style.left=a-b.offsetWidth/2+"px",d.style.left=a-d.offsetWidth/2+"px")}stopColumnResize(a,b){var c=this.columnResizeCrosshair;const d=this.draggedColumnRightIx;var e=this.columnHeadersContainer;c&&e&&this.dragResizeStart&&null!==d&&(a.style.opacity="0",c.style.opacity="0",a=e.children[d-1],e=e.children[d],c=b.pageX-this.dragResizeStart,b=(a.offsetWidth+c)/a.offsetWidth,c=(e.offsetWidth-c)/e.offsetWidth,a=(a.style.flex?parseFloat(a.style.flex):1)*b,e=(e.style.flex?
parseFloat(e.style.flex):1)*c,this.resizeColumn(a,d-1),this.resizeColumn(e,d),this.draggedColumnRightIx=this.draggedResizeHandle=null)}setSize(a,b){a&&(this.innerContainer.style.width=a+"px");b&&(this.gridContainer.style.height=this.getDataGridSize()+"px",this.outerContainer.style.height=b-(this.options.cellHeight+this.getMarginHeight(b))+"px");this.render()}getMarginHeight(a){return a-this.gridContainer.getBoundingClientRect().height}}E.defaultOptions=z;return E});u(a,"masters/datagrid.src.js",[a["DataGrid/DataGrid.js"]],
function(a){a={win:window,DataGrid:a};a.win.DataGrid||(a.win.DataGrid=a);return a})});//# sourceMappingURL=datagrid.js.map