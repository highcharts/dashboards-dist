/*
 Highcharts Dashboards v1.1.0 (2023-09-19)

 (c) 2009-2023 Highsoft AS

 License: www.highcharts.com/license
*/
'use strict';(function(a){"object"===typeof module&&module.exports?(a["default"]=a,module.exports=a):"function"===typeof define&&define.amd?define("dashboards/datagrid",["dashboards"],function(r){a(r);a.Dashboards=r;return a}):a("undefined"!==typeof Dashboards?Dashboards:void 0)})(function(a){function r(a,m,c,E){a.hasOwnProperty(m)||(a[m]=E.apply(null,c),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("DashboardsModuleLoaded",{detail:{path:m,module:a[m]}})))}a=a?a._modules:{};
r(a,"DataGrid/Globals.js",[],function(){var a,m=a||(a={});m.classNamePrefix="highcharts-datagrid-";m.classNames={gridContainer:m.classNamePrefix+"container",outerContainer:m.classNamePrefix+"outer-container",scrollContainer:m.classNamePrefix+"scroll-container",innerContainer:m.classNamePrefix+"inner-container",cell:m.classNamePrefix+"cell",cellInput:m.classNamePrefix+"cell-input",row:m.classNamePrefix+"row",columnHeader:m.classNamePrefix+"column-header"};m.win=window;return a});r(a,"DataGrid/DataGridUtils.js",
[],function(){return{dataTableCellToString(a){return"string"===typeof a||"number"===typeof a||"boolean"===typeof a?""+a:""},emptyHTMLElement(a){for(;a.firstChild;)a.removeChild(a.firstChild)},makeDiv:(a,m)=>{const c=document.createElement("div");c.className=a;m&&(c.id=m);return c}}});r(a,"Core/Chart/ChartDefaults.js",[],function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},
position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}});r(a,"Core/Color/Color.js",[a["Core/Globals.js"],a["Core/Utilities.js"]],function(a,m){const {isNumber:c,merge:z,pInt:y}=m;class u{static parse(a){return a?new u(a):u.None}constructor(h){this.rgba=[NaN,NaN,NaN,NaN];this.input=h;const c=a.Color;if(c&&c!==u)return new c(h);this.init(h)}init(a){let c;
let g;if("object"===typeof a&&"undefined"!==typeof a.stops)this.stops=a.stops.map(a=>new u(a[1]));else if("string"===typeof a){this.input=a=u.names[a.toLowerCase()]||a;if("#"===a.charAt(0)){var f=a.length;var h=parseInt(a.substr(1),16);7===f?c=[(h&16711680)>>16,(h&65280)>>8,h&255,1]:4===f&&(c=[(h&3840)>>4|(h&3840)>>8,(h&240)>>4|h&240,(h&15)<<4|h&15,1])}if(!c)for(h=u.parsers.length;h--&&!c;)g=u.parsers[h],(f=g.regex.exec(a))&&(c=g.parse(f))}c&&(this.rgba=c)}get(a){const h=this.input,g=this.rgba;if("object"===
typeof h&&"undefined"!==typeof this.stops){const c=z(h);c.stops=[].slice.call(c.stops);this.stops.forEach((h,f)=>{c.stops[f]=[c.stops[f][0],h.get(a)]});return c}return g&&c(g[0])?"rgb"===a||!a&&1===g[3]?"rgb("+g[0]+","+g[1]+","+g[2]+")":"a"===a?`${g[3]}`:"rgba("+g.join(",")+")":h}brighten(a){const h=this.rgba;if(this.stops)this.stops.forEach(function(c){c.brighten(a)});else if(c(a)&&0!==a)for(let c=0;3>c;c++)h[c]+=y(255*a),0>h[c]&&(h[c]=0),255<h[c]&&(h[c]=255);return this}setOpacity(a){this.rgba[3]=
a;return this}tweenTo(a,m){const h=this.rgba,f=a.rgba;if(!c(h[0])||!c(f[0]))return a.input||"none";a=1!==f[3]||1!==h[3];return(a?"rgba(":"rgb(")+Math.round(f[0]+(h[0]-f[0])*(1-m))+","+Math.round(f[1]+(h[1]-f[1])*(1-m))+","+Math.round(f[2]+(h[2]-f[2])*(1-m))+(a?","+(f[3]+(h[3]-f[3])*(1-m)):"")+")"}}u.names={white:"#ffffff",black:"#000000"};u.parsers=[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(a){return[y(a[1]),y(a[2]),y(a[3]),
parseFloat(a[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(a){return[y(a[1]),y(a[2]),y(a[3]),1]}}];u.None=new u("");"";return u});r(a,"Core/Color/Palettes.js",[],function(){return{colors:"#2caffe #544fc5 #00e272 #fe6a35 #6b8abc #d568fb #2ee0ca #fa4b42 #feb56a #91e8e1".split(" ")}});r(a,"Core/Time.js",[a["Core/Globals.js"],a["Core/Utilities.js"]],function(a,m){const {win:c}=a,{defined:z,error:y,extend:u,isObject:h,merge:r,objectEach:g,pad:f,pick:x,
splat:B,timeUnits:q}=m,A=a.isSafari&&c.Intl&&c.Intl.DateTimeFormat.prototype.formatRange,p=a.isSafari&&c.Intl&&!c.Intl.DateTimeFormat.prototype.formatRange;class k{constructor(a){this.options={};this.variableTimezone=this.useUTC=!1;this.Date=c.Date;this.getTimezoneOffset=this.timezoneOffsetFunction();this.update(a)}get(a,c){if(this.variableTimezone||this.timezoneOffset){const v=c.getTime(),d=v-this.getTimezoneOffset(c);c.setTime(d);a=c["getUTC"+a]();c.setTime(v);return a}return this.useUTC?c["getUTC"+
a]():c["get"+a]()}set(a,c,p){if(this.variableTimezone||this.timezoneOffset){if("Milliseconds"===a||"Seconds"===a||"Minutes"===a&&0===this.getTimezoneOffset(c)%36E5)return c["setUTC"+a](p);var d=this.getTimezoneOffset(c);d=c.getTime()-d;c.setTime(d);c["setUTC"+a](p);a=this.getTimezoneOffset(c);d=c.getTime()+a;return c.setTime(d)}return this.useUTC||A&&"FullYear"===a?c["setUTC"+a](p):c["set"+a](p)}update(a={}){const p=x(a.useUTC,!0);this.options=a=r(!0,this.options,a);this.Date=a.Date||c.Date||Date;
this.timezoneOffset=(this.useUTC=p)&&a.timezoneOffset||void 0;this.getTimezoneOffset=this.timezoneOffsetFunction();this.variableTimezone=p&&!(!a.getTimezoneOffset&&!a.timezone)}makeTime(a,c,k,d,b,t){let l,e,w;this.useUTC?(l=this.Date.UTC.apply(0,arguments),e=this.getTimezoneOffset(l),l+=e,w=this.getTimezoneOffset(l),e!==w?l+=w-e:e-36E5!==this.getTimezoneOffset(l-36E5)||p||(l-=36E5)):l=(new this.Date(a,c,x(k,1),x(d,0),x(b,0),x(t,0))).getTime();return l}timezoneOffsetFunction(){const a=this,p=this.options,
k=p.getTimezoneOffset,d=p.moment||c.moment;if(!this.useUTC)return function(b){return 6E4*(new Date(b.toString())).getTimezoneOffset()};if(p.timezone){if(d)return function(b){return 6E4*-d.tz(b,p.timezone).utcOffset()};y(25)}return this.useUTC&&k?function(b){return 6E4*k(b.valueOf())}:function(){return 6E4*(a.timezoneOffset||0)}}dateFormat(c,p,k){if(!z(p)||isNaN(p))return a.defaultOptions.lang&&a.defaultOptions.lang.invalidDate||"";c=x(c,"%Y-%m-%d %H:%M:%S");const d=this;var b=new this.Date(p);const t=
this.get("Hours",b),l=this.get("Day",b),e=this.get("Date",b),w=this.get("Month",b),h=this.get("FullYear",b),v=a.defaultOptions.lang,n=v&&v.weekdays,m=v&&v.shortWeekdays;b=u({a:m?m[l]:n[l].substr(0,3),A:n[l],d:f(e),e:f(e,2," "),w:l,b:v.shortMonths[w],B:v.months[w],m:f(w+1),o:w+1,y:h.toString().substr(2,2),Y:h,H:f(t),k:t,I:f(t%12||12),l:t%12||12,M:f(this.get("Minutes",b)),p:12>t?"AM":"PM",P:12>t?"am":"pm",S:f(b.getSeconds()),L:f(Math.floor(p%1E3),3)},a.dateFormats);g(b,function(b,a){for(;-1!==c.indexOf("%"+
a);)c=c.replace("%"+a,"function"===typeof b?b.call(d,p):b)});return k?c.substr(0,1).toUpperCase()+c.substr(1):c}resolveDTLFormat(a){return h(a,!0)?a:(a=B(a),{main:a[0],from:a[1],to:a[2]})}getTimeTicks(a,c,p,d){const b=this,t=[],l={};var e=new b.Date(c);const k=a.unitRange,f=a.count||1;let h;d=x(d,1);if(z(c)){b.set("Milliseconds",e,k>=q.second?0:f*Math.floor(b.get("Milliseconds",e)/f));k>=q.second&&b.set("Seconds",e,k>=q.minute?0:f*Math.floor(b.get("Seconds",e)/f));k>=q.minute&&b.set("Minutes",e,k>=
q.hour?0:f*Math.floor(b.get("Minutes",e)/f));k>=q.hour&&b.set("Hours",e,k>=q.day?0:f*Math.floor(b.get("Hours",e)/f));k>=q.day&&b.set("Date",e,k>=q.month?1:Math.max(1,f*Math.floor(b.get("Date",e)/f)));if(k>=q.month){b.set("Month",e,k>=q.year?0:f*Math.floor(b.get("Month",e)/f));var n=b.get("FullYear",e)}k>=q.year&&b.set("FullYear",e,n-n%f);k===q.week&&(n=b.get("Day",e),b.set("Date",e,b.get("Date",e)-n+d+(n<d?-7:0)));n=b.get("FullYear",e);d=b.get("Month",e);const a=b.get("Date",e),m=b.get("Hours",e);
c=e.getTime();!b.variableTimezone&&b.useUTC||!z(p)||(h=p-c>4*q.month||b.getTimezoneOffset(c)!==b.getTimezoneOffset(p));c=e.getTime();for(e=1;c<p;)t.push(c),c=k===q.year?b.makeTime(n+e*f,0):k===q.month?b.makeTime(n,d+e*f):!h||k!==q.day&&k!==q.week?h&&k===q.hour&&1<f?b.makeTime(n,d,a,m+e*f):c+k*f:b.makeTime(n,d,a+e*f*(k===q.day?1:7)),e++;t.push(c);k<=q.hour&&1E4>t.length&&t.forEach(function(d){0===d%18E5&&"000000000"===b.dateFormat("%H%M%S%L",d)&&(l[d]="day")})}t.info=u(a,{higherRanks:l,totalRange:k*
f});return t}getDateFormat(a,c,k,d){const b=this.dateFormat("%m-%d %H:%M:%S.%L",c),t={millisecond:15,second:12,minute:9,hour:6,day:3};let l,e="millisecond";for(l in q){if(a===q.week&&+this.dateFormat("%w",c)===k&&"00:00:00.000"===b.substr(6)){l="week";break}if(q[l]>a){l=e;break}if(t[l]&&b.substr(t[l])!=="01-01 00:00:00.000".substr(t[l]))break;"week"!==l&&(e=l)}return this.resolveDTLFormat(d[l]).main}}"";return k});r(a,"Core/Defaults.js",[a["Core/Chart/ChartDefaults.js"],a["Core/Color/Color.js"],a["Core/Globals.js"],
a["Core/Color/Palettes.js"],a["Core/Time.js"],a["Core/Utilities.js"]],function(a,m,c,r,y,u){const {isTouchDevice:h,svg:z}=c,{merge:g}=u,f={colors:r.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
decimalPoint:".",numericSymbols:"kMGTPE".split(""),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:a,title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:"",align:"center",widthAdjust:-44},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",
align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",
textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:z,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %e %b, %H:%M:%S.%L",second:"%A, %e %b, %H:%M:%S",
minute:"%A, %e %b, %H:%M",hour:"%A, %e %b, %H:%M",day:"%A, %e %b %Y",week:"Week from %A, %e %b %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:h?25:10,headerFormat:'<span style="font-size: 0.8em">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",
fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}};f.chart.styledMode=!1;"";const x=new y(f.time);a={defaultOptions:f,defaultTime:x,getOptions:function(){return f},setOptions:function(a){g(!0,f,a);if(a.time||a.global)c.time?c.time.update(g(f.global,f.time,a.global,a.time)):c.time=x;return f}};"";return a});r(a,"Core/Templating.js",
[a["Core/Defaults.js"],a["Core/Utilities.js"]],function(a,m){function c(a="",k,f){const p=/\{([a-zA-Z0-9:\.,;\-\/<>%_@"'= #\(\)]+)\}/g,h=/\(([a-zA-Z0-9:\.,;\-\/<>%_@"'= ]+)\)/g,d=[],b=/f$/,t=/\.([0-9])/,l=y.lang,e=f&&f.time||u,m=f&&f.numberFormatter||r,q=(b="")=>{let a;return"true"===b?!0:"false"===b?!1:(a=Number(b)).toString()===b?a:z(b,k)};let g,n,v=0,x;for(;null!==(g=p.exec(a));){const b=h.exec(g[1]);b&&(g=b,x=!0);n&&n.isBlock||(n={ctx:k,expression:g[1],find:g[0],isBlock:"#"===g[1].charAt(0),start:g.index,
startInner:g.index+g[0].length,length:g[0].length});var C=g[1].split(" ")[0].replace("#","");A[C]&&(n.isBlock&&C===n.fn&&v++,n.fn||(n.fn=C));C="else"===g[1];if(n.isBlock&&n.fn&&(g[1]===`/${n.fn}`||C))if(v)C||v--;else{var D=n.startInner;D=a.substr(D,g.index-D);void 0===n.body?(n.body=D,n.startInner=g.index+g[0].length):n.elseBody=D;n.find+=D+g[0];C||(d.push(n),n=void 0)}else n.isBlock||d.push(n);if(b&&(null===n||void 0===n||!n.isBlock))break}d.forEach(d=>{const {body:f,elseBody:p,expression:h,fn:n}=
d;var g;if(n){var w=[d],v=h.split(" ");for(g=A[n].length;g--;)w.unshift(q(v[g+1]));g=A[n].apply(k,w);d.isBlock&&"boolean"===typeof g&&(g=c(g?f:p,k))}else w=h.split(":"),g=q(w.shift()||""),w.length&&"number"===typeof g&&(w=w.join(":"),b.test(w)?(v=parseInt((w.match(t)||["","-1"])[1],10),null!==g&&(g=m(g,v,l.decimalPoint,-1<w.indexOf(",")?l.thousandsSep:""))):g=e.dateFormat(w,g));a=a.replace(d.find,B(g,""))});return x?c(a,k,f):a}function r(a,c,g,h){a=+a||0;c=+c;const k=y.lang;var d=(a.toString().split(".")[1]||
"").split("e")[0].length;const b=a.toString().split("e"),t=c;if(-1===c)c=Math.min(d,20);else if(!f(c))c=2;else if(c&&b[1]&&0>b[1]){var l=c+ +b[1];0<=l?(b[0]=(+b[0]).toExponential(l).split("e")[0],c=l):(b[0]=b[0].split(".")[0]||0,a=20>c?(b[0]*Math.pow(10,b[1])).toFixed(c):0,b[1]=0)}l=(Math.abs(b[1]?b[0]:a)+Math.pow(10,-Math.max(c,d)-1)).toFixed(c);d=String(q(l));const e=3<d.length?d.length%3:0;g=B(g,k.decimalPoint);h=B(h,k.thousandsSep);a=(0>a?"-":"")+(e?d.substr(0,e)+h:"");a=0>+b[1]&&!t?"0":a+d.substr(e).replace(/(\d{3})(?=\d)/g,
"$1"+h);c&&(a+=g+l.slice(-c));b[1]&&0!==+a&&(a+="e"+b[1]);return a}const {defaultOptions:y,defaultTime:u}=a,{extend:h,getNestedProperty:z,isArray:g,isNumber:f,isObject:x,pick:B,pInt:q}=m,A={add:(a,c)=>a+c,divide:(a,c)=>0!==c?a/c:"",eq:(a,c)=>a==c,each:function(a){const f=arguments[arguments.length-1];return g(a)?a.map((k,g)=>c(f.body,h(x(k)?k:{"@this":k},{"@index":g,"@first":0===g,"@last":g===a.length-1}))).join(""):!1},ge:(a,c)=>a>=c,gt:(a,c)=>a>c,"if":a=>!!a,le:(a,c)=>a<=c,lt:(a,c)=>a<c,multiply:(a,
c)=>a*c,ne:(a,c)=>a!=c,subtract:(a,c)=>a-c,unless:a=>!a};return{dateFormat:function(a,c,f){return u.dateFormat(a,c,f)},format:c,helpers:A,numberFormat:r}});r(a,"DataGrid/DataGridDefaults.js",[],function(){return{cellHeight:49,columnHeaders:{enabled:!0},columns:{},defaultHeight:400,editable:!0,resizableColumns:!0}});r(a,"DataGrid/DataGrid.js",[a["Data/DataTable.js"],a["DataGrid/DataGridUtils.js"],a["DataGrid/Globals.js"],a["Core/Templating.js"],a["DataGrid/DataGridDefaults.js"],a["Core/Globals.js"],
a["Core/Utilities.js"]],function(a,m,c,r,y,u,h){const {dataTableCellToString:z,emptyHTMLElement:g,makeDiv:f}=m,{doc:x}=u,{addEvent:B,clamp:q,defined:A,fireEvent:p,isNumber:k,merge:v,pick:E}=h;class F{constructor(a,b){this.columnNames=[];this.prevTop=-1;this.scrollEndTop=this.scrollEndRowCount=0;this.bottom=!1;this.overflowHeaderWidths=[];if("string"===typeof a){const b=x.getElementById(a);this.container=b?b:f(c.classNames.gridContainer,a)}else this.container=a;this.gridContainer=f(c.classNames.gridContainer);
this.outerContainer=f(c.classNames.outerContainer);this.scrollContainer=f(c.classNames.scrollContainer);this.innerContainer=f(c.classNames.innerContainer);this.outerContainer.appendChild(this.scrollContainer);this.gridContainer.appendChild(this.outerContainer);this.container.appendChild(this.gridContainer);this.options=v(F.defaultOptions,b);this.gridContainer.style.height=this.getDataGridSize()+"px";this.dataTable=this.initDataTable();this.rowElements=[];this.draggedColumnRightIx=this.draggedResizeHandle=
null;this.render();(this.containerResizeObserver=new ResizeObserver(()=>{this.updateGridElements()})).observe(this.container)}update(a){this.options=v(this.options,a);this.options.dataTable!==this.dataTable&&(this.dataTable=this.initDataTable());this.scrollContainer.removeChild(this.innerContainer);this.render()}resizeColumn(a,b){var d=this.columnHeadersContainer;b="string"===typeof b?this.columnNames.indexOf(b):b;const c=`${a}`;if(k(b)){if(-1!==b)for(d&&(d=d.children[b])&&(d.style.flex=c),d=0;d<
this.rowElements.length;d++){var e=this.rowElements[d].children[b];e&&(e.style.flex=c)}}else{if(d)for(e=0;e<d.children.length;e++)d.children[e].style.flex=c;for(d=0;d<this.rowElements.length;d++){e=this.rowElements[d];for(let a=0;a<e.children.length;a++)e.children[a].style.flex=c}}this.renderColumnDragHandles();this.emit({type:"afterResizeColumn",width:a,index:b,name:k(b)?this.columnNames[b]:void 0})}emit(a){p(this,a.type,a)}toggleRowHighlight(a){this.hoveredRow&&this.hoveredRow.classList.contains("hovered")&&
this.hoveredRow.classList.remove("hovered");a&&(a.classList.contains("hovered")?a.classList.remove("hovered"):a.classList.add("hovered"))}on(a,b){return B(this,a,b)}scrollToRow(a){this.outerContainer.scrollTop=a*this.options.cellHeight}getColumnsToDisplay(){const a=this.options.columns,b=this.dataTable.modified.getColumnNames(),c=[];for(let d=0;d<b.length;d++){const e=b[d],l=a[e];l&&A(l.show)?a[e].show&&c.push(e):c.push(e)}return c}isColumnEditable(a){return E((this.options.columns[a]||{}).editable,
this.options.editable)}initDataTable(){return this.options.dataTable?this.options.dataTable:new a}render(){const {options:a}=this;this.prevTop=-1;this.bottom=!1;g(this.innerContainer);a.columnHeaders.enabled?(this.columnNames=this.getColumnsToDisplay(),this.renderColumnHeaders()):this.outerContainer.style.top="0";this.renderInitialRows();this.addEvents();this.updateScrollingLength();this.updateVisibleCells();a.columnHeaders.enabled&&a.resizableColumns&&this.renderColumnDragHandles();this.updateGridElements()}addEvents(){this.outerContainer.addEventListener("scroll",
a=>{this.onScroll(a)});document.addEventListener("click",a=>{this.onDocumentClick(a)});this.container.addEventListener("mouseover",a=>{this.handleMouseOver(a)})}updateVisibleCells(a=!1){var b=this.outerContainer.scrollTop;u.isSafari&&(b=q(b,0,this.outerContainer.scrollHeight-this.outerContainer.clientHeight));b=Math.floor(b/this.options.cellHeight);if(b!==this.prevTop||a){this.prevTop=b;a=this.columnNames;var c=this.dataTable.modified.getRowCount();for(let d=0;d<this.rowElements.length&&b<c;d++,b++){const c=
this.rowElements[d];c.dataset.rowIndex=String(b);const l=c.childNodes;for(let d=0,e=a.length;d<e;d++){const e=l[d],t=a[d],f=this.dataTable.modified.getCell(a[d],b);e.textContent=this.formatCell(f,t);e.dataset.originalData=""+f;e.dataset.columnName=a[d];e.dataset.dataType=typeof f;0===d&&(c.dataset.rowXIndex=String(k(f)?f:b))}}this.prevTop+this.scrollEndRowCount===c?!this.bottom&&this.scrollEndTop&&(this.bottom=!0,this.innerContainer.scrollTop=this.scrollEndTop):this.bottom&&(this.bottom=!1,this.innerContainer.scrollTop=
0)}}onScroll(a){a.preventDefault();window.requestAnimationFrame(this.updateVisibleCells.bind(this,!1))}onCellClick(a,b){if(this.isColumnEditable(b)){b=a.querySelector("input");const d=a.getAttribute("data-original-data");if(!b){this.removeCellInputElement();const l=a.clientHeight;a.textContent="";b=this.cellInputEl=document.createElement("input");b.style.height=l+"px";b.className=c.classNames.cellInput;a.appendChild(b);b.focus();b.value=d||""}this.emit({type:"cellClick",input:b})}}onDocumentClick(a){if(this.cellInputEl&&
a.target){const b=this.cellInputEl.parentNode;b&&b.contains(a.target)||this.removeCellInputElement()}}handleMouseOver(a){(a=a.target)&&a.classList.contains(c.classNames.cell)?(a=a.parentElement,this.toggleRowHighlight(a),this.hoveredRow=a,p(this.container,"dataGridHover",{row:a})):this.hoveredRow&&(this.toggleRowHighlight(),this.hoveredRow=void 0)}removeCellInputElement(){const a=this.cellInputEl;if(a){const b=a.parentNode;if(b){const c=b.getAttribute("data-data-type"),d=b.getAttribute("data-column-name");
let e=a.value;"number"===c&&(e=parseFloat(e));b.textContent=this.formatCell(e,d||"")}a.remove();delete this.cellInputEl}}updateScrollingLength(){var a=this.columnNames,b=this.dataTable.modified.getRowCount()-1,c=0;const f=b-this.getNumRowsToDraw(),e=this.outerContainer.clientHeight;this.innerContainer.style.height=e+"px";for(let c=0;c<this.rowElements.length;c++){const d=this.rowElements[c].childNodes;for(let e=0;e<a.length;e++)d[e].textContent=z(this.dataTable.modified.getCell(a[e],b-c))}this.scrollContainer.appendChild(this.innerContainer);
for(a=0;b>f;b--,a++)if(c+=this.rowElements[a].offsetHeight,c>e){b--;break}b-=f;this.scrollEndRowCount=this.rowElements.length-b;this.scrollEndTop=c-e;c=(this.dataTable.modified.getRowCount()+b)*this.options.cellHeight;this.scrollContainer.style.height=c+"px"}getNumRowsToDraw(){return Math.min(this.dataTable.modified.getRowCount(),Math.ceil(this.outerContainer.offsetHeight/this.options.cellHeight))}getDataGridSize(){const a=this.options,{height:b}=this.container.getBoundingClientRect();return 2<b?
b:a.defaultHeight}renderCell(a,b){let d=c.classNames.cell;this.isColumnEditable(b)||(d+=` ${d}-readonly`);const l=f(d);l.style.minHeight=this.options.cellHeight+"px";l.addEventListener("click",()=>this.onCellClick(l,b));a.appendChild(l)}renderRow(){const a=f(c.classNames.row);for(let b=0;b<this.columnNames.length;b++)this.renderCell(a,this.columnNames[b]);this.innerContainer.appendChild(a);this.rowElements.push(a)}formatHeaderCell(a){var b=this.options.columns[a];return(b=b&&b.headerFormat)?r.format(b,
{text:a}):a}formatCell(a,b){var c=this.options.columns[b];b=c&&c.cellFormat;c=c&&c.cellFormatter;let d=A(a)?a:"";b&&("number"===typeof a&&-1<b.indexOf("value")?d=r.format(b,{value:a}):"string"===typeof a&&-1<b.indexOf("text")&&(d=r.format(b,{text:a})));return c?c.call({value:a}):d.toString()}renderColumnHeader(a,b){var d=c.classNames.columnHeader;this.isColumnEditable(b)||(d+=` ${d}-readonly`);d=f(d);d.style.minHeight=this.options.cellHeight+"px";d.style.maxHeight=2*this.options.cellHeight+"px";d.textContent=
this.formatHeaderCell(b);a.appendChild(d)}renderColumnHeaders(){const a=this.columnNames,b=this.columnHeadersContainer=this.columnHeadersContainer||f(`${c.classNamePrefix}column-headers`);g(b);a.forEach(this.renderColumnHeader.bind(this,b));this.headerContainer||(this.headerContainer=f(`${c.classNamePrefix}header-container`),this.headerContainer.appendChild(b));this.gridContainer.insertBefore(this.headerContainer,this.outerContainer);this.updateColumnHeaders()}updateGridElements(){this.updateColumnHeaders();
this.redrawRowElements();this.updateDragHandlesPosition()}updateColumnHeaders(){const a=this.columnHeadersContainer;if(a){for(let b=0;b<this.columnNames.length;b++){const c=this.columnNames[b],d=a.children[b],e=this.overflowHeaderWidths[b];d.scrollWidth>d.clientWidth?(this.overflowHeaderWidths[b]=d.scrollWidth,d.textContent=this.formatHeaderCell(c).split(" ").map(a=>4>a.length?a:a.slice(0,2)+"...").join(" ")):k(e)&&e<=d.clientWidth&&(this.overflowHeaderWidths[b]=null,d.textContent=this.formatHeaderCell(c))}this.outerContainer.style.top=
a.clientHeight+"px";a.lastChild&&(a.lastChild.style.marginRight=this.outerContainer.offsetWidth-this.outerContainer.clientWidth+"px")}}redrawRowElements(){if(this.rowElements.length){var a=[],b=this.rowElements[0].children;for(var c=0;c<b.length;c++)a.push(b[c].style.flex);g(this.innerContainer);this.renderInitialRows();this.updateScrollingLength();this.updateVisibleCells(!0);for(b=0;b<this.rowElements.length;b++){c=this.rowElements[b];for(let b=0;b<c.childElementCount;b++)c.children[b].style.flex=
a[b]}}}updateDragHandlesPosition(){const a=this.columnHeadersContainer,b=this.columnDragHandlesContainer;if(b&&a)for(let c=0;c<b.childElementCount-1;c++){const d=b.children[c],e=a.children[c+1];d.style.height=a.clientHeight+"px";d.style.left=e.offsetLeft-2+"px"}}renderInitialRows(){this.rowElements=[];const a=this.getNumRowsToDraw();for(let b=0;b<a;b++)this.renderRow()}renderColumnDragHandles(){if(this.columnHeadersContainer){var a=this.columnDragHandlesContainer=this.columnDragHandlesContainer||
f(`${c.classNamePrefix}col-resize-container`),b=this.columnHeadersContainer.children,h=this.options.cellHeight;g(a);for(let d=1;d<b.length;++d){const e=b[d],g=f(`${c.classNamePrefix}col-resize-handle`);g.style.height=h+"px";g.style.left=e.offsetLeft-2+"px";g.addEventListener("mouseover",()=>{this.draggedResizeHandle||(g.style.opacity="1")});g.addEventListener("mouseleave",()=>{this.draggedResizeHandle||(g.style.opacity="0")});g.addEventListener("mousedown",this.onHandleMouseDown.bind(this,g,d));a.appendChild(g)}this.renderColumnResizeCrosshair(a);
document.addEventListener("mouseup",a=>{this.draggedResizeHandle&&this.stopColumnResize(this.draggedResizeHandle,a)});document.addEventListener("mousemove",a=>{this.draggedResizeHandle&&this.updateColumnResizeDrag(a)});this.headerContainer&&this.headerContainer.appendChild(a)}}renderColumnResizeCrosshair(a){const b=this.columnResizeCrosshair=this.columnResizeCrosshair||f(`${c.classNamePrefix}col-resize-crosshair`);b.style.top=this.options.cellHeight+"px";b.style.height=this.innerContainer.offsetHeight+
"px";a.appendChild(b)}onHandleMouseDown(a,b,c){!this.draggedResizeHandle&&(c.preventDefault(),this.draggedResizeHandle=a,this.draggedColumnRightIx=b,this.dragResizeStart=c.pageX,b=this.columnResizeCrosshair)&&(b.style.left=a.offsetLeft+a.offsetWidth/2-b.offsetWidth/2+"px",b.style.opacity="1")}updateColumnResizeDrag(a){const b=this.draggedResizeHandle,c=this.columnResizeCrosshair,d=this.draggedColumnRightIx,e=this.columnHeadersContainer;b&&c&&null!==d&&e&&this.dragResizeStart&&(a=e.children[d].offsetLeft+
(a.pageX-this.dragResizeStart),b.style.left=a-b.offsetWidth/2+"px",c.style.left=a-c.offsetWidth/2+"px")}stopColumnResize(a,b){var c=this.columnResizeCrosshair;const d=this.draggedColumnRightIx;var e=this.columnHeadersContainer;c&&e&&this.dragResizeStart&&null!==d&&(a.style.opacity="0",c.style.opacity="0",a=e.children[d-1],e=e.children[d],c=b.pageX-this.dragResizeStart,b=(a.offsetWidth+c)/a.offsetWidth,c=(e.offsetWidth-c)/e.offsetWidth,a=(a.style.flex?parseFloat(a.style.flex):1)*b,e=(e.style.flex?
parseFloat(e.style.flex):1)*c,this.resizeColumn(a,d-1),this.resizeColumn(e,d),this.draggedColumnRightIx=this.draggedResizeHandle=null,this.updateGridElements())}setSize(a,b){a&&(this.innerContainer.style.width=a+"px");b&&(this.gridContainer.style.height=this.getDataGridSize()+"px",this.outerContainer.style.height=b-(this.options.cellHeight+this.getMarginHeight(b))+"px");this.render()}getMarginHeight(a){return a-this.gridContainer.getBoundingClientRect().height}}F.defaultOptions=y;return F});r(a,"masters/datagrid.src.js",
[a["DataGrid/Globals.js"],a["DataGrid/DataGrid.js"]],function(a,m){a.DataGrid=m;a.win.DataGrid||(a.win.DataGrid=a);return a})});
//# sourceMappingURL=datagrid.js.map