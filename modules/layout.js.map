{"version":3,"sources":["<anon>"],"sourcesContent":["/**\n * @license Highcharts Dashboards Layout 2.2.0 (2024-07-02)\n *\n * (c) 2009-2024 Highsoft AS\n *\n * License: www.highcharts.com/license\n */\n(function (factory) {\n    if (typeof module === 'object' && module.exports) {\n        factory['default'] = factory;\n        module.exports = factory;\n    } else if (typeof define === 'function' && define.amd) {\n        define('dashboards/modules/layout', ['dashboards'], function (Dashboards) {\n            factory(Dashboards);\n            factory.Dashboards = Dashboards;\n            return factory;\n        });\n    } else {\n        factory(typeof Dashboards !== 'undefined' ? Dashboards : undefined);\n    }\n}(function (Dashboards) {\n    'use strict';\n    var _modules = Dashboards ? Dashboards._modules : {};\n    function _registerModule(obj, path, args, fn) {\n        if (!obj.hasOwnProperty(path)) {\n            obj[path] = fn.apply(null, args);\n\n            if (typeof CustomEvent === 'function') {\n                Dashboards.win.dispatchEvent(new CustomEvent(\n                    'DashboardsModuleLoaded',\n                    { detail: { path: path, module: obj[path] } }\n                ));\n            }\n        }\n    }\n    _registerModule(_modules, 'Dashboards/EditMode/EditRenderer.js', [_modules['Dashboards/EditMode/EditGlobals.js'], _modules['Core/Utilities.js']], function (EditGlobals, U) {\n        /* *\n         *\n         *  (c) 2009-2024 Highsoft AS\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         *  Authors:\n         *  - Sebastian Bochan\n         *  - Wojciech Chmiel\n         *  - GÃ¸ran Slettemark\n         *  - Sophie Bremer\n         *\n         * */\n        const { merge, createElement, defined } = U;\n        /* *\n         *\n         *  Functions\n         *\n         * */\n        /**\n         * Function to create a context button.\n         * @internal\n         *\n         * @param parentElement\n         * The element to which the new element should be appended.\n         *\n         * @param editMode\n         * EditMode instance.\n         *\n         * @returns\n         * Context button element.\n         */\n        function renderContextButton(parentNode, editMode) {\n            const contextMenuOptions = editMode.options.contextMenu;\n            let contextButton;\n            if (contextMenuOptions) {\n                contextButton = createElement('button', {\n                    className: EditGlobals.classNames.contextMenuBtn,\n                    onclick: function (event) {\n                        event.stopPropagation();\n                        editMode.onContextBtnClick();\n                    }\n                }, {}, parentNode);\n                // Add the icon if defined.\n                if (contextMenuOptions.icon) {\n                    createElement('img', {\n                        src: contextMenuOptions.icon,\n                        className: EditGlobals.classNames.icon\n                    }, {}, contextButton);\n                }\n                // Add text next to the icon if defined.\n                if (contextMenuOptions.text) {\n                    createElement('span', {\n                        className: EditGlobals.classNames.contextMenuBtnText,\n                        textContent: contextMenuOptions.text\n                    }, {}, contextButton);\n                }\n                contextButton.setAttribute('aria-label', editMode.lang.accessibility.contextMenu.button);\n                contextButton.setAttribute('aria-expanded', 'false');\n            }\n            return contextButton;\n        }\n        /**\n         * Creates the collapsable header element.\n         * @internal\n         *\n         * @param parentElement\n         * The HTMLElement to which the element should be rendered to.\n         *\n         * @param options\n         * Nested header options.\n         *\n         * @returns the outer element and content in the collapsable div.\n         */\n        function renderCollapseHeader(parentElement, options) {\n            const { name, showToggle, onchange, isEnabled, isNested, isStandalone, lang } = options;\n            const accordion = createElement('div', {\n                className: EditGlobals.classNames[isNested ? 'accordionNestedWrapper' : 'accordionContainer'] + ' ' + EditGlobals.classNames.collapsableContentHeader\n            }, {}, parentElement);\n            const header = createElement('div', {\n                className: EditGlobals.classNames.accordionHeader\n            }, {}, accordion);\n            let headerBtn;\n            if (!isStandalone) {\n                headerBtn = createElement('button', { className: EditGlobals.classNames.accordionHeaderBtn }, {}, header);\n            }\n            createElement('span', {\n                textContent: lang[name] || name\n            }, {}, headerBtn);\n            if (showToggle) {\n                renderToggle(header, {\n                    enabledOnOffLabels: true,\n                    id: name,\n                    name: '',\n                    onchange: onchange,\n                    value: isEnabled || false,\n                    lang\n                });\n            }\n            const headerIcon = createElement('span', {\n                className: EditGlobals.classNames.accordionHeaderIcon + ' ' +\n                    EditGlobals.classNames.collapsedElement\n            }, {}, headerBtn);\n            const content = createElement('div', {\n                className: EditGlobals.classNames.accordionContent + ' ' +\n                    (isStandalone ?\n                        EditGlobals.classNames.standaloneElement :\n                        EditGlobals.classNames.hiddenElement)\n            }, {}, accordion);\n            headerBtn?.addEventListener('click', function () {\n                content.classList.toggle(EditGlobals.classNames.hiddenElement);\n                headerIcon.classList.toggle(EditGlobals.classNames.collapsedElement);\n            });\n            return { outerElement: accordion, content: content };\n        }\n        /**\n         * Function to create select element.\n         *\n         * @param parentElement\n         * The element to which the new element should be appended.\n         *\n         * @param options\n         * Select form field options.\n         *\n         * @returns\n         * Select element\n         */\n        function renderSelect(parentElement, options) {\n            if (!parentElement) {\n                return;\n            }\n            if (options.name) {\n                renderText(parentElement, { title: options.name, isLabel: true });\n            }\n            const iconsURLPrefix = options.iconsURLPrefix || '';\n            const customSelect = createElement('div', {\n                className: EditGlobals.classNames.dropdown +\n                    ' ' +\n                    EditGlobals.classNames.collapsableContentHeader\n            }, {}, parentElement);\n            const btn = createElement('button', {\n                className: EditGlobals.classNames.dropdownButton\n            }, {}, customSelect);\n            const btnContent = createElement('div', {\n                className: EditGlobals.classNames.dropdownButtonContent\n            }, {}, btn);\n            const iconURL = (U.find(options.selectOptions, (item) => item.name === options.value) || {}).iconURL;\n            let headerIcon;\n            if (iconURL) {\n                headerIcon = createElement('img', {\n                    src: iconsURLPrefix + iconURL,\n                    className: EditGlobals.classNames.icon\n                }, {}, btnContent);\n            }\n            const placeholder = createElement('span', {\n                textContent: options.value,\n                id: options.id || ''\n            }, {}, btnContent);\n            const dropdownPointer = createElement('img', {\n                className: EditGlobals.classNames.dropdownIcon +\n                    ' ' +\n                    EditGlobals.classNames.collapsedElement,\n                src: iconsURLPrefix + 'dropdown-pointer.svg'\n            }, {}, btn);\n            const dropdown = createElement('ul', {\n                className: EditGlobals.classNames.dropdownContent +\n                    ' ' +\n                    EditGlobals.classNames.hiddenElement\n            }, {}, customSelect);\n            btn.addEventListener('click', function () {\n                dropdown.classList.toggle(EditGlobals.classNames.hiddenElement);\n                dropdownPointer.classList.toggle(EditGlobals.classNames.collapsedElement);\n            });\n            for (let i = 0, iEnd = options.selectOptions.length; i < iEnd; ++i) {\n                renderSelectElement(merge(options.selectOptions[i] || {}, { iconsURLPrefix }), dropdown, placeholder, options.id, dropdownPointer, headerIcon, options.onchange);\n            }\n            return customSelect;\n        }\n        /**\n         * @internal\n         */\n        function renderSelectElement(option, dropdown, placeholder, id, dropdownPointer, headerIcon, callback) {\n            const iconURL = option.iconsURLPrefix + option.iconURL;\n            const selectOption = createElement('li', {}, {}, dropdown);\n            const selectOptionBtn = createElement('button', { className: EditGlobals.classNames.customSelectButton }, {}, selectOption);\n            if (option.iconURL) {\n                createElement('img', {\n                    src: iconURL\n                }, {}, selectOptionBtn);\n            }\n            createElement('span', { textContent: option.name || '' }, {}, selectOptionBtn);\n            selectOptionBtn.addEventListener('click', function () {\n                dropdown.classList.add(EditGlobals.classNames.hiddenElement);\n                dropdownPointer.classList.toggle(EditGlobals.classNames.collapsedElement);\n                placeholder.textContent = option.name || '';\n                if (headerIcon && option.iconURL) {\n                    headerIcon.src = iconURL;\n                }\n                if (callback) {\n                    return callback(option.name);\n                }\n            });\n        }\n        /**\n         * Function to create toggle element.\n         *\n         * @param parentElement\n         * The element to which the new element should be appended.\n         *\n         * @param options\n         * Form field options.\n         *\n         * @returns\n         * Toggle element.\n         */\n        function renderToggle(parentElement, options) {\n            if (!parentElement) {\n                return;\n            }\n            const lang = options.lang, value = options.value, title = options.title || options.name, langKey = options.langKey;\n            const toggleContainer = createElement('button', {\n                className: EditGlobals.classNames.toggleContainer,\n                type: 'button',\n                role: 'switch',\n                ariaChecked: false,\n                ariaLabel: langKey ? lang.accessibility[langKey][options.name] : ''\n            }, {}, parentElement);\n            if (title) {\n                renderText(toggleContainer, { title });\n            }\n            if (options.enabledOnOffLabels) {\n                renderText(toggleContainer, {\n                    title: lang.off,\n                    className: EditGlobals.classNames.toggleLabels\n                });\n            }\n            const toggle = createElement('label', {\n                className: EditGlobals.classNames.toggleWrapper +\n                    ' ' + (options.className || '')\n            }, {}, toggleContainer);\n            const input = renderCheckbox(toggle, value), callbackFn = options.onchange;\n            callbackFn && toggleContainer.addEventListener('click', (e) => {\n                callbackFn(!input.checked);\n                input.checked = !input.checked;\n                toggleContainer.setAttribute('aria-checked', input.checked);\n                e.stopPropagation();\n            });\n            const slider = createElement('span', {\n                className: EditGlobals.classNames.toggleSlider\n            }, {}, toggle);\n            callbackFn && slider.addEventListener('click', (e) => {\n                e.preventDefault();\n            });\n            if (options.enabledOnOffLabels) {\n                renderText(toggleContainer, {\n                    title: lang.on,\n                    className: EditGlobals.classNames.toggleLabels\n                });\n            }\n            return toggleContainer;\n        }\n        /**\n         * Function to create text element.\n         *\n         * @param parentElement\n         * The element to which the new element should be appended\n         *\n         * @param text\n         * Text to be displayed\n         *\n         * @param callback\n         * Callback function to be fired on the click\n         *\n         * @returns text Element\n         */\n        function renderText(parentElement, options) {\n            let textElem;\n            const { title: text, className, isLabel } = options;\n            if (parentElement) {\n                const labelFor = isLabel ? { htmlFor: text } : {};\n                textElem = createElement(isLabel ? 'label' : 'div', {\n                    className: EditGlobals.classNames.labelText + ' ' + (className || ''),\n                    textContent: text,\n                    ...labelFor\n                }, {}, parentElement);\n            }\n            return textElem;\n        }\n        /**\n         * Function to create Icon element.\n         *\n         * @param parentElement\n         * The element to which the new element should be appended.\n         *\n         * @param icon\n         * Icon URL\n         *\n         * @param callback\n         * Callback function\n         *\n         * @returns\n         * Icon Element\n         */\n        function renderIcon(parentElement, options) {\n            const { icon, callback } = options;\n            if (!parentElement) {\n                return;\n            }\n            const iconElem = createElement('div', {\n                onclick: callback,\n                className: options.className || ''\n            }, {}, parentElement);\n            iconElem.style['background-image'] = 'url(' + icon + ')';\n            const mousedown = options.mousedown;\n            const click = options.click;\n            if (mousedown) {\n                iconElem.onmousedown = function () {\n                    mousedown.apply(this, arguments);\n                };\n            }\n            if (click) {\n                iconElem.addEventListener('click', function () {\n                    click.apply(this, arguments);\n                });\n            }\n            return iconElem;\n        }\n        /**\n         * Function to create input element.\n         *\n         * @param parentElement\n         * the element to which the new element should be appended\n         *\n         * @param options\n         * Form field options\n         *\n         * @returns\n         * Input Element\n         */\n        function renderInput(parentElement, options) {\n            if (!parentElement) {\n                return;\n            }\n            if (options.name) {\n                renderText(parentElement, { title: options.name, isLabel: true });\n            }\n            const input = createElement('input', {\n                type: 'text',\n                onclick: options.callback,\n                id: options.id || '',\n                name: options.name || '',\n                value: ((defined(options.value) &&\n                    options.value.toString().replace(/\\\"/g, '')) || '')\n            }, {}, parentElement);\n            const onchange = options.onchange;\n            if (onchange) {\n                input.addEventListener('change', function (e) {\n                    onchange(e.target.value);\n                });\n            }\n            return input;\n        }\n        /**\n         * Function to create textarea element.\n         *\n         * @param parentElement\n         * The element to which the new element should be appended\n         *\n         * @param options\n         * Form field options\n         *\n         * @returns\n         * textarea Element\n         */\n        function renderTextarea(parentElement, options) {\n            if (!parentElement) {\n                return;\n            }\n            if (options.name) {\n                renderText(parentElement, { title: options.name, isLabel: true });\n            }\n            const textarea = createElement('textarea', {\n                id: options.id,\n                name: options.name,\n                value: options.value || ''\n            }, {}, parentElement);\n            const onchange = options.onchange;\n            if (onchange) {\n                textarea.addEventListener('change', function (e) {\n                    onchange(e.target.value);\n                });\n            }\n            return textarea;\n        }\n        /**\n         * Function to render the input of type checkbox.\n         *\n         * @param parentElement\n         * An element to which render the checkbox to\n         *\n         * @param checked\n         * Whether the checkbox should be checked or not.\n         *\n         * @returns\n         * The checkbox element\n         */\n        function renderCheckbox(parentElement, checked) {\n            let input;\n            if (parentElement) {\n                input = createElement('input', {\n                    type: 'checkbox',\n                    checked: !!checked\n                }, {}, parentElement);\n            }\n            return input;\n        }\n        /**\n         * Function to create button element.\n         *\n         * @param parentElement\n         * the element to which the new element should be appended\n         *\n         * @param options\n         * Button field options\n         *\n         * @returns\n         * Button Element\n         */\n        function renderButton(parentElement, options) {\n            if (!parentElement) {\n                return;\n            }\n            const button = createElement('button', {\n                className: (EditGlobals.classNames.button + ' ' +\n                    (options.className || '')),\n                onclick: options.callback,\n                textContent: options.text\n            }, options.style || {}, parentElement);\n            if (options.icon) {\n                button.style['background-image'] =\n                    'url(' + options.icon + ')';\n            }\n            return button;\n        }\n        /**\n         * Get the renderer function based on the type of the element to render.\n         *\n         * @param type\n         * Type of the element to render\n         *\n         * @returns\n         * function to render a specific element\n         */\n        function getRendererFunction(type) {\n            return {\n                select: renderSelect,\n                toggle: renderToggle,\n                text: renderText,\n                collapse: renderCollapseHeader,\n                icon: renderIcon,\n                contextButton: renderContextButton,\n                input: renderInput,\n                textarea: renderTextarea,\n                checkbox: renderCheckbox,\n                button: renderButton\n            }[type];\n        }\n        const EditRenderer = {\n            renderSelect,\n            renderToggle,\n            renderText,\n            renderCollapseHeader,\n            renderIcon,\n            renderContextButton,\n            renderInput,\n            renderTextarea,\n            renderCheckbox,\n            renderButton,\n            getRendererFunction\n        };\n\n        return EditRenderer;\n    });\n    _registerModule(_modules, 'Dashboards/EditMode/Menu/MenuItem.js', [_modules['Dashboards/EditMode/EditGlobals.js'], _modules['Core/Utilities.js'], _modules['Dashboards/EditMode/EditRenderer.js']], function (EditGlobals, U, EditRenderer) {\n        /* *\n         *\n         *  (c) 2009-2024 Highsoft AS\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         *  Authors:\n         *  - Sebastian Bochan\n         *  - Wojciech Chmiel\n         *  - GÃ¸ran Slettemark\n         *  - Sophie Bremer\n         *\n         * */\n        const { createElement, merge } = U;\n        class MenuItem {\n            /* *\n            *\n            *  Constructor\n            *\n            * */\n            constructor(menu, options) {\n                this.menu = menu;\n                this.isActive = false;\n                this.options = merge(MenuItem.defaultOptions, options);\n                this.container = this.setContainer();\n                this.innerElement = this.setInnerElement();\n            }\n            /* *\n            *\n            *  Functions\n            *\n            * */\n            setContainer() {\n                const item = this, options = item.options;\n                let className = EditGlobals.classNames.menuItem;\n                if (item.menu.options.itemsClassName) {\n                    className += ' ' + item.menu.options.itemsClassName;\n                }\n                if (options.className) {\n                    className += ' ' + options.className;\n                }\n                return createElement('div', { className: className || '' }, merge(this.options.style || {}, \n                // To remove\n                this.isActive ? { display: 'block' } : {}), this.menu.container);\n            }\n            setInnerElement() {\n                const item = this, options = item.options, container = item.container, langKey = options.langKey;\n                if (options.type === 'toggle') {\n                    return EditRenderer.renderToggle(container, {\n                        id: options.id,\n                        name: options.id,\n                        title: langKey ?\n                            this.menu.editMode.lang[langKey] :\n                            options.text,\n                        value: !!(options.getValue && options.getValue(item)),\n                        lang: this.menu.editMode.lang,\n                        langKey: langKey,\n                        onchange: options.events?.click?.bind(item)\n                    });\n                }\n                if (options.type === 'text') {\n                    return EditRenderer.renderText(container, {\n                        title: langKey ?\n                            this.menu.editMode.lang[langKey] :\n                            options.text || '',\n                        className: options.className || ''\n                    });\n                }\n                if (options.type === 'icon') {\n                    return EditRenderer.renderIcon(container, {\n                        icon: options.icon || '',\n                        mousedown: options.events?.onmousedown?.bind(item),\n                        click: options.events?.click?.bind(item)\n                    });\n                }\n                if (options.type === 'button') {\n                    return EditRenderer.renderButton(container, {\n                        callback: options.events?.click?.bind(item),\n                        className: options.className || '',\n                        style: options.style || {},\n                        text: langKey ?\n                            this.menu.editMode.lang[langKey] :\n                            (options.text || '')\n                    });\n                }\n            }\n            update() {\n                const item = this, options = item.options;\n                if (options.events && options.events.update) {\n                    options.events.update.apply(item, arguments);\n                }\n            }\n            activate() {\n                const item = this;\n                item.update();\n                // Temp.\n                if (item.container) {\n                    item.isActive = true;\n                    item.container.style.display = 'block';\n                }\n            }\n            deactivate() {\n                const item = this;\n                // Temp.\n                if (item.container) {\n                    item.isActive = false;\n                    item.container.style.display = 'none';\n                }\n            }\n        }\n        /* *\n        *\n        *  Static Properties\n        *\n        * */\n        MenuItem.defaultOptions = {\n            id: '',\n            type: 'text'\n        };\n\n        return MenuItem;\n    });\n    _registerModule(_modules, 'Dashboards/EditMode/Menu/MenuItemBindings.js', [], function () {\n        /* *\n         *\n         *  (c) 2009-2024 Highsoft AS\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         *  Authors:\n         *  - Sebastian Bochan\n         *  - Wojciech Chmiel\n         *  - GÃ¸ran Slettemark\n         *  - Sophie Bremer\n         *\n         * */\n        const MenuItemBindings = {\n            /* *\n            *\n            *  Context menu\n            *\n            * */\n            viewFullscreen: {\n                id: 'viewFullscreen',\n                type: 'button',\n                langKey: 'viewFullscreen',\n                events: {\n                    click: function () {\n                        const fullScreen = this.menu.editMode.board.fullscreen;\n                        if (fullScreen) {\n                            fullScreen.toggle();\n                        }\n                    }\n                }\n            }\n        };\n\n        return MenuItemBindings;\n    });\n    _registerModule(_modules, 'Dashboards/EditMode/Menu/Menu.js', [_modules['Dashboards/EditMode/EditGlobals.js'], _modules['Core/Utilities.js'], _modules['Dashboards/EditMode/Menu/MenuItem.js'], _modules['Dashboards/EditMode/Menu/MenuItemBindings.js']], function (EditGlobals, U, MenuItem, MenuItemBindings) {\n        /* *\n         *\n         *  (c) 2009-2024 Highsoft AS\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         *  Authors:\n         *  - Sebastian Bochan\n         *  - Wojciech Chmiel\n         *  - GÃ¸ran Slettemark\n         *  - Sophie Bremer\n         *\n         * */\n        const { createElement, merge } = U;\n        class Menu {\n            /* *\n            *\n            *  Constructor\n            *\n            * */\n            constructor(parentElement, options, editMode, parent) {\n                this.parentElement = parentElement;\n                this.isVisible = false;\n                this.activeItems = [];\n                this.options = options;\n                this.items = {};\n                this.editMode = editMode;\n                if (parent) {\n                    this.parent = parent;\n                }\n                this.container = this.setContainer();\n            }\n            /* *\n            *\n            *  Functions\n            *\n            * */\n            setContainer() {\n                return createElement('div', {\n                    className: EditGlobals.classNames.menu +\n                        ' ' + (this.options.className || '')\n                }, {}, this.parentElement);\n            }\n            // ItemsSchemas - default items definitions.\n            initItems(itemsSchemas, activeItems) {\n                const menu = this, optionsItems = menu.options.items || [];\n                let itemSchema, itemConfig, item, options;\n                for (let i = 0, iEnd = optionsItems.length; i < iEnd; ++i) {\n                    itemConfig = optionsItems[i];\n                    itemSchema =\n                        typeof itemConfig === 'string' ? itemsSchemas[itemConfig] :\n                            itemConfig.id ? itemsSchemas[itemConfig.id] :\n                                {};\n                    options = typeof itemConfig === 'string' ?\n                        merge(itemSchema, { id: itemConfig }) :\n                        merge(itemSchema, itemConfig);\n                    if (options.id) {\n                        item = new MenuItem(menu, options);\n                        // Save initialized item.\n                        menu.items[item.options.id] = item;\n                        if (activeItems) {\n                            item.activate();\n                            menu.activeItems.push(item);\n                        }\n                    }\n                    else {\n                        // Error - defined item needs an id.\n                    }\n                }\n            }\n            setActiveItems(items) {\n                const menu = this;\n                let item;\n                // Deactivate items.\n                for (let i = 0, iEnd = menu.activeItems.length; i < iEnd; ++i) {\n                    if (items.indexOf(menu.activeItems[i].options.id) === -1) {\n                        menu.activeItems[i].deactivate();\n                    }\n                }\n                menu.activeItems.length = 0;\n                for (let j = 0, jEnd = items.length; j < jEnd; ++j) {\n                    item = menu.items[items[j]];\n                    if (item) {\n                        // Activate item.\n                        if (!item.isActive) {\n                            item.activate();\n                        }\n                        else {\n                            item.update();\n                        }\n                        menu.activeItems.push(item);\n                    }\n                }\n            }\n            deactivateActiveItems() {\n                const menu = this;\n                for (let i = 0, iEnd = menu.activeItems.length; i < iEnd; ++i) {\n                    menu.activeItems[i].deactivate();\n                }\n            }\n            updateActiveItems() {\n                const activeItems = this.activeItems;\n                for (let i = 0, iEnd = activeItems.length; i < iEnd; ++i) {\n                    activeItems[i].update();\n                }\n            }\n            destroy() {\n                this.activeItems.length = 0;\n                this.container.remove();\n                this.items = {};\n                this.options = {};\n            }\n        }\n        /* *\n        *\n        *  Static Properties\n        *\n        * */\n        Menu.items = MenuItemBindings;\n\n        return Menu;\n    });\n    _registerModule(_modules, 'Dashboards/EditMode/Toolbar/EditToolbar.js', [_modules['Core/Utilities.js'], _modules['Dashboards/EditMode/Menu/Menu.js']], function (U, Menu) {\n        /* *\n         *\n         *  (c) 2009-2024 Highsoft AS\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         *  Authors:\n         *  - Sebastian Bochan\n         *  - Wojciech Chmiel\n         *  - GÃ¸ran Slettemark\n         *  - Sophie Bremer\n         *\n         * */\n        const { defined, createElement, css } = U;\n        /**\n         * Abstract Class of Edit Toolbar.\n         * @internal\n         */\n        class EditToolbar {\n            /* *\n             *\n             *  Constructor\n             *\n             * */\n            constructor(editMode, options) {\n                this.container = createElement('div', {\n                    className: options.className\n                }, void 0, editMode.board.container);\n                this.editMode = editMode;\n                this.iconURLPrefix = editMode.iconsURLPrefix;\n                this.menu = new Menu(this.container, options.menu, editMode, this);\n                this.options = options;\n                this.isVisible = false;\n                if (this.options.outline) {\n                    this.outline = createElement('div', {\n                        className: options.outlineClassName\n                    }, void 0, this.container);\n                }\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            hide() {\n                this.setPosition(void 0, void 0);\n            }\n            refreshOutline(x, y, guiElement, offset = 0) {\n                const toolbar = this, guiElemCnt = (guiElement || {}).container;\n                if (toolbar.outline && guiElemCnt) {\n                    css(toolbar.outline, {\n                        display: 'block',\n                        left: x - offset + 'px',\n                        top: y - offset + 'px',\n                        width: guiElemCnt.offsetWidth + offset * 2 + 'px',\n                        height: guiElemCnt.offsetHeight + offset * 2 + 'px'\n                    });\n                }\n            }\n            hideOutline() {\n                if (this.outline) {\n                    this.outline.style.display = 'none';\n                }\n            }\n            setPosition(x, y) {\n                const toolbar = this;\n                if (toolbar.container) {\n                    css(toolbar.container, {\n                        left: (x || '-9999') + 'px',\n                        top: (y || '-9999') + 'px'\n                    });\n                }\n                toolbar.isVisible = defined(x) && defined(y);\n            }\n        }\n\n        return EditToolbar;\n    });\n    _registerModule(_modules, 'Dashboards/EditMode/Toolbar/CellEditToolbar.js', [_modules['Dashboards/Layout/Cell.js'], _modules['Dashboards/EditMode/EditGlobals.js'], _modules['Dashboards/EditMode/Toolbar/EditToolbar.js'], _modules['Dashboards/Layout/GUIElement.js'], _modules['Core/Utilities.js']], function (Cell, EditGlobals, EditToolbar, GUIElement, U) {\n        /* *\n         *\n         *  (c) 2009-2024 Highsoft AS\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         *  Authors:\n         *  - Sebastian Bochan\n         *  - Wojciech Chmiel\n         *  - GÃ¸ran Slettemark\n         *  - Sophie Bremer\n         *\n         * */\n        const { merge, fireEvent, objectEach } = U;\n        /**\n         * @internal\n         */\n        class CellEditToolbar extends EditToolbar {\n            static getItemsConfig(options, iconURLPrefix) {\n                const items = [];\n                if (options.dragDrop?.enabled) {\n                    items.push({\n                        id: 'drag',\n                        type: 'icon',\n                        icon: iconURLPrefix + 'drag.svg',\n                        events: {\n                            onmousedown: function (e) {\n                                const cellEditToolbar = this.menu\n                                    .parent;\n                                const dragDrop = cellEditToolbar.editMode.dragDrop;\n                                if (dragDrop &&\n                                    cellEditToolbar.cell &&\n                                    cellEditToolbar.cell instanceof Cell) {\n                                    dragDrop.onDragStart(e, cellEditToolbar.cell);\n                                }\n                            }\n                        }\n                    });\n                }\n                if (options.settings?.enabled) {\n                    items.push({\n                        id: 'settings',\n                        type: 'icon',\n                        icon: iconURLPrefix + 'settings.svg',\n                        events: {\n                            click: function () {\n                                this.menu.parent.editMode.setEditOverlay();\n                                this.menu.parent.onCellOptions();\n                            }\n                        }\n                    });\n                }\n                items.push({\n                    id: 'destroy',\n                    type: 'icon',\n                    className: EditGlobals.classNames.menuDestroy,\n                    icon: iconURLPrefix + 'destroy.svg',\n                    events: {\n                        click: function () {\n                            const parentNode = this.menu.parent, editMode = this.menu.parent.editMode, popup = editMode.confirmationPopup;\n                            popup.show({\n                                confirmButton: {\n                                    value: editMode.lang.confirmButton,\n                                    callback: parentNode.onCellDestroy,\n                                    context: parentNode\n                                },\n                                cancelButton: {\n                                    value: editMode.lang.cancelButton,\n                                    callback: () => {\n                                        popup.closePopup();\n                                    }\n                                },\n                                text: editMode.lang.confirmDestroyCell\n                            });\n                        }\n                    }\n                });\n                return items;\n            }\n            /* *\n             *\n             *  Constructor\n             *\n             * */\n            constructor(editMode) {\n                super(editMode, merge(CellEditToolbar.defaultOptions, (editMode.options.toolbars || {}).cell, {\n                    menu: {\n                        items: CellEditToolbar.getItemsConfig(editMode.options, editMode.iconsURLPrefix)\n                    }\n                }));\n                if (editMode.customHTMLMode) {\n                    this.filterOptionsAvailableInCustomHTMLMode();\n                }\n                this.menu.initItems({});\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * Show toolbar for given cell.\n             *\n             * @param cell\n             * Cell to show toolbar for.\n             */\n            showToolbar(cell) {\n                const toolbar = this;\n                const cellCnt = cell.container;\n                const toolbarWidth = 30;\n                const toolbarMargin = 10;\n                const cellToolbar = toolbar.editMode.cellToolbar;\n                if (!cellToolbar) {\n                    return;\n                }\n                if (cellCnt && toolbar.editMode.isActive() &&\n                    !(toolbar.editMode.dragDrop || {}).isActive) {\n                    const cellOffsets = GUIElement.getOffsets(cell, toolbar.editMode.board.container);\n                    const x = cellOffsets.right - toolbarWidth - toolbarMargin;\n                    const y = cellOffsets.top + toolbarMargin;\n                    // Temp - activate all items.\n                    objectEach(toolbar.menu.items, (item) => {\n                        item.activate();\n                    });\n                    toolbar.setPosition(x, y);\n                    toolbar.cell = cell;\n                    toolbar.refreshOutline();\n                    cellToolbar.isVisible = true;\n                }\n                else if (toolbar.isVisible) {\n                    toolbar.hide();\n                    cellToolbar.isVisible = false;\n                }\n            }\n            refreshOutline() {\n                const toolbar = this, offsetWidth = -1;\n                if (toolbar.cell && toolbar.cell.container && toolbar.outline) {\n                    super.refreshOutline(-toolbar.cell.container.offsetWidth, 0, this.cell, offsetWidth);\n                }\n            }\n            /**\n             * When options icon is clicked, show sidebar with options.\n             */\n            onCellOptions() {\n                const toolbar = this;\n                const editMode = toolbar.editMode;\n                if (!editMode.sidebar) {\n                    return;\n                }\n                editMode.sidebar.show(toolbar.cell);\n                toolbar.highlightCell();\n            }\n            onCellDestroy() {\n                const toolbar = this;\n                if (toolbar.cell && toolbar.cell instanceof Cell) {\n                    const row = toolbar.cell.row;\n                    const cellId = toolbar.cell.id;\n                    toolbar.resetEditedCell();\n                    toolbar.cell.destroy();\n                    toolbar.cell = void 0;\n                    // Hide row and cell toolbars.\n                    toolbar.editMode.hideToolbars(['cell', 'row']);\n                    // Call cellResize dashboard event.\n                    if (row && row.cells && row.cells.length) {\n                        fireEvent(toolbar.editMode.board, 'cellResize', {\n                            cell: row.cells[0]\n                        });\n                        fireEvent(row, 'cellChange', { cell: row.cells[0], row });\n                        fireEvent(toolbar.editMode, 'layoutChanged', {\n                            type: 'cellDestroyed',\n                            target: cellId,\n                            board: toolbar.editMode.board\n                        });\n                    }\n                }\n            }\n            resetEditedCell() {\n                this.editedCell = void 0;\n            }\n            /**\n             * Filter options available in custom HTML mode, only settings available.\n             */\n            filterOptionsAvailableInCustomHTMLMode() {\n                this.options.menu.items = this.options.menu.items?.filter((item) => {\n                    if (typeof item === 'string') {\n                        return false;\n                    }\n                    return item.id === 'settings';\n                });\n            }\n            /**\n             * Highlight cell and gray out the rest of the dashboard.\n             */\n            highlightCell() {\n                const toolbar = this;\n                if (!toolbar.cell) {\n                    return;\n                }\n                if (toolbar.cell.setHighlight) {\n                    toolbar.cell.setHighlight();\n                }\n                else {\n                    toolbar.cell.container.classList.add(EditGlobals.classNames.cellEditHighlight);\n                    toolbar.editMode.board.container.classList.add(EditGlobals.classNames.dashboardCellEditHighlightActive);\n                }\n            }\n        }\n        /* *\n         *\n         *  Static Properties\n         *\n         * */\n        CellEditToolbar.defaultOptions = {\n            enabled: true,\n            className: EditGlobals.classNames.editToolbar,\n            outline: false,\n            outlineClassName: EditGlobals.classNames.editToolbarCellOutline,\n            menu: {\n                className: EditGlobals.classNames.editToolbarCell,\n                itemsClassName: EditGlobals.classNames.editToolbarItem,\n                items: []\n            }\n        };\n\n        return CellEditToolbar;\n    });\n    _registerModule(_modules, 'Dashboards/EditMode/Toolbar/RowEditToolbar.js', [_modules['Core/Utilities.js'], _modules['Dashboards/EditMode/EditGlobals.js'], _modules['Dashboards/EditMode/Toolbar/EditToolbar.js'], _modules['Dashboards/Layout/GUIElement.js']], function (U, EditGlobals, EditToolbar, GUIElement) {\n        /* *\n         *\n         *  (c) 2009-2024 Highsoft AS\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         *  Authors:\n         *  - Sebastian Bochan\n         *  - Wojciech Chmiel\n         *  - GÃ¸ran Slettemark\n         *  - Sophie Bremer\n         *\n         * */\n        const { fireEvent, merge, objectEach } = U;\n        /**\n         * @internal\n         */\n        class RowEditToolbar extends EditToolbar {\n            static getMenuItemsConfig(options, iconURLPrefix) {\n                const items = [];\n                if (options.dragDrop?.enabled) {\n                    items.push({\n                        id: 'drag',\n                        type: 'icon',\n                        icon: iconURLPrefix + 'drag.svg',\n                        events: {\n                            onmousedown: function (e) {\n                                const rowEditToolbar = this.menu\n                                    .parent, dragDrop = rowEditToolbar.editMode.dragDrop;\n                                e.preventDefault();\n                                if (dragDrop && rowEditToolbar.row) {\n                                    dragDrop.onDragStart(e, rowEditToolbar.row);\n                                }\n                            }\n                        }\n                    });\n                }\n                items.push({\n                    id: 'destroy',\n                    type: 'icon',\n                    className: EditGlobals.classNames.menuDestroy,\n                    icon: iconURLPrefix + 'destroy.svg',\n                    events: {\n                        click: function () {\n                            const parentNode = this.menu.parent, editMode = this.menu.parent.editMode, popup = editMode.confirmationPopup;\n                            popup.show({\n                                confirmButton: {\n                                    value: editMode.lang.confirmButton,\n                                    callback: parentNode.onRowDestroy,\n                                    context: parentNode\n                                },\n                                cancelButton: {\n                                    value: editMode.lang.cancelButton,\n                                    callback: () => {\n                                        popup.closePopup();\n                                    }\n                                },\n                                text: editMode.lang.confirmDestroyRow\n                            });\n                        }\n                    }\n                });\n                return items;\n            }\n            /* *\n             *\n             *  Constructor\n             *\n             * */\n            constructor(editMode) {\n                super(editMode, merge(RowEditToolbar.defaultOptions, (editMode.options.toolbars || {}).row, {\n                    menu: {\n                        items: RowEditToolbar.getMenuItemsConfig(editMode.options, editMode.iconsURLPrefix)\n                    }\n                }));\n                this.menu.initItems({});\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            refreshOutline(x, y) {\n                const toolbar = this, offsetWidth = 2;\n                if (toolbar.row && toolbar.row.container) {\n                    super.refreshOutline(x, y, this.row, offsetWidth);\n                }\n            }\n            showToolbar(row) {\n                const toolbar = this;\n                const rowCnt = row.container;\n                const rowToolbar = toolbar.editMode.rowToolbar;\n                let x;\n                let y;\n                let offsetX;\n                if (!rowToolbar) {\n                    return;\n                }\n                if (rowCnt &&\n                    toolbar.editMode.isActive() &&\n                    !(toolbar.editMode.dragDrop || {}).isActive) {\n                    const rowOffsets = GUIElement.getOffsets(row, toolbar.editMode.board.container);\n                    const rowWidth = rowOffsets.right - rowOffsets.left;\n                    // Temp - activate all items.\n                    objectEach(toolbar.menu.items, (item) => {\n                        item.activate();\n                    });\n                    offsetX = rowWidth / 2 - toolbar.container.clientWidth / 2;\n                    x = rowOffsets.left + offsetX;\n                    y = rowOffsets.top - toolbar.container.clientHeight;\n                    toolbar.setPosition(x, y);\n                    toolbar.row = row;\n                    toolbar.refreshOutline(-offsetX, toolbar.container.clientHeight);\n                    rowToolbar.isVisible = true;\n                }\n                else if (toolbar.isVisible) {\n                    toolbar.hide();\n                    rowToolbar.isVisible = false;\n                }\n            }\n            onRowOptions() {\n                const toolbar = this;\n                if (toolbar.editMode.sidebar) {\n                    toolbar.editMode.sidebar.show(toolbar.row);\n                    /// toolbar.editMode.sidebar.updateTitle('ROW OPTIONS');\n                    // @ToDo - mask is buggy - should be refactored or removed.\n                    // if (this.row) {\n                    //     super.maskNotEditedElements(\n                    //         this.row,\n                    //         true\n                    //     );\n                    //     this.editedRow = this.row;\n                    // }\n                }\n            }\n            onRowDestroy() {\n                const toolbar = this;\n                if (toolbar.row) {\n                    const rowId = toolbar.row.options.id || -1;\n                    this.resetEditedRow();\n                    toolbar.row.destroy();\n                    toolbar.row = void 0;\n                    // Hide row and cell toolbars.\n                    toolbar.editMode.hideToolbars(['cell', 'row']);\n                    fireEvent(toolbar.editMode, 'layoutChanged', {\n                        type: 'rowDestroyed',\n                        target: rowId,\n                        board: toolbar.editMode.board\n                    });\n                }\n            }\n            resetEditedRow() {\n                /// super.resetCurrentElements(this.row as Row, true);\n                this.editedRow = void 0;\n            }\n        }\n        /* *\n         *\n         *  Static Properties\n         *\n         * */\n        RowEditToolbar.defaultOptions = {\n            enabled: true,\n            className: EditGlobals.classNames.editToolbar,\n            outline: true,\n            outlineClassName: EditGlobals.classNames.editToolbarRowOutline,\n            menu: {\n                className: EditGlobals.classNames.editToolbarRow,\n                itemsClassName: EditGlobals.classNames.editToolbarItem,\n                items: []\n            }\n        };\n\n        return RowEditToolbar;\n    });\n    _registerModule(_modules, 'Shared/BaseForm.js', [_modules['Core/Renderer/HTML/AST.js'], _modules['Core/Utilities.js']], function (AST, U) {\n        /* *\n         *\n         *  (c) 2009-2024 Highsoft AS\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        /* *\n         *\n         *  Imports\n         *\n         * */\n        const { addEvent, createElement } = U;\n        /* *\n         *\n         *  Class\n         *\n         * */\n        class BaseForm {\n            /* *\n             *\n             *  Constructor\n             *\n             * */\n            constructor(parentDiv, iconsURL) {\n                this.iconsURL = iconsURL;\n                this.container = this.createPopupContainer(parentDiv);\n                this.closeButton = this.addCloseButton();\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * Create popup div container.\n             *\n             * @param {HTMLElement} parentDiv\n             * Parent div to attach popup.\n             *\n             * @param  {string} className\n             * Class name of the popup.\n             *\n             * @return {HTMLElement}\n             * Popup div.\n             */\n            createPopupContainer(parentDiv, className = 'highcharts-popup highcharts-no-tooltip') {\n                return createElement('div', { className }, void 0, parentDiv);\n            }\n            /**\n             * Create HTML element and attach click event to close popup.\n             *\n             * @param {string} className\n             * Class name of the close button.\n             *\n             * @return {HTMLElement}\n             * Close button.\n             */\n            addCloseButton(className = 'highcharts-popup-close') {\n                const popup = this, iconsURL = this.iconsURL;\n                // Create close popup button.\n                const closeButton = createElement('button', { className }, void 0, this.container);\n                closeButton.style['background-image'] = 'url(' +\n                    (iconsURL.match(/png|svg|jpeg|jpg|gif/ig) ?\n                        iconsURL : iconsURL + 'close.svg') + ')';\n                ['click', 'touchstart'].forEach((eventName) => {\n                    addEvent(closeButton, eventName, popup.closeButtonEvents.bind(popup));\n                });\n                // Close popup when press ESC\n                addEvent(document, 'keydown', function (event) {\n                    if (event.code === 'Escape') {\n                        popup.closeButtonEvents();\n                    }\n                });\n                return closeButton;\n            }\n            /**\n             * Close button events.\n             * @return {void}\n             */\n            closeButtonEvents() {\n                this.closePopup();\n            }\n            /**\n             * Reset content of the current popup and show.\n             *\n             * @param {string} toolbarClass\n             * Class name of the toolbar which styles should be reset.\n             */\n            showPopup(toolbarClass = 'highcharts-annotation-toolbar') {\n                const popupDiv = this.container, popupCloseButton = this.closeButton;\n                this.type = void 0;\n                // Reset content.\n                popupDiv.innerHTML = AST.emptyHTML;\n                // Reset toolbar styles if exists.\n                if (popupDiv.className.indexOf(toolbarClass) >= 0) {\n                    popupDiv.classList.remove(toolbarClass);\n                    // Reset toolbar inline styles\n                    popupDiv.removeAttribute('style');\n                }\n                // Add close button.\n                popupDiv.appendChild(popupCloseButton);\n                popupDiv.style.display = 'block';\n                popupDiv.style.height = '';\n            }\n            /**\n             * Hide popup.\n             */\n            closePopup() {\n                this.container.style.display = 'none';\n            }\n        }\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return BaseForm;\n    });\n    _registerModule(_modules, 'Dashboards/EditMode/ConfirmationPopup.js', [_modules['Core/Utilities.js'], _modules['Shared/BaseForm.js'], _modules['Dashboards/EditMode/EditGlobals.js'], _modules['Dashboards/EditMode/EditRenderer.js']], function (U, BaseForm, EditGlobals, EditRenderer) {\n        /* *\n         *\n         *  (c) 2009-2024 Highsoft AS\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         *  Authors:\n         *  - Sebastian Bochan\n         *  - Wojciech Chmiel\n         *  - GÃ¸ran Slettemark\n         *  - Sophie Bremer\n         *\n         * */\n        const { createElement } = U;\n        /**\n         * Class to create confirmation popup.\n         */\n        class ConfirmationPopup extends BaseForm {\n            /* *\n            *\n            *  Static Properties\n            *\n            * */\n            /* *\n            *\n            *  Constructor\n            *\n            * */\n            /**\n             * Constructs an instance of the ConfirmationPopup.\n             *\n             * @param parentDiv\n             * Parent div where the popup will be added.\n             *\n             * @param iconsURL\n             * URL to the icons.\n             *\n             * @param editMode\n             * The EditMode instance.\n             *\n             * @param options\n             * Options for confirmation popup.\n             */\n            constructor(parentDiv, iconsURL, editMode, options) {\n                iconsURL =\n                    options && options.close && options.close.icon ?\n                        options.close.icon :\n                        iconsURL;\n                super(parentDiv, iconsURL);\n                this.editMode = editMode;\n                this.options = options;\n            }\n            /* *\n            *\n            *  Functions\n            *\n            * */\n            /**\n             * Returns popup container.\n             *\n             * @param parentDiv\n             * Parent div where the popup will be added.\n             *\n             * @param className\n             * Class name added to the popup container.\n             */\n            createPopupContainer(parentDiv, className = EditGlobals.classNames.confirmationPopup) {\n                return super.createPopupContainer(parentDiv, className);\n            }\n            /**\n             * Adds close button to the popup.\n             *\n             * @param className\n             * Class name added to the close button.\n             */\n            addCloseButton(className = EditGlobals.classNames.popupCloseButton) {\n                return super.addCloseButton(className);\n            }\n            /**\n             * Adds events to the close button.\n             *\n             * @override BaseForm.closeButtonEvents\n             */\n            closeButtonEvents() {\n                const cancelCallback = this.contentOptions?.cancelButton.callback;\n                if (!cancelCallback) {\n                    return;\n                }\n                cancelCallback();\n            }\n            /**\n             * Adds content inside the popup.\n             */\n            renderContent() {\n                const options = this.contentOptions;\n                if (!options) {\n                    return;\n                }\n                // Render content wrapper\n                this.contentContainer = createElement('div', {\n                    className: EditGlobals.classNames.popupContentContainer\n                }, {}, this.container);\n                const popupContainer = this.contentContainer.parentNode;\n                popupContainer.style.marginTop = '0px';\n                const offsetTop = popupContainer.getBoundingClientRect().top;\n                popupContainer.style.marginTop = (offsetTop < 0 ? Math.abs(offsetTop - 200) : 200) + 'px';\n                // Render text\n                EditRenderer.renderText(this.contentContainer, {\n                    title: options.text || ''\n                });\n                // Render button wrapper\n                this.buttonContainer = createElement('div', {\n                    className: EditGlobals.classNames.popupButtonContainer\n                }, {}, this.container);\n                // Render cancel buttons\n                EditRenderer.renderButton(this.buttonContainer, {\n                    text: options.cancelButton.value,\n                    className: EditGlobals.classNames.popupCancelBtn,\n                    callback: options.cancelButton.callback\n                });\n                // Confirm\n                EditRenderer.renderButton(this.buttonContainer, {\n                    text: options.confirmButton.value,\n                    className: EditGlobals.classNames.popupConfirmBtn,\n                    callback: () => {\n                        options.confirmButton.callback.call(options.confirmButton.context);\n                        this.closePopup();\n                    }\n                });\n            }\n            /**\n             * Shows confirmation popup.\n             *\n             * @param options\n             * Options for confirmation popup.\n             */\n            show(options) {\n                this.contentOptions = options;\n                this.showPopup();\n                this.renderContent();\n                this.editMode.setEditOverlay();\n            }\n            /**\n             * Hides confirmation popup.\n             */\n            closePopup() {\n                super.closePopup();\n                this.editMode.setEditOverlay(true);\n            }\n        }\n\n        return ConfirmationPopup;\n    });\n    _registerModule(_modules, 'Dashboards/EditMode/AccordionMenu.js', [_modules['Dashboards/EditMode/EditRenderer.js'], _modules['Core/Utilities.js'], _modules['Dashboards/EditMode/EditGlobals.js'], _modules['Dashboards/EditMode/ConfirmationPopup.js']], function (EditRenderer, U, EditGlobals, ConfirmationPopup) {\n        /* *\n         *\n         *  (c) 2009-2024 Highsoft AS\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         *  Authors:\n         *  - Pawel Lysy\n         *  - Sebastian Bochan\n         *\n         * */\n        const { createElement, merge, error, fireEvent } = U;\n        /* *\n         *\n         *  Class\n         *\n         * */\n        /**\n         * Accordion menu class.\n         */\n        class AccordionMenu {\n            /* *\n             *\n             *  Constructor\n             *\n             * */\n            constructor(iconsURLPrefix, closeSidebar) {\n                this.changedOptions = {};\n                this.chartOptionsJSON = {};\n                this.oldOptionsBuffer = {};\n                this.waitingForConfirmation = false;\n                this.iconsURLPrefix = iconsURLPrefix;\n                this.closeSidebar = closeSidebar;\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * Renders the menu for given component.\n             *\n             * @param container\n             * The HTML Element to render the menu in.\n             *\n             * @param component\n             * The component to render the menu for.\n             */\n            renderContent(container, component) {\n                const { editMode } = component.board;\n                const menu = this;\n                const editableOptions = component.editableOptions.getOptions();\n                let options;\n                let content;\n                this.component = component;\n                this.oldOptionsBuffer = merge({}, component.options);\n                if (editMode) {\n                    this.confirmationPopup = new ConfirmationPopup(component.board.container, editMode.iconsURLPrefix, editMode, { close: { icon: '' } });\n                }\n                const accordionContainer = createElement('div', {\n                    className: EditGlobals.classNames.accordionMenu\n                }, {}, container);\n                for (let i = 0, end = editableOptions.length; i < end; i++) {\n                    options = editableOptions[i];\n                    content = EditRenderer.renderCollapseHeader(accordionContainer, merge({\n                        iconsURLPrefix: menu.iconsURLPrefix,\n                        lang: (component.board?.editMode || EditGlobals).lang\n                    }, options)).content;\n                    this.renderAccordion(options, content, component);\n                }\n                const buttonContainer = createElement('div', {\n                    className: EditGlobals.classNames.accordionMenuButtonsContainer\n                }, {}, accordionContainer);\n                EditRenderer.renderButton(buttonContainer, {\n                    text: (component.board?.editMode || EditGlobals)\n                        .lang.confirmButton,\n                    className: EditGlobals.classNames.popupConfirmBtn,\n                    callback: async () => {\n                        await this.confirmChanges();\n                    }\n                });\n                EditRenderer.renderButton(buttonContainer, {\n                    text: (component.board?.editMode || EditGlobals)\n                        .lang.cancelButton,\n                    className: EditGlobals.classNames.popupCancelBtn,\n                    callback: () => {\n                        this.cancelChanges();\n                    }\n                });\n            }\n            /**\n             * Update the options object with new nested value, based on the property\n             * path. If the objects in the path are not defined, the function will\n             * create them.\n             *\n             * @param propertyPath\n             * Path of the property for which the value should be updated.\n             * Example: ```['chartOptions', 'chart', 'type']```\n             *\n             * @param value\n             * New value of the property.\n             */\n            updateOptions(propertyPath, value) {\n                const pathLength = propertyPath.length - 1;\n                let currentLevel = this.changedOptions;\n                let currentChartOptionsLevel;\n                let currentOldChartOptionsBufferLevel;\n                if (pathLength === 0 && propertyPath[0] === 'chartOptions') {\n                    try {\n                        const parsedValue = JSON.parse(value);\n                        this.chartOptionsJSON = parsedValue;\n                    }\n                    catch (e) {\n                        // TODO: Handle the wrong config passed from the user.\n                        error(`Dashboards Error: Wrong JSON config structure passed as a chart options. \\n____________\\n${e}`);\n                    }\n                }\n                for (let i = 0; i < pathLength; i++) {\n                    const key = propertyPath[i];\n                    if (!currentLevel[key]) {\n                        currentLevel[key] = {};\n                    }\n                    currentLevel = currentLevel[key];\n                    if (key === 'chartOptions') {\n                        const realChartOptions = this.component.chart?.options;\n                        if (realChartOptions) {\n                            const oldOptionsBuffer = this.oldOptionsBuffer;\n                            if (!oldOptionsBuffer.chartOptions) {\n                                oldOptionsBuffer.chartOptions = {};\n                            }\n                            currentOldChartOptionsBufferLevel =\n                                oldOptionsBuffer.chartOptions;\n                            currentChartOptionsLevel = realChartOptions;\n                        }\n                    }\n                    else if (currentChartOptionsLevel &&\n                        currentOldChartOptionsBufferLevel) {\n                        currentChartOptionsLevel = currentChartOptionsLevel[key];\n                        if (currentOldChartOptionsBufferLevel[key] === void 0) {\n                            currentOldChartOptionsBufferLevel[key] = {};\n                        }\n                        currentOldChartOptionsBufferLevel =\n                            currentOldChartOptionsBufferLevel[key];\n                    }\n                }\n                const lastKey = propertyPath[pathLength];\n                currentLevel[lastKey] = value;\n                if (currentOldChartOptionsBufferLevel && currentChartOptionsLevel) {\n                    currentOldChartOptionsBufferLevel[lastKey] = (currentOldChartOptionsBufferLevel[lastKey] ??\n                        currentChartOptionsLevel[lastKey]);\n                }\n                // eslint-disable-next-line @typescript-eslint/no-floating-promises\n                this.component?.update(this.changedOptions);\n            }\n            /**\n             * Renders either a basic or nested element. This function can be\n             * recursively called, if there are multiple nested options.\n             *\n             * @param options\n             * Configuration object of the Component options.\n             *\n             * @param parentNode\n             * A container where the accordion is rendered.\n             *\n             * @param component\n             * the component for which the menu should be rendered.\n             */\n            renderAccordion(options, parentNode, component) {\n                if (options.type === 'nested') {\n                    return this.renderNested(parentNode, options, component);\n                }\n                const renderFunction = EditRenderer.getRendererFunction(options.type);\n                if (!renderFunction) {\n                    return;\n                }\n                renderFunction(parentNode, {\n                    ...options,\n                    iconsURLPrefix: this.iconsURLPrefix,\n                    value: component.getEditableOptionValue(options.propertyPath),\n                    onchange: (value) => this.updateOptions(options.propertyPath || [], value)\n                });\n            }\n            /**\n             * Render nested menu for the component.\n             *\n             * @param parentElement\n             * HTML element to which the nested structure should be rendered to\n             *\n             * @param options\n             * configuration object for the options\n             *\n             * @param component\n             * The component instance for the options should be rendered\n             */\n            renderNested(parentElement, options, component) {\n                if (!parentElement || !options.nestedOptions) {\n                    return;\n                }\n                const nestedOptions = options.nestedOptions;\n                for (let i = 0, iEnd = nestedOptions.length; i < iEnd; ++i) {\n                    const name = nestedOptions[i].name;\n                    const accordionOptions = nestedOptions[i].options;\n                    const showToggle = !!nestedOptions[i].showToggle;\n                    const propertyPath = nestedOptions[i].propertyPath || [];\n                    const collapsedHeader = EditRenderer.renderCollapseHeader(parentElement, {\n                        name,\n                        isEnabled: !!component.getEditableOptionValue(propertyPath),\n                        iconsURLPrefix: this.iconsURLPrefix,\n                        showToggle: showToggle,\n                        onchange: (value) => this.updateOptions(propertyPath, value),\n                        isNested: true,\n                        lang: (component.board?.editMode || EditGlobals).lang\n                    });\n                    for (let j = 0, jEnd = accordionOptions.length; j < jEnd; ++j) {\n                        this.renderAccordion(accordionOptions[j], collapsedHeader.content, component);\n                    }\n                }\n                return;\n            }\n            /**\n             * Closes the sidebar discarding changes. If there are any changes, it will\n             * show a confirmation popup. If no changes, it will close the sidebar.\n             */\n            cancelChanges() {\n                if (Object.keys(this.changedOptions).length < 1) {\n                    this.closeSidebar();\n                }\n                else {\n                    this.showCancelConfirmationPopup();\n                }\n            }\n            /**\n             * Confirms changes made in the component.\n             *\n             * @fires EditMode#componentChanged\n             */\n            async confirmChanges() {\n                const component = this.component;\n                if (!component) {\n                    return;\n                }\n                if (component.type === 'Highcharts' &&\n                    Object.keys(this.chartOptionsJSON).length) {\n                    await component.update({\n                        chartOptions: this.chartOptionsJSON\n                    });\n                }\n                fireEvent(component.board.editMode, 'componentChanged', {\n                    target: component,\n                    changedOptions: merge({}, this.changedOptions),\n                    oldOptions: merge({}, this.oldOptionsBuffer)\n                });\n                this.changedOptions = {};\n                this.chartOptionsJSON = {};\n                this.closeSidebar();\n            }\n            /**\n             * Discards changes made in the component.\n             *\n             * @fires EditMode#componentChangesDiscarded\n             */\n            async discardChanges() {\n                const component = this.component;\n                if (!component) {\n                    return;\n                }\n                await component.update(this.oldOptionsBuffer);\n                fireEvent(component.board.editMode, 'componentChangesDiscarded', {\n                    target: component,\n                    changedOptions: merge({}, this.changedOptions),\n                    oldOptions: merge({}, this.oldOptionsBuffer)\n                });\n                this.changedOptions = {};\n                this.chartOptionsJSON = {};\n            }\n            /**\n             * Shows a confirmation popup when the user tries to discard changes.\n             */\n            showCancelConfirmationPopup() {\n                const popup = this.confirmationPopup;\n                const editMode = this.component?.board?.editMode;\n                if (!popup || !editMode || this.waitingForConfirmation) {\n                    return;\n                }\n                this.waitingForConfirmation = true;\n                popup.show({\n                    text: editMode.lang.confirmDiscardChanges,\n                    confirmButton: {\n                        value: editMode.lang.confirmButton,\n                        callback: async () => {\n                            await this.discardChanges();\n                            this.waitingForConfirmation = false;\n                            this.closeSidebar();\n                        },\n                        context: this\n                    },\n                    cancelButton: {\n                        value: editMode.lang.cancelButton,\n                        callback: () => {\n                            popup.closePopup();\n                            editMode.setEditOverlay();\n                            setTimeout(() => {\n                                this.waitingForConfirmation = false;\n                            }, 100);\n                        }\n                    }\n                });\n            }\n        }\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return AccordionMenu;\n    });\n    _registerModule(_modules, 'Dashboards/EditMode/SidebarPopup.js', [_modules['Dashboards/Layout/CellHTML.js'], _modules['Dashboards/EditMode/AccordionMenu.js'], _modules['Shared/BaseForm.js'], _modules['Dashboards/Actions/Bindings.js'], _modules['Dashboards/Layout/Cell.js'], _modules['Dashboards/EditMode/EditGlobals.js'], _modules['Dashboards/EditMode/EditRenderer.js'], _modules['Dashboards/Layout/GUIElement.js'], _modules['Dashboards/Layout/Layout.js'], _modules['Core/Utilities.js']], function (CellHTML, AccordionMenu, BaseForm, Bindings, Cell, EditGlobals, EditRenderer, GUIElement, Layout, U) {\n        /* *\n         *\n         *  (c) 2009-2024 Highsoft AS\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         *  Authors:\n         *  Pawel Lysy\n         *\n         * */\n        const { addEvent, createElement, fireEvent, merge } = U;\n        /* *\n         *\n         *  Class\n         *\n         * */\n        /**\n         * Class which creates the sidebar and handles its behavior.\n         *\n         * @internal\n         */\n        class SidebarPopup extends BaseForm {\n            /* *\n             *\n             *  Constructor\n             *\n             * */\n            /**\n             * Constructor of the SidebarPopup class.\n             *\n             * @param parentDiv\n             * Element to which the sidebar will be appended.\n             *\n             * @param iconsURL\n             * URL to the icons.\n             *\n             * @param editMode\n             * Instance of EditMode.\n             */\n            constructor(parentDiv, iconsURL, editMode) {\n                super(parentDiv, iconsURL);\n                /**\n                 * Options used in the sidebar.\n                 */\n                this.options = {\n                    components: ['HTML', 'layout', 'Highcharts', 'DataGrid', 'KPI']\n                };\n                /**\n                 * Whether the sidebar is visible.\n                 */\n                this.isVisible = false;\n                /**\n                 * List of components that can be added to the board.\n                 */\n                this.componentsList = [];\n                this.editMode = editMode;\n                this.options = merge(this.options, editMode.options.toolbars?.sidebar || {});\n                this.componentsList = this.getComponentsList(this.options.components || []);\n                this.accordionMenu = new AccordionMenu(this.iconsURL, this.hide.bind(this));\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * Function to detect on which side of the screen should the sidebar be.\n             *\n             * @param context\n             * The cell or row which is the context of the sidebar.\n             *\n             * @returns\n             * Whether the sidebar should be on the right side of the screen.\n             */\n            detectRightSidebar(context) {\n                const editMode = this.editMode;\n                const layoutWrapper = editMode.customHTMLMode ?\n                    editMode.board.container : editMode.board.layoutsWrapper;\n                if (!layoutWrapper) {\n                    return false;\n                }\n                return GUIElement.getOffsets(context, layoutWrapper).left < ((layoutWrapper.offsetWidth / 2) - 10); // 10 = snap\n            }\n            /**\n             * Function to remove the class names from the sidebar.\n             */\n            removeClassNames() {\n                const classNames = EditGlobals.classNames, classList = this.container.classList;\n                classList.remove(classNames.editSidebarShow);\n                classList.remove(classNames.editSidebarRightShow);\n            }\n            /**\n             * Function to add the class names to the sidebar depending on the position\n             * of the sidebar.\n             *\n             * @param isRightSidebar\n             * Whether the sidebar should be on the right side of the screen.\n             */\n            addClassNames(isRightSidebar) {\n                const classList = this.container.classList;\n                if (isRightSidebar) {\n                    classList.add(EditGlobals.classNames.editSidebarRight);\n                }\n                else {\n                    classList.remove(EditGlobals.classNames.editSidebarRight);\n                }\n                setTimeout(() => {\n                    classList.add(EditGlobals.classNames[isRightSidebar ? 'editSidebarRightShow' : 'editSidebarShow']);\n                });\n            }\n            /**\n             * Function to show the sidebar.\n             *\n             * @param context\n             * The cell or row which is the context of the sidebar.\n             */\n            show(context) {\n                const editMode = this.editMode, isRightSidebar = !!(context && this.detectRightSidebar(context));\n                this.showPopup(EditGlobals.classNames.editSidebarShow);\n                this.addClassNames(isRightSidebar);\n                if (editMode.resizer) {\n                    editMode.resizer.disableResizer();\n                }\n                // Remove highlight from the row.\n                if (editMode.editCellContext instanceof Cell &&\n                    editMode.editCellContext.row) {\n                    editMode.editCellContext.row.setHighlight();\n                }\n                editMode.hideToolbars(['cell', 'row']);\n                editMode.stopContextDetection();\n                this.isVisible = true;\n                this.generateContent(context);\n            }\n            generateContent(context) {\n                // Title\n                this.renderHeader(context ?\n                    this.editMode.lang.settings :\n                    this.editMode.lang.addComponent, '');\n                if (!context) {\n                    this.renderAddComponentsList();\n                    return;\n                }\n                this.type = context.getType();\n                if (this.type === 'cell-html' || this.type === 'cell') {\n                    const component = context.mountedComponent;\n                    if (!component) {\n                        return;\n                    }\n                    this.accordionMenu.renderContent(this.container, component);\n                }\n            }\n            renderAddComponentsList() {\n                const sidebar = this;\n                const components = this.componentsList;\n                let gridElement;\n                const gridWrapper = createElement('div', {\n                    className: EditGlobals.classNames.editGridItems\n                }, {}, sidebar.container);\n                for (let i = 0, iEnd = components.length; i < iEnd; ++i) {\n                    gridElement = createElement('div', {}, {}, gridWrapper);\n                    // Drag drop new component.\n                    gridElement.addEventListener('mousedown', (e) => {\n                        if (sidebar.editMode.dragDrop) {\n                            // Workaround for Firefox, where mouseleave is not triggered\n                            // correctly when dragging.\n                            const onMouseMove = (event) => {\n                                const rect = sidebar.container.getBoundingClientRect();\n                                if (event.clientX < rect.left ||\n                                    event.clientX > rect.right ||\n                                    event.clientY < rect.top ||\n                                    event.clientY > rect.bottom) {\n                                    sidebar.hide();\n                                    document.removeEventListener('mousemove', onMouseMove);\n                                }\n                            };\n                            // Clean up event listeners\n                            const onMouseUp = () => {\n                                document.removeEventListener('mousemove', onMouseMove);\n                                document.removeEventListener('mouseup', onMouseUp);\n                            };\n                            // Add event listeners\n                            document.addEventListener('mousemove', onMouseMove);\n                            document.addEventListener('mouseup', onMouseUp);\n                            sidebar.editMode.dragDrop.onDragStart(e, void 0, (dropContext) => {\n                                // Add component if there is no layout yet.\n                                if (this.editMode.board.layouts.length === 0) {\n                                    const board = this.editMode.board, newLayoutId = GUIElement.getElementId('layout'), layout = new Layout(board, {\n                                        id: newLayoutId,\n                                        copyId: '',\n                                        parentContainerId: board.container.id,\n                                        rows: [{}],\n                                        style: {}\n                                    });\n                                    if (layout) {\n                                        board.layouts.push(layout);\n                                    }\n                                    dropContext = layout.rows[0];\n                                }\n                                const newCell = components[i].onDrop(sidebar, dropContext);\n                                if (newCell) {\n                                    sidebar.editMode.setEditCellContext(newCell);\n                                    sidebar.show(newCell);\n                                    newCell.setHighlight();\n                                }\n                                // Clean up event listener after drop is complete\n                                document.removeEventListener('mousemove', onMouseMove);\n                            });\n                        }\n                    });\n                    gridElement.innerHTML = components[i].text;\n                }\n                return;\n            }\n            onDropNewComponent(dropContext, componentOptions) {\n                const sidebar = this, dragDrop = sidebar.editMode.dragDrop;\n                if (dragDrop) {\n                    const row = (dropContext.getType() === 'cell' ?\n                        dropContext.row :\n                        dropContext), newCell = row.addCell({\n                        id: GUIElement.getElementId('col')\n                    });\n                    dragDrop.onCellDragEnd(newCell);\n                    const options = merge(componentOptions, {\n                        cell: newCell.id\n                    });\n                    const componentPromise = Bindings.addComponent(options, sidebar.editMode.board, newCell);\n                    sidebar.editMode.setEditOverlay();\n                    void (async () => {\n                        const component = await componentPromise;\n                        if (!component) {\n                            return;\n                        }\n                        fireEvent(this.editMode, 'layoutChanged', {\n                            type: 'newComponent',\n                            target: component\n                        });\n                    })();\n                    return newCell;\n                }\n            }\n            /**\n             * Function to hide the sidebar.\n             */\n            hide() {\n                const editMode = this.editMode;\n                const editCellContext = editMode.editCellContext;\n                this.removeClassNames();\n                this.container.style.display = 'none';\n                // Remove edit overlay if active.\n                if (editMode.isEditOverlayActive) {\n                    editMode.setEditOverlay(true);\n                }\n                if (editCellContext instanceof Cell && editCellContext.row) {\n                    editMode.showToolbars(['cell', 'row'], editCellContext);\n                    editCellContext.row.setHighlight();\n                    editCellContext.setHighlight(true);\n                }\n                else if (editCellContext instanceof CellHTML && editMode.cellToolbar) {\n                    editMode.cellToolbar.showToolbar(editCellContext);\n                    editCellContext.setHighlight();\n                }\n                editMode.isContextDetectionActive = true;\n                this.isVisible = false;\n            }\n            /**\n             * Function called when the close button is pressed.\n             *\n             * @override BaseForm.closeButtonEvents\n             */\n            closeButtonEvents() {\n                if (this.type === 'cell' || this.type === 'cell-html') {\n                    this.accordionMenu.cancelChanges();\n                }\n                else {\n                    this.hide();\n                }\n            }\n            renderHeader(title, iconURL) {\n                const icon = EditRenderer.renderIcon(this.container, {\n                    icon: iconURL,\n                    className: EditGlobals.classNames.editSidebarTitle\n                });\n                if (icon) {\n                    icon.textContent = title;\n                }\n            }\n            /**\n             * Based on the provided components list, it returns the list of components\n             * with its names and functions that are called when the component is\n             * dropped.\n             *\n             * @param components\n             * List of components that can be added to the board.\n             */\n            getComponentsList(components) {\n                const sidebar = this, editMode = sidebar.editMode, componentTypes = editMode.board.componentTypes, componentList = [];\n                components.forEach((componentName) => {\n                    const component = componentTypes[componentName];\n                    if (component) {\n                        componentList.push({\n                            text: editMode.lang?.sidebar[componentName] ||\n                                component.name,\n                            onDrop: function (sidebar, dropContext) {\n                                const options = component.prototype.getOptionsOnDrop(sidebar);\n                                if (options) {\n                                    return sidebar.onDropNewComponent(dropContext, options);\n                                }\n                            }\n                        });\n                    }\n                    else if (componentName === 'layout') {\n                        componentList.push(SidebarPopup.addLayout);\n                    }\n                });\n                return componentList;\n            }\n            /**\n             * Function to create and add the close button to the sidebar.\n             *\n             * @param className\n             * Class name of the close button.\n             * @returns Close button element\n             */\n            addCloseButton(className = EditGlobals.classNames.popupCloseButton) {\n                // Close popup when click outside the popup\n                addEvent(document, 'click', (event) => {\n                    event.stopPropagation();\n                    if (this.container.style.display === 'block' &&\n                        !this.container.contains(event.target) &&\n                        this.container.classList.value.includes('show')) {\n                        if (this.type === 'cell' || this.type === 'cell-html') {\n                            this.accordionMenu.cancelChanges();\n                        }\n                        else {\n                            this.hide();\n                        }\n                    }\n                });\n                return super.addCloseButton.call(this, className);\n            }\n            /**\n             * Function that creates the container of the sidebar.\n             *\n             * @param parentDiv\n             * The parent div to which the sidebar will be appended.\n             * @param className\n             * Class name of the sidebar.\n             * @returns The container of the sidebar.\n             */\n            createPopupContainer(parentDiv, className = EditGlobals.classNames.editSidebar) {\n                return super.createPopupContainer.call(this, parentDiv, className);\n            }\n        }\n        SidebarPopup.addLayout = {\n            text: 'layout',\n            onDrop: function (sidebar, dropContext) {\n                if (!dropContext) {\n                    return;\n                }\n                const row = (dropContext.getType() === 'cell' ?\n                    dropContext.row :\n                    dropContext), board = row.layout.board, newLayoutId = GUIElement.getElementId('layout'), cellId = GUIElement.getElementId('cell'), layout = new Layout(board, {\n                    id: newLayoutId,\n                    copyId: '',\n                    parentContainerId: board.container.id,\n                    rows: [{\n                            cells: [{\n                                    id: cellId\n                                }]\n                        }],\n                    style: {}\n                });\n                if (layout) {\n                    board.layouts.push(layout);\n                    fireEvent(board.editMode, 'layoutChanged', {\n                        type: 'newLayout',\n                        target: layout,\n                        board\n                    });\n                }\n                void Bindings.addComponent({\n                    type: 'HTML',\n                    cell: cellId,\n                    elements: [\n                        {\n                            tagName: 'div',\n                            textContent: 'Placeholder text'\n                        }\n                    ]\n                }, board);\n            }\n        };\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return SidebarPopup;\n    });\n    _registerModule(_modules, 'Dashboards/EditMode/EditContextMenu.js', [_modules['Dashboards/EditMode/EditGlobals.js'], _modules['Core/Utilities.js'], _modules['Dashboards/EditMode/Menu/Menu.js']], function (EditGlobals, U, Menu) {\n        /* *\n         *\n         *  (c) 2009-2024 Highsoft AS\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         *  Authors:\n         *  - Sebastian Bochan\n         *  - Wojciech Chmiel\n         *  - GÃ¸ran Slettemark\n         *  - Sophie Bremer\n         *\n         * */\n        const { addEvent, merge } = U;\n        /**\n         * Class to create context menu.\n         * @internal\n         */\n        class EditContextMenu extends Menu {\n            /* *\n             *\n             *  Constructor\n             *\n             * */\n            constructor(parentElement, options, editMode) {\n                super(editMode.board.container, merge(EditContextMenu.defaultOptions, options || {}), editMode);\n                this.editMode = editMode;\n                this.options = merge(EditContextMenu.defaultOptions, options || {});\n                // Move it in the DOM after the edit tools so it is better accessible.\n                this.editMode.board.layoutsWrapper?.parentNode.insertBefore(this.container, this.editMode.board.layoutsWrapper);\n                // Set the context menu container width.\n                this.container.style.width = this.options.width + 'px';\n                super.initItems(EditContextMenu.items);\n                if (this.options.items) {\n                    const items = [];\n                    for (let i = 0, iEnd = this.options.items.length; i < iEnd; ++i) {\n                        if (typeof this.options.items[i] === 'string') {\n                            items.push(this.options.items[i]);\n                        }\n                        else if (this.options.items[i].id) {\n                            items.push(this.options.items[i].id);\n                        }\n                    }\n                    this.setActiveItems(items);\n                }\n                this.initEvents();\n            }\n            /* *\n            *\n            *  Functions\n            *\n            * */\n            initEvents() {\n                const contextMenu = this;\n                // Click on document close the context menu\n                // TODO refactor\n                addEvent(document, 'click', (event) => {\n                    if (event.target !== this.container &&\n                        event.target !==\n                            contextMenu.editMode.tools.contextButtonElement &&\n                        !event.target.classList\n                            .contains(EditGlobals.classNames.toggleSlider) &&\n                        event.target.tagName !== 'INPUT' &&\n                        this.isVisible) {\n                        this.setVisible(false);\n                    }\n                });\n            }\n            setVisible(visible) {\n                const contextMenu = this, contextButtonElement = contextMenu.editMode.tools.contextButtonElement;\n                if (contextMenu.container && contextButtonElement) {\n                    if (visible) {\n                        contextMenu.container.style.display = 'block';\n                        contextMenu.isVisible = true;\n                        contextButtonElement.setAttribute('aria-expanded', 'true');\n                    }\n                    else {\n                        contextMenu.container.style.display = 'none';\n                        contextMenu.isVisible = false;\n                        contextButtonElement.setAttribute('aria-expanded', 'false');\n                    }\n                }\n            }\n            updatePosition(ctxButton, x, y) {\n                const contextMenu = this, width = contextMenu.options.width || 0, left = (ctxButton ?\n                    ctxButton.offsetLeft - width + ctxButton.offsetWidth :\n                    x), top = ctxButton ? ctxButton.offsetTop + ctxButton.offsetHeight : y;\n                if (left && top) {\n                    contextMenu.container.style.left = left + 'px';\n                    contextMenu.container.style.top = top + 'px';\n                }\n            }\n        }\n        /* *\n        *\n        *  Static Properties\n        *\n        * */\n        EditContextMenu.defaultOptions = {\n            enabled: true,\n            width: 150,\n            className: EditGlobals.classNames.contextMenu,\n            itemsClassName: EditGlobals.classNames.contextMenuItem,\n            items: ['editMode']\n        };\n        /**\n         * Default Context menu items.\n         */\n        EditContextMenu.items = merge(Menu.items, {\n            editMode: {\n                id: 'editMode',\n                type: 'toggle',\n                getValue: function (item) {\n                    return item.menu.editMode.isActive();\n                },\n                langKey: 'editMode',\n                events: {\n                    click: function () {\n                        this.menu.editMode.toggleEditMode();\n                    }\n                }\n            }\n        });\n\n        return EditContextMenu;\n    });\n    _registerModule(_modules, 'Dashboards/Actions/ContextDetection.js', [_modules['Dashboards/Layout/GUIElement.js'], _modules['Core/Utilities.js']], function (GUIElement, U) {\n        /* *\n         *\n         *  (c) 2009-2024 Highsoft AS\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         *  Authors:\n         *  - Sebastian Bochan\n         *  - Wojciech Chmiel\n         *  - GÃ¸ran Slettemark\n         *  - Sophie Bremer\n         *\n         * */\n        const { defined } = U;\n        class ContextDetection {\n            static isGUIElementOnParentEdge(mouseContext, side) {\n                const visibleElements = (side === 'top' || side === 'bottom') ?\n                    mouseContext.row.layout.getVisibleRows() :\n                    (side === 'left' || side === 'right') ?\n                        mouseContext.row.getVisibleCells() :\n                        [];\n                const lastElementIndex = (visibleElements.length - 1);\n                return ((visibleElements[lastElementIndex] === mouseContext &&\n                    side === 'right') ||\n                    (visibleElements[lastElementIndex] === mouseContext.row &&\n                        side === 'bottom') ||\n                    (visibleElements[0] === mouseContext && side === 'left') ||\n                    (visibleElements[0] === mouseContext.row && side === 'top'));\n            }\n            static getContextLevel(mouseContext, offset, sideOffset, side) {\n                // Array of overlapped levels.\n                const overlappedLevels = mouseContext.getOverlappingLevels(side, offset / 2);\n                // Divide offset to level sections (eg 3 nested layouts -\n                // cell edge will have 3 sections each 1/3 offset width).\n                const divOffset = offset / overlappedLevels.length;\n                // Overlapped nested layout level.\n                const lastOverlappedLevel = overlappedLevels[overlappedLevels.length - 1];\n                let level = mouseContext.row.layout.level - Math.floor(sideOffset / divOffset);\n                level = level < lastOverlappedLevel ? lastOverlappedLevel : (level > mouseContext.row.layout.level ?\n                    mouseContext.row.layout.level : level);\n                return level;\n            }\n            static getContext(mouseCellContext, e, offset) {\n                let sideOffset;\n                // Get cell offsets, width, height\n                const mouseCellContextOffsets = GUIElement.getOffsets(mouseCellContext);\n                const { width, height } = GUIElement.getDimFromOffsets(mouseCellContextOffsets);\n                // Correct offset when element to small.\n                if (width < 2 * offset) {\n                    offset = width / 2;\n                }\n                // Get mouse position relative to the mouseContext sides.\n                const leftSideX = e.clientX - mouseCellContextOffsets.left;\n                const topSideY = e.clientY - mouseCellContextOffsets.top;\n                // Get cell side - right, left, top, bottom\n                let side = 'bottom';\n                if (leftSideX >= -offset && leftSideX <= offset) {\n                    side = 'left';\n                }\n                else if (leftSideX - width >= -offset && leftSideX - width <= offset) {\n                    side = 'right';\n                }\n                else if (topSideY >= -offset && topSideY <= offset) {\n                    side = 'top';\n                }\n                else if (topSideY - height >= -offset && topSideY - height <= offset) {\n                    side = 'bottom';\n                }\n                switch (side) {\n                    case 'right':\n                        sideOffset = leftSideX - width + offset;\n                        break;\n                    case 'left':\n                        sideOffset = offset - leftSideX;\n                        break;\n                    case 'top':\n                        sideOffset = offset - topSideY;\n                        break;\n                    case 'bottom':\n                        sideOffset = topSideY - height + offset;\n                        break;\n                }\n                const context = {\n                    cell: mouseCellContext,\n                    side: side\n                };\n                // Nested layouts.\n                if (mouseCellContext.row?.layout.level &&\n                    side &&\n                    ContextDetection.isGUIElementOnParentEdge(mouseCellContext, side) &&\n                    defined(sideOffset)) {\n                    const level = ContextDetection.getContextLevel(mouseCellContext, offset, sideOffset, side);\n                    const cell = mouseCellContext.getParentCell(level);\n                    if (cell) {\n                        context.cell = cell;\n                    }\n                }\n                return context;\n            }\n        }\n\n        return ContextDetection;\n    });\n    _registerModule(_modules, 'Dashboards/Actions/DragDrop.js', [_modules['Core/Utilities.js'], _modules['Dashboards/Globals.js'], _modules['Dashboards/EditMode/EditGlobals.js'], _modules['Dashboards/Layout/GUIElement.js'], _modules['Dashboards/Actions/ContextDetection.js']], function (U, Globals, EditGlobals, GUIElement, ContextDetection) {\n        /* *\n         *\n         *  (c) 2009-2024 Highsoft AS\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         *  Authors:\n         *  - Sebastian Bochan\n         *  - Wojciech Chmiel\n         *  - GÃ¸ran Slettemark\n         *  - Sophie Bremer\n         *\n         * */\n        const { addEvent, merge, css, fireEvent, createElement } = U;\n        /**\n         * Class providing a drag and drop functionality.\n         * @internal\n         */\n        class DragDrop {\n            /* *\n             *\n             *  Constructors\n             *\n             * */\n            /**\n             * Constructor for the DragDrop class.\n             * @internal\n             *\n             * @param {EditMode} editMode\n             * The parent editMode reference.\n             *\n             * @param {DragDrop.Options} options\n             * Options for the DragDrop.\n             */\n            constructor(editMode, options) {\n                this.editMode = editMode;\n                this.options = merge(DragDrop.defaultOptions, options);\n                this.mockElement = createElement('div', { className: EditGlobals.classNames.dragMock }, {}, editMode.board.container);\n                this.dropPointer = {\n                    isVisible: false,\n                    align: '',\n                    element: createElement('div', { className: EditGlobals.classNames.dropPointer }, {}, editMode.board.container)\n                };\n                this.isActive = false;\n                this.initEvents();\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * Method for showing and positioning drop pointer.\n             *\n             * @param {number} left\n             * Drop pointer left position.\n             *\n             * @param {number} top\n             * Drop pointer top position.\n             *\n             * @param {number} width\n             * Drop pointer width.\n             *\n             * @param {number} height\n             * Drop pointer height.\n             */\n            showDropPointer(left, top, width, height) {\n                this.dropPointer.isVisible = true;\n                css(this.dropPointer.element, {\n                    display: 'block',\n                    left: left + 'px',\n                    top: top + 'px',\n                    height: height + 'px',\n                    width: width + 'px'\n                });\n            }\n            /**\n             * Method for hiding drop pointer.\n             */\n            hideDropPointer() {\n                if (this.dropPointer.isVisible) {\n                    this.dropPointer.isVisible = false;\n                    this.dropPointer.align = '';\n                    this.dropPointer.element.style.display = 'none';\n                }\n            }\n            /**\n             * Method for positioning drag mock element.\n             *\n             * @param {PointerEvent} mouseEvent\n             * Mouse event.\n             */\n            setMockElementPosition(mouseEvent) {\n                const dragDrop = this, dashBoundingRect = dragDrop.editMode.board.container.getBoundingClientRect(), offset = dragDrop.mockElement.clientWidth / 2, x = mouseEvent.clientX - dashBoundingRect.left - offset, y = mouseEvent.clientY - dashBoundingRect.top - offset;\n                css(this.mockElement, { left: x + 'px', top: y + 'px' });\n            }\n            /**\n             * Method for initializing drag drop events.\n             */\n            initEvents() {\n                const dragDrop = this;\n                // DragDrop events.\n                addEvent(document, 'mousemove', dragDrop.onDrag.bind(dragDrop));\n                addEvent(document, 'mouseup', dragDrop.onDragEnd.bind(dragDrop));\n            }\n            /**\n             * General method used on drag start.\n             *\n             * @param {PointerEvent} e\n             * Mouse event.\n             *\n             * @param {Cell|Row} context\n             * Reference to the dragged context.\n             *\n             * @param {Function} dragEndCallback\n             * Callback invoked on drag end.\n             */\n            onDragStart(e, context, dragEndCallback) {\n                this.isActive = true;\n                this.editMode.hideToolbars(['cell', 'row']);\n                if (this.editMode.resizer) {\n                    this.editMode.resizer.disableResizer();\n                }\n                this.setMockElementPosition(e);\n                if (context) {\n                    this.context = context;\n                    context.hide();\n                    if (context.getType() === Globals.guiElementType.cell) {\n                        const draggedCell = context;\n                        // Call cellResize board event.\n                        fireEvent(this.editMode.board, 'cellResize', { cell: context });\n                        fireEvent(draggedCell.row, 'cellChange', { cell: context, row: draggedCell.row });\n                    }\n                }\n                else if (dragEndCallback) {\n                    this.dragEndCallback = dragEndCallback;\n                }\n                css(this.mockElement, {\n                    cursor: 'grabbing',\n                    display: 'block'\n                });\n            }\n            /**\n             * General method used while dragging.\n             *\n             * @param {PointerEvent} e\n             * Mouse event.\n             */\n            onDrag(e) {\n                const dragDrop = this;\n                if (dragDrop.isActive) {\n                    e.preventDefault();\n                    dragDrop.setMockElementPosition(e);\n                    if (dragDrop.context) {\n                        if (dragDrop.context.getType() ===\n                            Globals.guiElementType.cell) {\n                            dragDrop.onCellDrag(e);\n                        }\n                        else if (dragDrop.context.getType() ===\n                            Globals.guiElementType.row) {\n                            dragDrop.onRowDrag(e);\n                        }\n                    }\n                    else if (dragDrop.dragEndCallback) {\n                        dragDrop.onCellDrag(e);\n                    }\n                }\n            }\n            /**\n             * General method used when drag finish.\n             */\n            onDragEnd() {\n                const dragDrop = this;\n                if (dragDrop.isActive) {\n                    dragDrop.isActive = false;\n                    css(dragDrop.mockElement, {\n                        cursor: 'grab',\n                        display: 'none'\n                    });\n                    if (dragDrop.context) {\n                        if (dragDrop.context.getType() ===\n                            Globals.guiElementType.cell) {\n                            dragDrop.onCellDragEnd();\n                        }\n                        else if (dragDrop.context.getType() ===\n                            Globals.guiElementType.row) {\n                            dragDrop.onRowDragEnd();\n                        }\n                        dragDrop.context = void 0;\n                        // Show toolbars and snaps.\n                        if (dragDrop.editMode.editCellContext) {\n                            dragDrop.editMode.showToolbars(['row', 'cell'], dragDrop.editMode.editCellContext);\n                            if (dragDrop.editMode.resizer) {\n                                dragDrop.editMode.resizer.setSnapPositions(dragDrop.editMode.editCellContext);\n                            }\n                        }\n                    }\n                    else if (dragDrop.dragEndCallback) {\n                        dragDrop.dragEndCallback(dragDrop.dropContext);\n                        dragDrop.dragEndCallback = void 0;\n                        dragDrop.hideDropPointer();\n                    }\n                }\n            }\n            /**\n             * Sets appropriate drop context and refresh drop pointer position when\n             * row is dragged or cell is dragged as a row.\n             *\n             * @param {PointerEvent} e\n             * Mouse event.\n             *\n             * @param {ContextDetection.ContextDetails} contextDetails\n             * Context details (cell, side)\n             */\n            onRowDrag(e, contextDetails) {\n                const dragDrop = this, mouseCellContext = dragDrop.mouseCellContext, dropPointerSize = dragDrop.options.dropPointerSize || 0, offset = dragDrop.options.rowDropOffset || 0;\n                let updateDropPointer = false;\n                if (mouseCellContext) {\n                    const context = (contextDetails ||\n                        ContextDetection.getContext(mouseCellContext, e, offset));\n                    const align = context.side;\n                    if (dragDrop.dropPointer.align !== align ||\n                        dragDrop.dropContext !== context.cell.row) {\n                        updateDropPointer = true;\n                        dragDrop.dropPointer.align = align;\n                        dragDrop.dropContext = context.cell.row;\n                    }\n                    if (align) {\n                        const dropContextRowOffsets = GUIElement.getOffsets(dragDrop.dropContext, dragDrop.editMode.board.container);\n                        const { width, height } = GUIElement\n                            .getDimFromOffsets(dropContextRowOffsets);\n                        // Update or show drop pointer.\n                        if (!dragDrop.dropPointer.isVisible || updateDropPointer) {\n                            dragDrop.showDropPointer(dropContextRowOffsets.left, dropContextRowOffsets.top + (dragDrop.dropPointer.align === 'bottom' ?\n                                height :\n                                0) - dropPointerSize / 2, width, dropPointerSize);\n                        }\n                    }\n                    else {\n                        dragDrop.dropContext = void 0;\n                        dragDrop.hideDropPointer();\n                    }\n                }\n            }\n            /**\n             * Unmounts dropped row and mounts it in a new position.\n             *\n             * @fires DragDrop#layoutChanged\n             */\n            onRowDragEnd() {\n                const dragDrop = this, draggedRow = dragDrop.context, dropContext = dragDrop.dropContext;\n                if (dragDrop.dropPointer.align) {\n                    draggedRow.layout.unmountRow(draggedRow);\n                    // Destroy layout when empty.\n                    if (draggedRow.layout.rows.length === 0) {\n                        draggedRow.layout.destroy();\n                    }\n                    dropContext.layout.mountRow(draggedRow, (dropContext.layout.getRowIndex(dropContext) || 0) +\n                        (dragDrop.dropPointer.align === 'bottom' ? 1 : 0));\n                    // Call cellResize board event.\n                    if (draggedRow.cells[0]) {\n                        fireEvent(dragDrop.editMode.board, 'cellResize', { cell: draggedRow.cells[0] });\n                        fireEvent(draggedRow, 'cellChange', { cell: draggedRow.cells[0], row: draggedRow });\n                    }\n                }\n                dragDrop.hideDropPointer();\n                draggedRow.show();\n                fireEvent(dragDrop.editMode, 'layoutChanged', {\n                    type: 'rowDragEnd',\n                    target: draggedRow,\n                    board: dragDrop.editMode.board\n                });\n            }\n            /**\n             * Method used as middleware when cell is dragged.\n             * Decides where to pass an event depending on the mouse context.\n             *\n             * @param {PointerEvent} e\n             * Mouse event.\n             *\n             * @param {ContextDetection.ContextDetails} contextDetails\n             * Context details (cell, side)\n             */\n            onCellDrag(e, contextDetails) {\n                const dragDrop = this, mouseCellContext = dragDrop.mouseCellContext, offset = dragDrop.options.cellDropOffset || 0;\n                if (mouseCellContext || contextDetails) {\n                    dragDrop.onCellDragCellCtx(e, contextDetails ||\n                        ContextDetection.getContext(mouseCellContext, e, offset));\n                }\n                else if (dragDrop.mouseRowContext) {\n                    dragDrop.onCellDragRowCtx(e, dragDrop.mouseRowContext);\n                }\n            }\n            /**\n             * Sets appropriate drop context and refreshes the drop pointer\n             * position when a cell is dragged and a cell context is detected.\n             *\n             * @param {PointerEvent} e\n             * Mouse event.\n             *\n             * @param {ContextDetection.ContextDetails} context\n             * Context details (cell, side)\n             */\n            onCellDragCellCtx(e, context) {\n                const dragDrop = this, dropPointerSize = dragDrop.options.dropPointerSize || 0, align = context.side;\n                let updateDropPointer = false;\n                if (dragDrop.dropPointer.align !== align ||\n                    dragDrop.dropContext !== context.cell) {\n                    updateDropPointer = true;\n                    dragDrop.dropPointer.align = align;\n                    dragDrop.dropContext = context.cell;\n                }\n                if (align === 'right' || align === 'left') {\n                    const dropContextOffsets = GUIElement.getOffsets(dragDrop.dropContext, dragDrop.editMode.board.container);\n                    const { width, height } = GUIElement.getDimFromOffsets(dropContextOffsets);\n                    // Update or show drop pointer.\n                    if (!dragDrop.dropPointer.isVisible || updateDropPointer) {\n                        const rowLevelInfo = dragDrop.dropContext.row.getRowLevelInfo(e.clientY), pointerHeight = (rowLevelInfo ?\n                            (rowLevelInfo.rowLevel.bottom -\n                                rowLevelInfo.rowLevel.top) :\n                            height);\n                        dragDrop.showDropPointer(dropContextOffsets.left + (align === 'right' ? width : 0) -\n                            dropPointerSize / 2, dropContextOffsets.top, dropPointerSize, pointerHeight);\n                    }\n                }\n                else if (align === 'top' || align === 'bottom') {\n                    const dropContextOffsets = GUIElement.getOffsets(dragDrop.dropContext), rowLevelInfo = dragDrop.dropContext.row\n                        .getRowLevelInfo(dropContextOffsets.top);\n                    if (rowLevelInfo &&\n                        ((rowLevelInfo.index === 0 && align === 'top') ||\n                            (rowLevelInfo.index ===\n                                rowLevelInfo.rowLevels.length - 1 &&\n                                align === 'bottom'))) {\n                        // Checks if a cell is dragged as a row\n                        // (only when a cell edge is on a row edge)\n                        dragDrop.onRowDrag(e, context);\n                    }\n                }\n                else {\n                    dragDrop.dropContext = void 0;\n                    dragDrop.hideDropPointer();\n                }\n            }\n            /**\n             * Sets appropriate drop context and refreshes the drop pointer\n             * position when a cell is dragged and a row context is detected.\n             *\n             * @param {PointerEvent} e\n             * Mouse event.\n             *\n             * @param {Row} mouseRowContext\n             * Row context.\n             */\n            onCellDragRowCtx(e, mouseRowContext) {\n                const dragDrop = this, dropPointerSize = dragDrop.options.dropPointerSize || 0, rowOffsets = GUIElement.getOffsets(mouseRowContext), rowLevelInfo = mouseRowContext.getRowLevelInfo(e.clientY);\n                let cell, cellOffsets;\n                if (rowLevelInfo) {\n                    for (let i = 0, iEnd = rowLevelInfo.rowLevel.cells.length; i < iEnd; ++i) {\n                        cell = rowLevelInfo.rowLevel.cells[i];\n                        cellOffsets = GUIElement.getOffsets(cell);\n                        const { width, height } = GUIElement\n                            .getDimFromOffsets(cellOffsets), dashOffsets = dragDrop.editMode.board.container\n                            .getBoundingClientRect(), levelHeight = (rowLevelInfo.rowLevel.bottom -\n                            rowLevelInfo.rowLevel.top);\n                        if (cell.isVisible) {\n                            if (height < 0.8 * levelHeight &&\n                                cellOffsets.left <= e.clientX &&\n                                cellOffsets.right >= e.clientX) {\n                                if (cellOffsets.top > e.clientY) {\n                                    // @ToDo - Mouse above the cell.\n                                }\n                                else if (cellOffsets.bottom < e.clientY) {\n                                    // Mouse below the cell.\n                                    dragDrop.showDropPointer(cellOffsets.left - dashOffsets.left, cellOffsets.top - dashOffsets.top + height, width, levelHeight - height);\n                                    dragDrop.dropPointer.align = 'nestedBottom';\n                                    dragDrop.dropContext = cell;\n                                }\n                                i = iEnd; // Stop the loop\n                            }\n                            else if ((i === 0 && cellOffsets.left > e.clientX) ||\n                                (i === iEnd - 1 && cellOffsets.right < e.clientX)) {\n                                if (cellOffsets.left > e.clientX) {\n                                    // @ToDo - Mouse on the cell left side.\n                                }\n                                else if (cellOffsets.right < e.clientX) {\n                                    // Mouse on the cell right side.\n                                    const pointerWidth = rowOffsets.right - cellOffsets.right;\n                                    dragDrop.showDropPointer(cellOffsets.left + ((i === 0 && cellOffsets.left > e.clientX) ?\n                                        0 :\n                                        width) - dropPointerSize / 2 - dashOffsets.left, cellOffsets.top - dashOffsets.top, pointerWidth > dropPointerSize ?\n                                        pointerWidth :\n                                        dropPointerSize, levelHeight || height);\n                                    dragDrop.dropPointer.align = 'right';\n                                    dragDrop.dropContext = cell;\n                                }\n                                i = iEnd; // Stop the loop\n                            }\n                        }\n                        else if (!cell.isVisible && cell === dragDrop.context) {\n                            // Element is not visible.\n                            dragDrop.dropContext = void 0;\n                            dragDrop.hideDropPointer();\n                        }\n                    }\n                }\n            }\n            /**\n             * Unmounts dropped cell and mounts it in a new position.\n             * When cell is dragged as a row also creates a new row\n             * and mounts cell there.\n             *\n             * @param {Cell} contextCell\n             * Cell used as a dragDrop context.\n             *\n             * @fires DragDrop#layoutChanged\n             */\n            onCellDragEnd(contextCell) {\n                const dragDrop = this, draggedCell = contextCell || dragDrop.context;\n                let dropContext = dragDrop.dropContext;\n                if (dragDrop.dropPointer.align && dropContext && draggedCell) {\n                    draggedCell.row.unmountCell(draggedCell);\n                    // Destroy row when empty.\n                    if (draggedCell.row.cells.length === 0) {\n                        draggedCell.row.destroy();\n                    }\n                    if ((dragDrop.dropPointer.align === 'top' ||\n                        dragDrop.dropPointer.align === 'bottom') &&\n                        dropContext.getType() === Globals.guiElementType.row) {\n                        dropContext = dropContext;\n                        const newRow = dropContext.layout.addRow({}, void 0, (dropContext.layout.getRowIndex(dropContext) || 0) +\n                            (dragDrop.dropPointer.align === 'bottom' ? 1 : 0));\n                        newRow.mountCell(draggedCell, 0);\n                    }\n                    else if (dragDrop.dropPointer.align === 'nestedBottom' &&\n                        dropContext.getType() === Globals.guiElementType.cell) {\n                        // Create nesting.\n                        const dropContextCell = dropContext;\n                        const row = dropContextCell.row;\n                        const dropContextCellIndex = row.getCellIndex(dropContextCell);\n                        row.unmountCell(dropContextCell);\n                        const newCell = row.addCell({\n                            id: GUIElement.getElementId('col-nested'),\n                            layout: {\n                                rows: [{}, {}]\n                            }\n                        }, void 0, dropContextCellIndex);\n                        if (newCell.nestedLayout) {\n                            newCell.nestedLayout.rows[0].mountCell(dropContextCell);\n                            newCell.nestedLayout.rows[1].mountCell(draggedCell);\n                        }\n                    }\n                    else if (dropContext.getType() === Globals.guiElementType.cell) {\n                        dropContext = dropContext;\n                        dropContext.row.mountCell(draggedCell, (dropContext.row.getCellIndex(dropContext) || 0) +\n                            (dragDrop.dropPointer.align === 'right' ? 1 : 0));\n                    }\n                }\n                // Call cellResize board event.\n                fireEvent(dragDrop.editMode.board, 'cellResize', { cell: draggedCell });\n                fireEvent(draggedCell.row, 'cellChange', { cell: draggedCell, row: draggedCell.row });\n                dragDrop.hideDropPointer();\n                draggedCell.show();\n                fireEvent(dragDrop.editMode, 'layoutChanged', {\n                    type: 'cellDragEnd',\n                    target: draggedCell,\n                    board: dragDrop.editMode.board\n                });\n            }\n        }\n        /* *\n         *\n         *  Static Properties\n         *\n         * */\n        DragDrop.defaultOptions = {\n            enabled: true,\n            rowDropOffset: 30,\n            cellDropOffset: 30,\n            dropPointerSize: 16\n        };\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return DragDrop;\n    });\n    _registerModule(_modules, 'Dashboards/Actions/Resizer.js', [_modules['Dashboards/EditMode/EditGlobals.js'], _modules['Dashboards/Layout/GUIElement.js'], _modules['Core/Utilities.js']], function (EditGlobals, GUIElement, U) {\n        const { merge, addEvent, createElement, fireEvent, removeEvent } = U;\n        /**\n         * Class providing a resizing functionality.\n         */\n        class Resizer {\n            /* *\n            *\n            *  Static Properties\n            *\n            * */\n            /**\n             * Creates a new instance of the Resizer class based on JSON.\n             * @internal\n             */\n            static fromJSON(editMode, json) {\n                return new Resizer(editMode, json.options);\n            }\n            /* *\n            *\n            *  Constructors\n            *\n            * */\n            /**\n             * Constructor for the Resizer class.\n             *\n             * @param {EditMode} editMode\n             * The parent editMode reference.\n             *\n             * @param {Resizer.Options} options\n             * Options for the Resizer.\n             */\n            constructor(editMode, options) {\n                this.editMode = editMode;\n                this.options = merge({}, Resizer.defaultOptions, editMode.options.resize, options);\n                this.currentCell = void 0;\n                this.isX = this.options.type.indexOf('x') > -1;\n                this.isY = this.options.type.indexOf('y') > -1;\n                this.isActive = false;\n                this.startX = 0;\n                this.tempSiblingsWidth = [];\n                this.addSnaps();\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * Add Snap - create snaps and add events.\n             *\n             */\n            addSnaps() {\n                const iconsURLPrefix = this.editMode.iconsURLPrefix;\n                const snapWidth = this.options.snap.width || 0;\n                const snapHeight = this.options.snap.height || 0;\n                const dashboardContainer = this.editMode.board.container;\n                // Right snap\n                this.snapRight = createElement('img', {\n                    className: EditGlobals.classNames.resizeSnap + ' ' +\n                        EditGlobals.classNames.resizeSnapX,\n                    src: iconsURLPrefix + 'resize-handle.svg'\n                }, {\n                    width: snapWidth + 'px',\n                    height: snapHeight + 'px',\n                    left: -9999 + 'px'\n                }, dashboardContainer);\n                // Bottom snap\n                this.snapBottom = createElement('img', {\n                    className: EditGlobals.classNames.resizeSnap + ' ' +\n                        EditGlobals.classNames.resizeSnapY,\n                    src: iconsURLPrefix + 'resize-handle.svg'\n                }, {\n                    width: snapWidth + 'px',\n                    height: snapHeight + 'px',\n                    top: -9999 + 'px',\n                    left: '0px'\n                }, dashboardContainer);\n                this.addResizeEvents();\n            }\n            /**\n             * Hide snaps\n             *\n             */\n            disableResizer() {\n                this.isActive = false;\n                this.currentDimension = void 0;\n                this.currentCell = void 0;\n                if (this.snapRight) {\n                    this.snapRight.style.left = '-9999px';\n                }\n                if (this.snapBottom) {\n                    this.snapBottom.style.left = '-9999px';\n                }\n            }\n            /**\n             * Update snap position.\n             *\n             * @param cell\n             * Cell reference\n             */\n            setSnapPositions(cell) {\n                // Set current cell\n                this.currentCell = cell;\n                // Set position of snaps\n                const cellOffsets = GUIElement.getOffsets(cell, this.editMode.board.container);\n                const left = cellOffsets.left || 0;\n                const top = cellOffsets.top || 0;\n                const { width, height } = GUIElement.getDimFromOffsets(cellOffsets);\n                const snapWidth = (this.options.snap.width || 0);\n                const snapHeight = (this.options.snap.height || 0);\n                if (this.snapRight) {\n                    this.snapRight.style.left = (left + width - snapWidth) + 'px';\n                    this.snapRight.style.top = top + (height / 2) - (snapHeight / 2) + 'px';\n                }\n                if (this.snapBottom) {\n                    this.snapBottom.style.top = (top + height - snapHeight) + 'px';\n                    this.snapBottom.style.left = (left + (width / 2) - (snapWidth / 2)) + 'px';\n                }\n            }\n            /**\n             * Method detects siblings and auto-width applied by flex. The resizer\n             * requires static widths for correct calculations, so we need to apply\n             * temporary width on siblings.\n             */\n            setTempWidthSiblings() {\n                const currentCell = this.currentCell;\n                if (currentCell) {\n                    const cellOffsets = GUIElement.getOffsets(currentCell), rowLevelInfo = currentCell.row.getRowLevelInfo(cellOffsets.top), rowLevelCells = (rowLevelInfo && rowLevelInfo.rowLevel.cells) || [];\n                    let cellContainer, cell;\n                    for (let i = 0, iEnd = rowLevelCells.length; i < iEnd; ++i) {\n                        cell = rowLevelCells[i];\n                        cellContainer = cell.container;\n                        // Do not convert width on the current cell and next siblings.\n                        if (cell === currentCell) {\n                            break;\n                        }\n                        if (cellContainer) {\n                            cellContainer.style.flex =\n                                '0 0 ' + cellContainer.offsetWidth + 'px';\n                            this.tempSiblingsWidth.push(cell);\n                        }\n                    }\n                }\n            }\n            /**\n             * Revert widths to auto.\n             */\n            revertSiblingsAutoWidth() {\n                const tempSiblingsWidth = this.tempSiblingsWidth;\n                let cellContainer, cellResize;\n                for (let i = 0, iEnd = tempSiblingsWidth.length; i < iEnd; ++i) {\n                    cellContainer = tempSiblingsWidth[i].container;\n                    if (cellContainer) {\n                        cellContainer.style.flex = '1 1 0%';\n                        cellResize = tempSiblingsWidth[i];\n                    }\n                }\n                this.tempSiblingsWidth = [];\n                // Call cellResize dashboard event.\n                if (cellResize) {\n                    fireEvent(this.editMode.board, 'cellResize', {\n                        cell: cellResize\n                    });\n                    fireEvent(cellResize.row, 'cellChange', {\n                        cell: cellResize,\n                        row: cellResize.row\n                    });\n                }\n            }\n            /**\n             * Add mouse events to snaps\n             *\n             */\n            addResizeEvents() {\n                const resizer = this;\n                let mouseDownSnapX, mouseDownSnapY, mouseMoveSnap, mouseUpSnap;\n                resizer.mouseDownSnapX = mouseDownSnapX = function (e) {\n                    resizer.isActive = true;\n                    resizer.currentDimension = 'x';\n                    resizer.editMode.hideToolbars(['row', 'cell']);\n                    resizer.setTempWidthSiblings();\n                    resizer.startX = e.clientX;\n                };\n                resizer.mouseDownSnapY = mouseDownSnapY = function () {\n                    resizer.isActive = true;\n                    resizer.currentDimension = 'y';\n                    resizer.editMode.hideToolbars(['row', 'cell']);\n                };\n                resizer.mouseMoveSnap = mouseMoveSnap = function (e) {\n                    if (resizer.isActive) {\n                        resizer.onMouseMove(e);\n                    }\n                };\n                resizer.mouseUpSnap = mouseUpSnap = function () {\n                    if (resizer.isActive) {\n                        resizer.isActive = false;\n                        resizer.currentDimension = void 0;\n                        resizer.revertSiblingsAutoWidth();\n                        resizer.editMode.showToolbars(['row', 'cell'], resizer.currentCell);\n                        if (resizer.currentCell) {\n                            resizer.setSnapPositions(resizer.currentCell);\n                        }\n                    }\n                };\n                // Add mouse events\n                addEvent(this.snapRight, 'mousedown', mouseDownSnapX);\n                addEvent(this.snapBottom, 'mousedown', mouseDownSnapY);\n                addEvent(document, 'mousemove', mouseMoveSnap);\n                addEvent(document, 'mouseup', mouseUpSnap);\n                // Touch events\n                // addEvent(snapX, 'touchstart', mouseDownSnapX);\n                // addEvent(snapY, 'touchstart', mouseDownSnapY);\n                // if (!rowContainer.hcEvents.mousemove) {\n                //     addEvent(rowContainer, 'touchmove', mouseMoveSnap);\n                //     addEvent(rowContainer, 'touchend', mouseUpSnap);\n                // }\n                const runReflow = () => {\n                    if (resizer.currentCell) {\n                        resizer.setSnapPositions(resizer.currentCell);\n                    }\n                };\n                if (typeof ResizeObserver === 'function') {\n                    this.resizeObserver = new ResizeObserver(runReflow);\n                    this.resizeObserver.observe(resizer.editMode.board.container);\n                }\n                else {\n                    const unbind = addEvent(window, 'resize', runReflow);\n                    addEvent(this, 'destroy', unbind);\n                }\n            }\n            /**\n             * General method used on resizing.\n             *\n             * @param {global.Event} e\n             * A mouse event.\n             *\n             */\n            onMouseMove(e) {\n                const currentCell = this.currentCell;\n                const cellContainer = currentCell && currentCell.container;\n                const currentDimension = this.currentDimension;\n                if (currentCell &&\n                    cellContainer &&\n                    !((currentCell.row.layout.board.editMode || {}).dragDrop || {})\n                        .isActive) {\n                    const cellOffsets = GUIElement.getOffsets(currentCell);\n                    const { width: parentRowWidth } = GUIElement.getDimFromOffsets(GUIElement.getOffsets(currentCell.row));\n                    // Resize width\n                    if (currentDimension === 'x') {\n                        const newWidth = (Math.min(e.clientX - cellOffsets.left, parentRowWidth) /\n                            parentRowWidth) *\n                            100 +\n                            '%';\n                        currentCell.setSize(newWidth);\n                        this.startX = e.clientX;\n                    }\n                    // Resize height\n                    if (currentDimension === 'y') {\n                        currentCell.setSize(void 0, e.clientY - cellOffsets.top);\n                    }\n                    // Call cellResize dashboard event.\n                    fireEvent(this.editMode.board, 'cellResize', {\n                        cell: currentCell\n                    });\n                    fireEvent(currentCell.row, 'cellChange', {\n                        cell: currentCell,\n                        row: currentCell.row\n                    });\n                    this.setSnapPositions(currentCell);\n                }\n            }\n            /**\n             * Destroy resizer\n             */\n            destroy() {\n                const snaps = ['snapRight', 'snapBottom'];\n                let snap;\n                // Unbind events\n                removeEvent(document, 'mousemove');\n                removeEvent(document, 'mouseup');\n                this.resizeObserver?.unobserve(this.editMode.board.container);\n                for (let i = 0, iEnd = snaps.length; i < iEnd; ++i) {\n                    snap = this[snaps[i]];\n                    // Unbind event\n                    removeEvent(snap, 'mousedown');\n                    // Destroy snap\n                    snap.remove();\n                }\n            }\n            /**\n             * Converts the class instance to a class JSON.\n             * @internal\n             *\n             * @return {Resizer.JSON}\n             * Class JSON of this Resizer instance.\n             */\n            toJSON() {\n                const options = this.options;\n                return {\n                    $class: 'Dashboards.Action.Resizer',\n                    options: {\n                        enabled: options.enabled,\n                        styles: {\n                            minWidth: options.styles.minWidth,\n                            minHeight: options.styles.minHeight\n                        },\n                        type: options.type,\n                        snap: {\n                            width: options.snap.width,\n                            height: options.snap.height\n                        }\n                    }\n                };\n            }\n        }\n        Resizer.defaultOptions = {\n            enabled: true,\n            styles: {\n                minWidth: 20,\n                minHeight: 50\n            },\n            type: 'xy',\n            snap: {\n                width: 9,\n                height: 17\n            }\n        };\n\n        return Resizer;\n    });\n    _registerModule(_modules, 'Dashboards/EditMode/EditMode.js', [_modules['Dashboards/Layout/Cell.js'], _modules['Dashboards/Layout/CellHTML.js'], _modules['Dashboards/EditMode/EditGlobals.js'], _modules['Dashboards/EditMode/EditRenderer.js'], _modules['Dashboards/EditMode/Toolbar/CellEditToolbar.js'], _modules['Dashboards/EditMode/Toolbar/RowEditToolbar.js'], _modules['Dashboards/EditMode/SidebarPopup.js'], _modules['Dashboards/EditMode/EditContextMenu.js'], _modules['Dashboards/Actions/DragDrop.js'], _modules['Dashboards/Actions/Resizer.js'], _modules['Dashboards/EditMode/ConfirmationPopup.js'], _modules['Dashboards/Layout/GUIElement.js'], _modules['Dashboards/Globals.js'], _modules['Dashboards/Layout/Layout.js'], _modules['Core/Utilities.js']], function (Cell, CellHTML, EditGlobals, EditRenderer, CellEditToolbar, RowEditToolbar, SidebarPopup, EditContextMenu, DragDrop, Resizer, ConfirmationPopup, GUIElement, Globals, Layout, U) {\n        /* *\n         *\n         *  (c) 2009-2024 Highsoft AS\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         *  Authors:\n         *  - Sebastian Bochan\n         *  - Wojciech Chmiel\n         *  - GÃ¸ran Slettemark\n         *  - Sophie Bremer\n         *\n         * */\n        const { addEvent, createElement, css, merge } = U;\n        /* *\n         *\n         *  Class\n         *\n         * */\n        class EditMode {\n            /* *\n            *\n            *  Constructor\n            *\n            * */\n            /**\n             * Edit mode constructor.\n             * @internal\n              *\n             * @param board\n             * Board instance\n             *\n             * @param options\n             * Edit mode options\n             */\n            constructor(board, options) {\n                /* *\n                *\n                *  Properties\n                *\n                * */\n                /**\n                 * @internal\n                 */\n                this.active = false;\n                /**\n                 * Whether the board is generated with custom HTML.\n                 */\n                this.customHTMLMode = false;\n                /**\n                 * URL from which the icons will be fetched.\n                 */\n                this.iconsURLPrefix = 'https://code.highcharts.com/dashboards/2.2.0/gfx/dashboards-icons/';\n                this.iconsURLPrefix =\n                    (options && options.iconsURLPrefix) || this.iconsURLPrefix;\n                this.options = merge(\n                // Default options.\n                {\n                    confirmationPopup: {\n                        close: {\n                            icon: this.iconsURLPrefix + 'close.svg'\n                        }\n                    },\n                    contextMenu: {\n                        icon: this.iconsURLPrefix + 'menu.svg'\n                    },\n                    dragDrop: {\n                        enabled: true\n                    },\n                    enabled: true,\n                    resize: {\n                        enabled: true\n                    },\n                    settings: {\n                        enabled: true\n                    },\n                    toolbars: {\n                        cell: {\n                            enabled: true\n                        },\n                        row: {\n                            enabled: true\n                        }\n                    },\n                    tools: {\n                        addComponentBtn: {\n                            enabled: true,\n                            icon: this.iconsURLPrefix + 'add.svg'\n                        }\n                    }\n                }, options || {});\n                this.board = board;\n                this.lang = merge({}, EditGlobals.lang, this.options.lang);\n                board.boardWrapper = board.container;\n                if (board.guiEnabled) {\n                    this.initLayout();\n                }\n                this.isInitialized = false;\n                this.isContextDetectionActive = false;\n                this.tools = {};\n                if (board.editModeEnabled) {\n                    this.customHTMLMode = !this.board.layoutsWrapper;\n                    this.contextPointer = {\n                        isVisible: false,\n                        element: createElement('div', {\n                            className: EditGlobals.classNames.contextDetectionPointer\n                        }, {}, board.container)\n                    };\n                    this.createTools();\n                    this.confirmationPopup = new ConfirmationPopup(board.container, this.iconsURLPrefix, this, this.options.confirmationPopup);\n                    // Create edit overlay.\n                    this.editOverlay = createElement('div', {\n                        className: EditGlobals.classNames.editOverlay\n                    }, {}, board.container);\n                    this.isEditOverlayActive = false;\n                    board.fullscreen = new Dashboards.FullScreen(board);\n                    if (this.customHTMLMode) {\n                        board.container.classList.add(Globals.classNames.boardContainer);\n                    }\n                }\n            }\n            /* *\n            *\n            *  Functions\n            *\n            * */\n            /**\n             * Event to fire on click of the context button.\n             * @internal\n             */\n            onContextBtnClick() {\n                const editMode = this;\n                // Toggle context menu visibility.\n                if (editMode.tools.contextMenu) {\n                    if (!editMode.tools.contextMenu.isVisible) {\n                        editMode.tools.contextMenu\n                            .updatePosition(editMode.tools.contextButtonElement);\n                    }\n                    editMode.tools.contextMenu.setVisible(!editMode.tools.contextMenu.isVisible);\n                }\n            }\n            /**\n             * Activate or deactivate edit mode.\n             */\n            toggleEditMode() {\n                const editMode = this;\n                if (editMode.active) {\n                    editMode.deactivate();\n                }\n                else {\n                    editMode.activate();\n                }\n            }\n            /**\n             * Init the instance of edit mode.\n             * @internal\n             */\n            init() {\n                const editMode = this;\n                if (this.options.resize?.enabled && !editMode.customHTMLMode) {\n                    editMode.resizer = new Resizer(editMode, editMode.options.resize);\n                }\n                editMode.dragDrop = new DragDrop(editMode, editMode.options.dragDrop);\n                // Init rowToolbar.\n                if (editMode.options.toolbars?.row?.enabled &&\n                    !editMode.rowToolbar &&\n                    !editMode.customHTMLMode) {\n                    editMode.rowToolbar = new RowEditToolbar(editMode);\n                }\n                // Init cellToolbar.\n                if (editMode.options.toolbars?.cell?.enabled && !editMode.cellToolbar) {\n                    editMode.cellToolbar = new CellEditToolbar(editMode);\n                }\n                // Init Sidebar.\n                if (!editMode.sidebar) {\n                    editMode.sidebar = new SidebarPopup(this.board.container, this.iconsURLPrefix, editMode);\n                }\n                editMode.isInitialized = true;\n            }\n            /**\n             * Init events for edit mode.\n             * @internal\n             */\n            initEvents() {\n                const editMode = this, board = editMode.board;\n                if (this.customHTMLMode) {\n                    const length = board.mountedComponents.length;\n                    for (let i = 0, iEnd = length; i < iEnd; ++i) {\n                        editMode.setCellEvents(board.mountedComponents[i].cell);\n                    }\n                }\n                else {\n                    for (let i = 0, iEnd = board.layouts.length; i < iEnd; ++i) {\n                        editMode.setLayoutEvents(board.layouts[i]);\n                    }\n                }\n                if (editMode.cellToolbar) {\n                    // Stop context detection when mouse on cell toolbar.\n                    addEvent(editMode.cellToolbar.container, 'mouseenter', function () {\n                        editMode.stopContextDetection();\n                    });\n                    addEvent(editMode.cellToolbar.container, 'mouseleave', function () {\n                        editMode.isContextDetectionActive = true;\n                    });\n                }\n                if (editMode.rowToolbar) {\n                    // Stop context detection when mouse on row toolbar.\n                    addEvent(editMode.rowToolbar.container, 'mouseenter', function () {\n                        editMode.stopContextDetection();\n                    });\n                    addEvent(editMode.rowToolbar.container, 'mouseleave', function () {\n                        editMode.isContextDetectionActive = true;\n                    });\n                }\n                const elementForEvents = this.customHTMLMode ?\n                    board.container : board.layoutsWrapper;\n                addEvent(elementForEvents, 'mousemove', editMode.onDetectContext.bind(editMode));\n                addEvent(elementForEvents, 'click', editMode.onContextConfirm.bind(editMode));\n                addEvent(elementForEvents, 'mouseleave', () => {\n                    editMode.hideContextPointer();\n                });\n            }\n            /**\n             * Initialize the container for the layouts.\n             * @internal\n             *\n             */\n            initLayout() {\n                const board = this.board;\n                // Clear the container from any content.\n                board.container.innerHTML = '';\n                // Add container for the board.\n                board.container = createElement('div', {\n                    className: Globals.classNames.boardContainer\n                }, {}, board.boardWrapper);\n                // Create layouts wrapper.\n                board.layoutsWrapper = createElement('div', {\n                    className: Globals.classNames.layoutsWrapper\n                }, {}, board.container);\n                if (board.options.gui) {\n                    this.setLayouts(board.options.gui);\n                }\n                if (board.options.layoutsJSON && !board.layouts.length) {\n                    this.setLayoutsFromJSON(board.options.layoutsJSON);\n                }\n            }\n            /**\n             * Creates a new layouts and adds it to the dashboard based on the options.\n             * @internal\n             *\n             * @param guiOptions\n             * The GUI options for the layout.\n             *\n             */\n            setLayouts(guiOptions) {\n                const board = this.board, layoutsOptions = guiOptions.layouts;\n                for (let i = 0, iEnd = layoutsOptions.length; i < iEnd; ++i) {\n                    board.layouts.push(new Layout(board, merge({}, guiOptions.layoutOptions, layoutsOptions[i])));\n                }\n            }\n            /**\n             * Set the layouts from JSON.\n             * @internal\n             *\n             * @param json\n             * An array of layout JSON objects.\n             *\n             */\n            setLayoutsFromJSON(json) {\n                const board = this.board;\n                let layout;\n                for (let i = 0, iEnd = json.length; i < iEnd; ++i) {\n                    layout = Layout.fromJSON(json[i], board);\n                    if (layout) {\n                        board.layouts.push(layout);\n                    }\n                }\n            }\n            /**\n             * Set events for the layout.\n             * @internal\n             */\n            setLayoutEvents(layout) {\n                const editMode = this;\n                for (let j = 0, jEnd = layout.rows.length; j < jEnd; ++j) {\n                    const row = layout.rows[j];\n                    editMode.setRowEvents(row);\n                    for (let k = 0, kEnd = row.cells.length; k < kEnd; ++k) {\n                        editMode.setCellEvents(row.cells[k]);\n                    }\n                }\n            }\n            /**\n             * Set events for the row.\n             * @internal\n             */\n            setRowEvents(row) {\n                const editMode = this;\n                // Init dragDrop row events.\n                if (editMode.dragDrop) {\n                    const dragDrop = editMode.dragDrop;\n                    addEvent(row.container, 'mouseenter', function () {\n                        if (editMode.isContextDetectionActive) {\n                            editMode.mouseRowContext = row;\n                        }\n                    });\n                    addEvent(row.container, 'mousemove', function (e) {\n                        if (dragDrop.isActive && e.target === row.container) {\n                            dragDrop.mouseRowContext = row;\n                        }\n                    });\n                    addEvent(row.container, 'mouseleave', function () {\n                        if (dragDrop.isActive && dragDrop.mouseRowContext === row) {\n                            dragDrop.mouseRowContext = void 0;\n                        }\n                        if (editMode.isContextDetectionActive) {\n                            editMode.mouseRowContext = void 0;\n                        }\n                    });\n                }\n            }\n            /**\n             * Set events for the cell.\n             * @internal\n             */\n            setCellEvents(cell) {\n                const editMode = this;\n                if (cell instanceof CellHTML) {\n                    addEvent(cell.container, 'mouseenter', function () {\n                        if (editMode.isContextDetectionActive) {\n                            editMode.mouseCellContext = cell;\n                        }\n                    });\n                }\n                else {\n                    if (cell.nestedLayout) {\n                        editMode.setLayoutEvents(cell.nestedLayout);\n                    }\n                    else if (editMode.cellToolbar && cell.container) {\n                        addEvent(cell.container, 'mouseenter', function () {\n                            if (editMode.isContextDetectionActive) {\n                                editMode.mouseCellContext = cell;\n                            }\n                        });\n                        // Init dragDrop cell events only when using layouts.\n                        if ((editMode.dragDrop || editMode.resizer)) {\n                            const dragDrop = editMode.dragDrop;\n                            addEvent(cell.container, 'mousemove', function (e) {\n                                if (dragDrop &&\n                                    dragDrop.isActive &&\n                                    e.target === cell.container) {\n                                    dragDrop.mouseCellContext = cell;\n                                    dragDrop.mouseRowContext = void 0;\n                                }\n                            });\n                            addEvent(cell.container, 'mouseleave', function () {\n                                if (dragDrop &&\n                                    dragDrop.isActive &&\n                                    dragDrop.mouseCellContext === cell) {\n                                    dragDrop.mouseCellContext = void 0;\n                                }\n                                if (editMode.isContextDetectionActive) {\n                                    editMode.mouseCellContext = void 0;\n                                }\n                            });\n                        }\n                    }\n                }\n            }\n            /**\n             * Activate the edit mode.\n             * @internal\n             */\n            activate() {\n                const editMode = this;\n                // Init edit mode.\n                if (!editMode.isInitialized) {\n                    editMode.init();\n                    editMode.initEvents();\n                }\n                // Set edit mode active class to dashboard.\n                editMode.board.container.classList.add(EditGlobals.classNames.editModeEnabled);\n                if (this.addComponentBtn) {\n                    this.addComponentBtn.style.display = 'block';\n                }\n                editMode.active = true;\n                editMode.isContextDetectionActive = true;\n            }\n            /**\n             * Deactivate the edit mode.\n             * @internal\n             */\n            deactivate() {\n                const editMode = this, dashboardCnt = editMode.board.container;\n                dashboardCnt.classList.remove(EditGlobals.classNames.editModeEnabled);\n                // Hide toolbars.\n                editMode.hideToolbars();\n                // Remove highlight from the context row if exists.\n                if (this.editCellContext && this.editCellContext instanceof Cell) {\n                    this.editCellContext.row?.setHighlight();\n                }\n                // TODO all buttons should be deactivated.\n                if (this.addComponentBtn) {\n                    this.addComponentBtn.style.display = 'none';\n                }\n                if (editMode.resizer) {\n                    editMode.resizer.disableResizer();\n                }\n                // Disable responsive width and restore elements to their original\n                // positions and sizes.\n                if (this.board.layoutsWrapper) {\n                    this.board.layoutsWrapper.style.width = '100%';\n                }\n                this.board.reflow();\n                editMode.active = false;\n                editMode.stopContextDetection();\n                this.editCellContext = void 0;\n                this.potentialCellContext = void 0;\n            }\n            /**\n             * Function to check whether the edit mode is activated.\n             * @internal\n             *\n             * @returns\n             * Whether the edit mode is activated.\n             */\n            isActive() {\n                return this.active;\n            }\n            /**\n             * Method for hiding edit toolbars.\n             * @internal\n             *\n             * @param toolbarTypes\n             * The array of toolbar names to hide ('cell', 'row', 'sidebar').\n             */\n            hideToolbars(toolbarTypes) {\n                const editMode = this, toolbarsToHide = toolbarTypes || ['cell', 'row', 'sidebar'];\n                for (let i = 0, iEnd = toolbarsToHide.length; i < iEnd; ++i) {\n                    switch (toolbarsToHide[i]) {\n                        case 'cell': {\n                            if (editMode.cellToolbar &&\n                                editMode.cellToolbar.isVisible) {\n                                editMode.cellToolbar.hide();\n                            }\n                            break;\n                        }\n                        case 'row': {\n                            if (editMode.rowToolbar && editMode.rowToolbar.isVisible) {\n                                editMode.rowToolbar.hide();\n                            }\n                            break;\n                        }\n                        case 'sidebar': {\n                            if (editMode.sidebar && editMode.sidebar.isVisible) {\n                                editMode.sidebar.hide();\n                            }\n                            break;\n                        }\n                        default: {\n                            break;\n                        }\n                    }\n                }\n            }\n            /**\n             * Method for hiding edit toolbars.\n             * @internal\n             *\n             * @param toolbarTypes\n             * The array of toolbar names to hide ('cell', 'row', 'sidebar').\n             *\n             * @param currentCell\n             * The cell reference for toolbar.\n             *\n             */\n            showToolbars(toolbarTypes, currentCell) {\n                const editMode = this, toolbarsToShow = toolbarTypes || ['cell', 'row', 'sidebar'];\n                for (let i = 0, iEnd = toolbarsToShow.length; i < iEnd; ++i) {\n                    switch (toolbarsToShow[i]) {\n                        case 'cell': {\n                            if (currentCell && editMode.cellToolbar) {\n                                editMode.cellToolbar.showToolbar(currentCell);\n                            }\n                            break;\n                        }\n                        case 'row': {\n                            if (currentCell && currentCell.row && editMode.rowToolbar) {\n                                editMode.rowToolbar.showToolbar(currentCell.row);\n                            }\n                            break;\n                        }\n                        case 'sidebar': {\n                            if (editMode.sidebar && !editMode.sidebar.isVisible) {\n                                editMode.sidebar.show();\n                            }\n                            break;\n                        }\n                        default: {\n                            break;\n                        }\n                    }\n                }\n            }\n            /**\n             * Creates the buttons such as `addComponent` button, context menu button\n             * and its container.\n             * @internal\n             */\n            createTools() {\n                const editMode = this;\n                const { board, options, tools } = editMode;\n                // Create tools container\n                tools.container = document.createElement('div');\n                tools.container.classList.add(EditGlobals.classNames.editTools);\n                if (board.layoutsWrapper) {\n                    // For the generated layout\n                    board.layoutsWrapper.parentNode.insertBefore(tools.container, board.layoutsWrapper);\n                }\n                else {\n                    // For the custom layout\n                    board.container.insertBefore(tools.container, board.container.firstChild);\n                }\n                // Create context menu button\n                if (options.contextMenu && options.contextMenu.enabled) {\n                    tools.contextButtonElement = EditRenderer.renderContextButton(tools.container, editMode);\n                    // Init contextMenu if doesn't exist.\n                    if (!editMode.tools.contextMenu) {\n                        editMode.tools.contextMenu = new EditContextMenu(editMode.board.container, editMode.options.contextMenu || {}, editMode);\n                    }\n                }\n                // Create add component button\n                if (options.tools?.addComponentBtn?.enabled &&\n                    options.toolbars?.cell?.enabled &&\n                    !this.customHTMLMode) {\n                    const addIconURL = options.tools.addComponentBtn.icon;\n                    this.addComponentBtn = EditRenderer.renderButton(tools.container, {\n                        className: EditGlobals.classNames.editToolsBtn,\n                        icon: addIconURL,\n                        text: this.lang.addComponent,\n                        callback: () => {\n                            // Sidebar trigger\n                            if (editMode.sidebar) {\n                                editMode.sidebar.show();\n                                editMode.setEditOverlay();\n                            }\n                        },\n                        style: {\n                            display: 'none'\n                        }\n                    });\n                }\n            }\n            /**\n             * Event fired when detecting context on drag&drop.\n             */\n            onDetectContext() {\n                const editMode = this;\n                if (!editMode.isActive() ||\n                    !editMode.isContextDetectionActive ||\n                    (!editMode.mouseCellContext && !editMode.mouseRowContext) ||\n                    (editMode.dragDrop || {}).isActive) {\n                    return;\n                }\n                let cellContext;\n                let rowContext;\n                if (editMode.mouseCellContext) {\n                    cellContext = editMode.mouseCellContext;\n                }\n                else if (editMode.mouseRowContext) {\n                    rowContext = editMode.mouseRowContext;\n                    cellContext = rowContext.layout.parentCell;\n                }\n                this.potentialCellContext = cellContext;\n                if (cellContext) {\n                    const cellContextOffsets = GUIElement\n                        .getOffsets(cellContext, editMode.board.container);\n                    const { width, height } = GUIElement\n                        .getDimFromOffsets(cellContextOffsets);\n                    editMode.showContextPointer(cellContextOffsets.left, cellContextOffsets.top, width, height);\n                }\n            }\n            /**\n             * Stops the context detection.\n             */\n            stopContextDetection() {\n                this.isContextDetectionActive = false;\n                if (this.dragDrop) {\n                    this.dragDrop.mouseCellContext = void 0;\n                }\n                this.mouseCellContext = void 0;\n                this.hideContextPointer();\n            }\n            /**\n             * Confirms the selected context.\n             */\n            onContextConfirm() {\n                if (this.isContextDetectionActive &&\n                    this.potentialCellContext &&\n                    this.editCellContext !== this.potentialCellContext) {\n                    this.setEditCellContext(this.potentialCellContext, this.editCellContext);\n                }\n            }\n            /**\n             * Sets the edit cell context.\n             * @internal\n             */\n            setEditCellContext(editCellContext, oldEditCellContext) {\n                const editMode = this;\n                const oldContext = oldEditCellContext;\n                if (editCellContext instanceof CellHTML ||\n                    oldContext instanceof CellHTML) {\n                    editMode.editCellContext = editCellContext;\n                    editMode.cellToolbar?.showToolbar(editCellContext);\n                }\n                else {\n                    const oldContextRow = oldContext?.row;\n                    editMode.editCellContext = editCellContext;\n                    editMode.showToolbars(['row', 'cell'], editCellContext);\n                    if (!oldContextRow || oldContextRow !== editCellContext.row) {\n                        if (oldContextRow) {\n                            // Remove highlight from the previous row.\n                            oldContextRow.setHighlight();\n                        }\n                        // Add highlight to the context row.\n                        if (editCellContext.row) {\n                            editCellContext.row.setHighlight();\n                        }\n                    }\n                    if (editMode.resizer) {\n                        editMode.resizer.setSnapPositions(editCellContext);\n                    }\n                }\n            }\n            /**\n             * Method for showing and positioning context pointer.\n             * @internal\n             */\n            showContextPointer(left, top, width, height) {\n                if (!this.contextPointer) {\n                    return;\n                }\n                this.contextPointer.isVisible = true;\n                css(this.contextPointer.element, {\n                    display: 'block',\n                    left: left + 'px',\n                    top: top + 'px',\n                    height: height + 'px',\n                    width: width + 'px'\n                });\n            }\n            /**\n             * Method for hiding context pointer.\n             * @internal\n             */\n            hideContextPointer() {\n                if (this.contextPointer?.isVisible) {\n                    this.contextPointer.isVisible = false;\n                    this.contextPointer.element.style.display = 'none';\n                }\n            }\n            /**\n             * Adds/Removes the edit mode overlay.\n             * @internal\n             *\n             * @param remove\n             * Whether the edit overlay should be removed.\n             */\n            setEditOverlay(remove) {\n                const editMode = this, cnt = editMode.editOverlay, isSet = cnt?.classList.contains(EditGlobals.classNames.editOverlayActive);\n                if (!remove && !isSet) {\n                    cnt?.classList.add(EditGlobals.classNames.editOverlayActive);\n                    editMode.isEditOverlayActive = true;\n                }\n                else if (remove && isSet) {\n                    cnt?.classList.remove(EditGlobals.classNames.editOverlayActive);\n                    editMode.isEditOverlayActive = false;\n                }\n            }\n        }\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return EditMode;\n    });\n    _registerModule(_modules, 'Dashboards/EditMode/Fullscreen.js', [_modules['Core/Utilities.js'], _modules['Dashboards/Globals.js']], function (U, Globals) {\n        /* *\n         *\n         *  (c) 2009-2024 Highsoft AS\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         *  Authors:\n         *  - Sebastian Bochan\n         *  - Wojciech Chmiel\n         *  - GÃ¸ran Slettemark\n         *  - Sophie Bremer\n         *\n         * */\n        const { addEvent } = U;\n        class Fullscreen {\n            /* *\n            *\n            *  Constructor\n            *\n            * */\n            constructor(DashboardClass) {\n                this.isOpen = false;\n                this.board = DashboardClass;\n                // Add class to allow scroll element\n                this.board.boardWrapper.classList.add(Globals.classNamePrefix + '-fullscreen');\n            }\n            /* *\n            *\n            *  Functions\n            *\n            * */\n            /**\n             * Toggles displaying the board in fullscreen mode.\n             */\n            toggle() {\n                const fullscreen = this, isOpen = this.isOpen;\n                fullscreen[isOpen ? 'close' : 'open']();\n            }\n            /**\n             * Display board in fullscreen.\n             */\n            open() {\n                if (this.isOpen) {\n                    return;\n                }\n                const fullscreen = this, board = fullscreen.board;\n                // Handle exitFullscreen() method when user clicks 'Escape' button.\n                const unbindChange = addEvent(board.boardWrapper.ownerDocument, // Dashboard's document\n                'fullscreenchange', function () {\n                    if (fullscreen.isOpen) {\n                        fullscreen.isOpen = false;\n                        fullscreen.close();\n                    }\n                    else {\n                        fullscreen.isOpen = true;\n                        fullscreen.setButtonText();\n                    }\n                });\n                fullscreen.unbindFullscreenEvent = () => {\n                    unbindChange();\n                };\n                const promise = board.boardWrapper.requestFullscreen();\n                // eslint-disable-next-line highcharts/quote-members\n                promise.catch(() => {\n                    throw new Error('Full screen is not supported.');\n                });\n            }\n            /**\n             * Stops displaying the dashboard in fullscreen mode.\n             */\n            close() {\n                const fullscreen = this, board = fullscreen.board;\n                // Don't fire exitFullscreen() when user exited using 'Escape' button.\n                if (fullscreen.isOpen &&\n                    board.boardWrapper.ownerDocument instanceof Document) {\n                    void board.boardWrapper.ownerDocument.exitFullscreen();\n                }\n                // Unbind event as it's necessary only before exiting from fullscreen.\n                if (fullscreen.unbindFullscreenEvent) {\n                    fullscreen.unbindFullscreenEvent =\n                        fullscreen.unbindFullscreenEvent();\n                }\n                fullscreen.isOpen = false;\n                this.setButtonText();\n            }\n            /**\n             * Set the correct text depending of the fullscreen is on or of.\n             */\n            setButtonText() {\n                const editMode = this.board.editMode, contextMenu = editMode && editMode.tools.contextMenu, button = contextMenu && contextMenu.items.viewFullscreen;\n                if (button && button.innerElement) {\n                    const lang = editMode.lang;\n                    button.innerElement.innerHTML =\n                        (this.isOpen ? lang.exitFullscreen : lang.viewFullscreen) || '';\n                }\n            }\n        }\n\n        return Fullscreen;\n    });\n    _registerModule(_modules, 'masters/modules/layout.src.js', [_modules['Dashboards/Globals.js'], _modules['Dashboards/EditMode/EditMode.js'], _modules['Dashboards/EditMode/Fullscreen.js']], function (Globals, EditMode, Fullscreen) {\n\n        /* *\n         *\n         *  Imports\n         *\n         * */\n        // Fill registries\n        /* *\n         *\n         *  Namespace\n         *\n         * */\n        const G = Globals;\n        G.EditMode = EditMode;\n        G.FullScreen = Fullscreen;\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return G;\n    });\n}));\n"],"names":["factory","module","exports","define","amd","Dashboards","undefined","_modules","_registerModule","obj","path","args","fn","hasOwnProperty","apply","CustomEvent","win","dispatchEvent","detail","EditGlobals","U","merge","createElement","defined","renderContextButton","parentNode","editMode","contextButton","contextMenuOptions","options","contextMenu","className","classNames","contextMenuBtn","onclick","event","stopPropagation","onContextBtnClick","icon","src","text","contextMenuBtnText","textContent","setAttribute","lang","accessibility","button","renderCollapseHeader","parentElement","headerBtn","name","showToggle","onchange","isEnabled","isNested","isStandalone","accordion","collapsableContentHeader","header","accordionHeader","accordionHeaderBtn","renderToggle","enabledOnOffLabels","id","value","headerIcon","accordionHeaderIcon","collapsedElement","content","accordionContent","standaloneElement","hiddenElement","addEventListener","classList","toggle","outerElement","renderSelect","renderText","title","isLabel","iconsURLPrefix","customSelect","dropdown","btn","dropdownButton","btnContent","dropdownButtonContent","iconURL","find","selectOptions","item","placeholder","dropdownPointer","dropdownIcon","dropdownContent","i","iEnd","length","renderSelectElement","option","callback","selectOption","selectOptionBtn","customSelectButton","add","langKey","toggleContainer","type","role","ariaChecked","ariaLabel","off","toggleLabels","toggleWrapper","input","renderCheckbox","callbackFn","e","checked","slider","toggleSlider","preventDefault","on","textElem","labelFor","htmlFor","labelText","renderIcon","iconElem","style","mousedown","click","onmousedown","arguments","renderInput","toString","replace","target","renderTextarea","textarea","renderButton","getRendererFunction","select","collapse","checkbox","EditRenderer","MenuItem","constructor","menu","isActive","defaultOptions","container","setContainer","innerElement","setInnerElement","menuItem","itemsClassName","display","getValue","events","bind","update","activate","deactivate","viewFullscreen","fullScreen","board","fullscreen","MenuItemBindings","Menu","parent","isVisible","activeItems","items","initItems","itemsSchemas","itemSchema","itemConfig","optionsItems","push","setActiveItems","indexOf","j","jEnd","deactivateActiveItems","updateActiveItems","destroy","remove","css","iconURLPrefix","outline","outlineClassName","hide","setPosition","refreshOutline","x","y","guiElement","offset","guiElemCnt","toolbar","left","top","width","offsetWidth","height","offsetHeight","hideOutline","Cell","EditToolbar","GUIElement","fireEvent","objectEach","CellEditToolbar","getItemsConfig","dragDrop","enabled","cellEditToolbar","cell","onDragStart","settings","setEditOverlay","onCellOptions","menuDestroy","popup","confirmationPopup","show","confirmButton","onCellDestroy","context","cancelButton","closePopup","confirmDestroyCell","toolbars","customHTMLMode","filterOptionsAvailableInCustomHTMLMode","showToolbar","cellCnt","cellToolbar","cellOffsets","getOffsets","right","sidebar","highlightCell","row","cellId","resetEditedCell","hideToolbars","cells","editedCell","filter","setHighlight","cellEditHighlight","dashboardCellEditHighlightActive","editToolbar","editToolbarCellOutline","editToolbarCell","editToolbarItem","RowEditToolbar","getMenuItemsConfig","rowEditToolbar","onRowDestroy","confirmDestroyRow","offsetX","rowCnt","rowToolbar","rowOffsets","rowWidth","clientWidth","clientHeight","onRowOptions","rowId","resetEditedRow","editedRow","editToolbarRowOutline","editToolbarRow","AST","addEvent","parentDiv","iconsURL","createPopupContainer","closeButton","addCloseButton","match","forEach","eventName","closeButtonEvents","document","code","showPopup","toolbarClass","popupDiv","popupCloseButton","innerHTML","emptyHTML","removeAttribute","appendChild","BaseForm","close","cancelCallback","contentOptions","renderContent","contentContainer","popupContentContainer","popupContainer","marginTop","offsetTop","getBoundingClientRect","Math","abs","buttonContainer","popupButtonContainer","popupCancelBtn","popupConfirmBtn","call","ConfirmationPopup","error","closeSidebar","changedOptions","chartOptionsJSON","oldOptionsBuffer","waitingForConfirmation","component","editableOptions","getOptions","accordionContainer","accordionMenu","end","renderAccordion","accordionMenuButtonsContainer","confirmChanges","cancelChanges","updateOptions","propertyPath","currentChartOptionsLevel","currentOldChartOptionsBufferLevel","pathLength","currentLevel","parsedValue","JSON","parse","key","realChartOptions","chart","chartOptions","lastKey","renderNested","renderFunction","getEditableOptionValue","nestedOptions","accordionOptions","collapsedHeader","Object","keys","showCancelConfirmationPopup","oldOptions","discardChanges","confirmDiscardChanges","setTimeout","CellHTML","AccordionMenu","Bindings","Layout","SidebarPopup","components","componentsList","getComponentsList","detectRightSidebar","layoutWrapper","layoutsWrapper","removeClassNames","editSidebarShow","editSidebarRightShow","addClassNames","isRightSidebar","editSidebarRight","resizer","disableResizer","editCellContext","stopContextDetection","generateContent","renderHeader","addComponent","renderAddComponentsList","getType","mountedComponent","gridElement","gridWrapper","editGridItems","onMouseMove","rect","clientX","clientY","bottom","removeEventListener","onMouseUp","dropContext","layouts","layout","getElementId","copyId","parentContainerId","rows","newCell","onDrop","setEditCellContext","onDropNewComponent","componentOptions","addCell","onCellDragEnd","componentPromise","isEditOverlayActive","showToolbars","isContextDetectionActive","editSidebarTitle","componentTypes","componentList","componentName","prototype","getOptionsOnDrop","addLayout","contains","includes","editSidebar","newLayoutId","elements","tagName","EditContextMenu","insertBefore","initEvents","tools","contextButtonElement","setVisible","visible","updatePosition","ctxButton","offsetLeft","contextMenuItem","toggleEditMode","ContextDetection","isGUIElementOnParentEdge","mouseContext","side","visibleElements","getVisibleRows","getVisibleCells","lastElementIndex","getContextLevel","sideOffset","overlappedLevels","getOverlappingLevels","divOffset","lastOverlappedLevel","level","floor","getContext","mouseCellContext","mouseCellContextOffsets","getDimFromOffsets","leftSideX","topSideY","getParentCell","Globals","DragDrop","mockElement","dragMock","dropPointer","align","element","showDropPointer","hideDropPointer","setMockElementPosition","mouseEvent","dashBoundingRect","onDrag","onDragEnd","dragEndCallback","guiElementType","draggedCell","cursor","onCellDrag","onRowDrag","onRowDragEnd","setSnapPositions","contextDetails","dropPointerSize","rowDropOffset","updateDropPointer","dropContextRowOffsets","draggedRow","unmountRow","mountRow","getRowIndex","cellDropOffset","onCellDragCellCtx","mouseRowContext","onCellDragRowCtx","dropContextOffsets","rowLevelInfo","getRowLevelInfo","pointerHeight","rowLevel","index","rowLevels","dashOffsets","levelHeight","pointerWidth","contextCell","unmountCell","newRow","addRow","mountCell","dropContextCell","dropContextCellIndex","getCellIndex","nestedLayout","removeEvent","Resizer","fromJSON","json","resize","currentCell","isX","isY","startX","tempSiblingsWidth","addSnaps","snapWidth","snap","snapHeight","dashboardContainer","snapRight","resizeSnap","resizeSnapX","snapBottom","resizeSnapY","addResizeEvents","currentDimension","setTempWidthSiblings","cellContainer","rowLevelCells","flex","revertSiblingsAutoWidth","cellResize","mouseDownSnapX","mouseDownSnapY","mouseMoveSnap","mouseUpSnap","runReflow","ResizeObserver","resizeObserver","observe","unbind","window","parentRowWidth","newWidth","min","setSize","snaps","unobserve","toJSON","$class","styles","minWidth","minHeight","active","addComponentBtn","boardWrapper","guiEnabled","initLayout","isInitialized","editModeEnabled","contextPointer","contextDetectionPointer","createTools","editOverlay","FullScreen","boardContainer","init","mountedComponents","setCellEvents","setLayoutEvents","elementForEvents","onDetectContext","onContextConfirm","hideContextPointer","gui","setLayouts","layoutsJSON","setLayoutsFromJSON","guiOptions","layoutsOptions","layoutOptions","setRowEvents","k","kEnd","dashboardCnt","reflow","potentialCellContext","toolbarTypes","toolbarsToHide","toolbarsToShow","editTools","firstChild","addIconURL","editToolsBtn","cellContext","rowContext","parentCell","cellContextOffsets","showContextPointer","oldEditCellContext","oldContext","oldContextRow","cnt","isSet","editOverlayActive","DashboardClass","isOpen","classNamePrefix","open","unbindChange","ownerDocument","setButtonText","unbindFullscreenEvent","promise","requestFullscreen","catch","Error","Document","exitFullscreen","EditMode","Fullscreen","G"],"rangeMappings":";;;;;;;;","mappings":"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"}