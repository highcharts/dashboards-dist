/*
 Highcharts Dashboards v1.1.0 (2023-09-19)

 (c) 2009-2023 Highsoft AS

 License: www.highcharts.com/license
*/
'use strict';var v=v||{};v.scope={};v.ASSUME_ES5=!1;v.ASSUME_NO_NATIVE_MAP=!1;v.ASSUME_NO_NATIVE_SET=!1;v.SIMPLE_FROUND_POLYFILL=!1;v.ISOLATE_POLYFILLS=!1;v.defineProperty=v.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,l,d){if(b==Array.prototype||b==Object.prototype)return b;b[l]=d.value;return b};
v.getGlobal=function(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var l=0;l<b.length;++l){var d=b[l];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};v.global=v.getGlobal(this);v.polyfills={};v.propertyToPolyfillSymbol={};v.POLYFILL_PREFIX="$jscp$";v.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");
v.polyfill=function(b,l,d,c){l&&(v.ISOLATE_POLYFILLS?v.polyfillIsolated(b,l,d,c):v.polyfillUnisolated(b,l,d,c))};v.polyfillUnisolated=function(b,l){var d=v.global;b=b.split(".");for(var c=0;c<b.length-1;c++){var t=b[c];t in d||(d[t]={});d=d[t]}b=b[b.length-1];c=d[b];l=l(c);l!=c&&null!=l&&v.defineProperty(d,b,{configurable:!0,writable:!0,value:l})};
v.polyfillIsolated=function(b,l,d){var c=b.split(".");b=1===c.length;var t=c[0];t=!b&&t in v.polyfills?v.polyfills:v.global;for(var x=0;x<c.length-1;x++){var m=c[x];m in t||(t[m]={});t=t[m]}c=c[c.length-1];d=v.IS_SYMBOL_NATIVE&&"es6"===d?t[c]:null;l=l(d);null!=l&&(b?v.defineProperty(v.polyfills,c,{configurable:!0,writable:!0,value:l}):l!==d&&(v.propertyToPolyfillSymbol[c]=v.IS_SYMBOL_NATIVE?v.global.Symbol(c):v.POLYFILL_PREFIX+c,c=v.propertyToPolyfillSymbol[c],v.defineProperty(t,c,{configurable:!0,
writable:!0,value:l})))};v.polyfill("Array.prototype.includes",function(b){return b?b:function(b,d){var c=this;c instanceof String&&(c=String(c));var t=c.length;d=d||0;for(0>d&&(d=Math.max(d+t,0));d<t;d++){var x=c[d];if(x===b||Object.is(x,b))return!0}return!1}},"es7","es3");
(function(b){"object"===typeof module&&module.exports?(b["default"]=b,module.exports=b):"function"===typeof define&&define.amd?define("dashboards/modules/dashboards-plugin",["dashboards"],function(l){b(l);b.Dashboards=l;return b}):b("undefined"!==typeof Dashboards?Dashboards:void 0)})(function(b){function l(b,c,t,x){b.hasOwnProperty(c)||(b[c]=x.apply(null,t),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("DashboardsModuleLoaded",{detail:{path:c,module:b[c]}})))}b=b?b._modules:
{};l(b,"Dashboards/Plugins/DataGridSyncHandlers.js",[b["Core/Utilities.js"]],function(b){const {addEvent:c}=b;return{highlight:{emitter:["highlightEmitter",function(){if("DataGrid"===this.type){const {dataGrid:b,board:x}=this;if(x){const {dataCursor:m}=x,z=[];if(b)return z.push(c(b.container,"dataGridHover",a=>{const b=this.connector&&this.connector.table;if(b){a=a.row;const w=a.querySelector(`.highcharts-datagrid-cell[data-original-data="${a.dataset.rowXIndex}"]`);m.emitCursor(b,{type:"position",
row:parseInt(a.dataset.rowIndex,10),column:w?w.dataset.columnName:void 0,state:"dataGrid.hoverRow"})}})),z.push(c(b.container,"mouseout",()=>{const a=this.connector&&this.connector.table;a&&m.emitCursor(a,{type:"position",state:"dataGrid.hoverOut"})})),function(){z.forEach(a=>a())}}}}],handler:["highlightHandler",void 0,function(){const {board:b}=this,x=a=>{a=a.cursor;if("position"===a.type){var {row:b}=a;({dataGrid:a}=this);void 0!==b&&a&&(b=a.container.querySelector(`.highcharts-datagrid-row[data-row-index="${b}"]`))&&
(a.toggleRowHighlight(b),a.hoveredRow=b)}},m=()=>{const {dataGrid:a}=this;a&&a.toggleRowHighlight(void 0)},c=()=>{const {dataCursor:a}=b;if(a){var k=this.connector&&this.connector.table;k&&(a.addListener(k.id,"point.mouseOver",x),a.addListener(k.id,"point.mouseOut",m))}},a=()=>{const a=b.dataCursor,k=this.connector&&this.connector.table;k&&(a.addListener(k.id,"point.mouseOver",x),a.addListener(k.id,"point.mouseOut",m))};b&&(c(),this.on("setConnector",()=>a()),this.on("afterSetConnector",()=>c()))}]},
extremes:{handler:function(){const {board:b}=this,c=a=>{a=a.cursor;"position"===a.type&&this.dataGrid&&"number"===typeof(null===a||void 0===a?void 0:a.row)&&({row:a}=a,this.dataGrid.scrollToRow(a))},m=()=>{const {dataCursor:a}=b;if(a){var w=this.connector&&this.connector.table;w&&a.addListener(w.id,"xAxis.extremes.min",c)}},d=()=>{const a=this.connector&&this.connector.table,{dataCursor:w}=b;a&&w.removeListener(a.id,"xAxis.extremes.min",c)};b&&(m(),this.on("setConnector",()=>d()),this.on("afterSetConnector",
()=>m()))}},visibility:{handler:function(){const b=this,{board:c}=b,m=a=>{a=a.cursor;const k=b.dataGrid;k&&"position"===a.type&&a.column&&k.update({columns:{[a.column]:{show:"series.hide"!==a.state}}})},d=()=>{const {dataCursor:a}=c;if(a){var b=this.connector&&this.connector.table;b&&(a.addListener(b.id,"series.show",m),a.addListener(b.id,"series.hide",m))}},a=()=>{const a=this.connector&&this.connector.table,{dataCursor:b}=c;a&&(b.removeListener(a.id,"series.show",m),b.removeListener(a.id,"series.hide",
m))};c&&(d(),this.on("setConnector",()=>a()),this.on("afterSetConnector",()=>d()))}}}});l(b,"Dashboards/Plugins/DataGridComponent.js",[b["Dashboards/Components/Component.js"],b["Data/Converters/DataConverter.js"],b["Dashboards/Plugins/DataGridSyncHandlers.js"],b["Core/Utilities.js"]],function(b,c,t,x){var m=this&&this.__awaiter||function(a,b,B,p){function f(a){return a instanceof B?a:new B(function(e){e(a)})}return new (B||(B=Promise))(function(r,e){function g(g){try{n(p.next(g))}catch(u){e(u)}}function h(g){try{n(p["throw"](g))}catch(u){e(u)}}
function n(e){e.done?r(e.value):f(e.value).then(g,h)}n((p=p.apply(a,b||[])).next())})};const {diffObjects:d,merge:a,uniqueKey:w}=x;class k extends b{static onUpdate(a,b){if(a=a.target){var f=a.closest(".highcharts-datagrid-row"),r=a.closest(".highcharts-datagrid-cell");const k=new c;f&&f instanceof HTMLElement&&r&&r instanceof HTMLElement&&(f=f.dataset.rowIndex,{columnName:r}=r.dataset,void 0!==f&&void 0!==r&&(b=b.table))&&(a=k.asGuessedType(a.value),a instanceof Date&&(a=a.toString()),b.setCell(r,
parseInt(f,10),a))}}static fromJSON(b,r){const f=b.options,c=JSON.parse(b.options.dataGridOptions||"");r=new k(r,a(f,{dataGridOptions:c,syncHandlers:k.syncHandlers}));r.emit({type:"fromJSON",json:b});return r}constructor(b,r){r=a(k.defaultOptions,r);super(b,r);this.connectorListeners=[];this.options=r;this.type="DataGrid";this.options.dataGridClassName&&this.contentElement.classList.add(this.options.dataGridClassName);this.options.dataGridID&&(this.contentElement.id=this.options.dataGridID);this.sync=
new k.Sync(this,this.syncHandlers);this.dataGridOptions=this.options.dataGridOptions||{};this.innerResizeTimeouts=[];this.on("afterSetConnector",a=>{this.disableEditingModifiedColumns(a.connector)})}onTableChanged(){var a;!this.dataGrid||(null===(a=this.dataGrid)||void 0===a?0:a.cellInputEl)||this.dataGrid.update({dataTable:this.filterColumns()})}disableEditingModifiedColumns(a){var b;a=this.getColumnOptions(a);null===(b=this.dataGrid)||void 0===b?void 0:b.update({columns:a})}getColumnOptions(a){a=
a.options.dataModifier;if(!a||"Math"!==a.type)return{};a=a.columnFormulas;if(!a)return{};const b={};for(let f=0,r=a.length;f<r;++f)b[a[f].column]={editable:!1};return b}load(){const a=Object.create(null,{load:{get:()=>super.load}});return m(this,void 0,void 0,function*(){this.emit({type:"load"});yield a.load.call(this);if(this.connector&&!this.connectorListeners.length){const a=this.connectorListeners;a.push(this.connector.on("afterLoad",a=>{a.table&&this.connector&&this.connector.table.setColumns(a.table.getColumns())}));
a.push(this.connector.table.on("afterSetCell",a=>{var b=this.dataGrid;let f=!0;if(b){b=b.rowElements[a.rowIndex];let r=[];b&&(r=Array.prototype.slice.call(b.childNodes));r.forEach(e=>{if(0<e.childElementCount){var g=e.childNodes[0];g="string"===typeof a.cellValue?g.value:+g.value;e.dataset.columnName===a.columnName&&g===a.cellValue&&(f=!1)}})}f?this.update({}):void 0}))}this.emit({type:"afterLoad"});return this})}render(){super.render();this.dataGrid||(this.dataGrid=this.constructDataGrid());this.connector&&
this.dataGrid&&this.dataGrid.dataTable.modified!==this.connector.table.modified&&this.dataGrid.update({dataTable:this.filterColumns()});this.sync.start();this.emit({type:"afterRender"});this.setupConnectorUpdate();return this}resize(a,b){this.dataGrid&&super.resize(a,b)}update(a){const b=Object.create(null,{update:{get:()=>super.update}});var f;return m(this,void 0,void 0,function*(){if((null===(f=a.connector)||void 0===f?void 0:f.id)!==this.connectorId){const a=this.connectorListeners;for(let b=
0,f=a.length;b<f;++b)a[b]();a.length=0}yield b.update.call(this,a);this.dataGrid&&(this.filterAndAssignSyncOptions(t),this.dataGrid.update(this.options.dataGridOptions||{}));this.emit({type:"afterUpdate"})})}constructDataGrid(){var b,r;if(k.DataGridConstructor){const f=this.connector?this.getColumnOptions(this.connector):{};return this.dataGrid=new k.DataGridConstructor(this.contentElement,Object.assign(Object.assign({},this.options.dataGridOptions),{dataTable:(null===(b=this.options.dataGridOptions)||
void 0===b?void 0:b.dataTable)||this.filterColumns(),columns:a(f,null===(r=this.options.dataGridOptions)||void 0===r?void 0:r.columns)}))}throw Error("DataGrid not connected.");}setupConnectorUpdate(){const {connector:a,dataGrid:b}=this;if(a&&b)b.on("cellClick",b=>{"input"in b&&b.input.addEventListener("keyup",b=>this.options.onUpdate(b,a))})}filterColumns(){var a,b=null===(a=this.connector)||void 0===a?void 0:a.table.modified;const c=this.options.visibleColumns;if(b){if(null===c||void 0===c||!c.length)return b;
a=b.getColumnNames().filter(a=>0<(null===c||void 0===c?void 0:c.length)&&!c.includes(a));b=b.clone();b.deleteColumns(a);return b}}toJSON(){var a=JSON.stringify(this.options.dataGridOptions);const b=super.toJSON();a=Object.assign(Object.assign({},b),{options:Object.assign(Object.assign({},b.options),{dataGridOptions:a})});this.emit({type:"toJSON",json:a});return a}getOptions(){return Object.assign(Object.assign({},d(this.options,k.defaultOptions)),{type:"DataGrid"})}destroy(){var a;null===(a=this.dataGrid)||
void 0===a?void 0:a.containerResizeObserver.disconnect();super.destroy()}}k.syncHandlers=t;k.defaultOptions=a(b.defaultOptions,{dataGridClassName:"dataGrid-container",dataGridID:"dataGrid-"+w(),dataGridOptions:{},editableOptions:[{name:"connectorName",propertyPath:["connector","id"],type:"select"}],syncHandlers:t,onUpdate:k.onUpdate});return k});l(b,"Dashboards/Plugins/DataGridPlugin.js",[b["Dashboards/Plugins/DataGridComponent.js"]],function(b){return{custom:{connectDataGrid:function(c){b.DataGridConstructor=
c}},name:"DataGrid.DashboardsPlugin",onRegister:function(c){({ComponentRegistry:c}=c);c.registerComponent("DataGrid",b)},onUnregister:function(){}}});l(b,"Dashboards/Plugins/HighchartsSyncHandlers.js",[b["Core/Utilities.js"]],function(b){function c(b,c){({ranges:c}=c);return c&&(c=c.reduce((b,a)=>{a.minValue>b.minValue&&(b=a);return b},c[0]),b=b.getRowIndexBy(c.column,c.minValue))?b:0}const {addEvent:d}=b;return{extremes:{emitter:function(){if("Highcharts"===this.type){const b=this,c=[];this.on("afterRender",
()=>{const {chart:m,connector:a,board:w}=b,k=a&&a.table,{dataCursor:f}=w;if(k&&m){const a=a=>{var b=!!a.resetSelection;if((!a.trigger||a.trigger&&"dashboards-sync"!==a.trigger)&&!b){var g=a.target;const e=g.series.filter(a=>k.hasColumns([a.name])),[n]=e.length?e:g.series;if(n){b=n.points.filter(a=>a.isInside||!1);const h={type:"position",state:`${g.coll}.extremes.min`},u={type:"position",state:`${g.coll}.extremes.max`};e.length&&"xAxis"===g.coll&&b.length&&(g=g.dateTime&&k.hasColumns(["x"])?"x":n.name,
h.row=b[0].index,h.column=g,u.row=b[b.length-1].index,u.column=g);f.emitCursor(k,h,a,!0).emitCursor(k,u,a,!0)}}},b=()=>m.axes.map(b=>d(b,"afterSetExtremes",a));let w=b();const x=()=>{w.forEach(a=>{a()});w=[]};c.push(d(m,"selection",a=>{a.resetSelection&&(x(),f.emitCursor(k,{type:"position",state:"chart.zoomOut"},a),w.push(...b()))}));c.push(()=>{f.remitCursor(k.id,{type:"position",state:"xAxis.extremes.min"});f.remitCursor(k.id,{type:"position",state:"xAxis.extremes.max"});x()})}});return function(){c.forEach(b=>
b())}}},handler:function(){const {chart:b,board:c}=this;b&&c&&["xAxis","yAxis"].forEach(d=>{const a=[],w=a=>{const {cursor:c,event:f}=a;if("position"===c.type){const a=f&&f.target;if(a&&b){let c=!1;b[d].forEach(b=>{a.coll===b.coll&&a!==b&&null!==a.min&&null!==a.max&&b.max!==a.max&&b.min!==a.min&&(b.setExtremes(a.min,a.max,!1,void 0,{trigger:"dashboards-sync"}),c=!0)});c&&!b.resetZoomButton&&b.showResetZoom();b.redraw()}}},k=()=>{const {dataCursor:f}=c,{connector:k}=this;if(k){const {table:c}=k;f.addListener(c.id,
`${d}.extremes.min`,w);f.addListener(c.id,`${d}.extremes.max`,w);const r=()=>{b.zoomOut();setTimeout(()=>{this.element.querySelectorAll(".highcharts-reset-zoom").forEach(a=>{a.remove()})})};f.addListener(c.id,"chart.zoomOut",r);a.push(()=>{f.removeListener(c.id,`${d}.extremes.min`,w);f.removeListener(c.id,`${d}.extremes.max`,w);f.removeListener(c.id,"chart.zoomOut",r)})}},f=()=>{a.forEach(a=>a())};c&&(k(),this.on("setConnector",()=>f()),this.on("afterSetConnector",()=>k()))})}},highlight:{emitter:["highlightEmitter",
function(){if("Highcharts"===this.type){const {chart:b,board:d}=this;if(d){const {dataCursor:m}=d;this.on("afterRender",()=>{const a=this.connector&&this.connector.table;b&&b.series&&a&&b.series.forEach(b=>{b.update({point:{events:{mouseOver:function(){let k=0;const f=a.getModifier();f&&"Range"===f.options.type&&(k=c(a,f.options));m.emitCursor(a,{type:"position",row:k+this.index,column:b.name,state:"point.mouseOver"})},mouseOut:function(){let k=0;const f=a.getModifier();f&&"Range"===f.options.type&&
(k=c(a,f.options));m.emitCursor(a,{type:"position",row:k+this.index,column:b.name,state:"point.mouseOut"})}}}})})});return function(){b&&b.series&&b.series.forEach(a=>{a.update({point:{events:{mouseOver:void 0,mouseOut:void 0}}})})}}}}],handler:function(){const {chart:b,board:d}=this,t=a=>{const f=this.connector&&this.connector.table;if(f){var k=0,d=f.getModifier();d&&"Range"===d.options.type&&(k=c(f,d.options));if(b&&b.series.length){const c=a.cursor;"position"===c.type&&([a]=1<b.series.length&&
c.column?b.series.filter(a=>a.name===c.column):b.series,a&&a.visible&&void 0!==c.row&&(k=a.points[c.row-k])&&b.tooltip&&b.tooltip.refresh(k))}}},a=()=>{b&&b.series.length&&b.tooltip&&b.tooltip.hide()},w=()=>{const {dataCursor:b}=d;if(b){const c=this.connector&&this.connector.table;c&&(b.addListener(c.id,"point.mouseOver",t),b.addListener(c.id,"dataGrid.hoverRow",t),b.addListener(c.id,"point.mouseOut",a),b.addListener(c.id,"dataGrid.hoverOut",a))}},k=()=>{const b=this.connector&&this.connector.table;
b&&(d.dataCursor.removeListener(b.id,"point.mouseOver",t),d.dataCursor.removeListener(b.id,"dataGrid.hoverRow",t),d.dataCursor.removeListener(b.id,"point.mouseOut",a),d.dataCursor.removeListener(b.id,"dataGrid.hoverOut",a))};d&&(w(),this.on("setConnector",()=>k()),this.on("afterSetConnector",()=>w()))}},visibility:{emitter:function(){if("Highcharts"===this.type){const b=this;return this.on("afterRender",()=>{const {chart:c,connector:d,board:a}=b,w=d&&d.table;if(w&&a&&c){const {dataCursor:b}=a,{series:f}=
c;f.forEach(a=>{a.update({events:{show:function(){b.emitCursor(w,{type:"position",state:"series.show",column:this.name})},hide:function(){b.emitCursor(w,{type:"position",state:"series.hide",column:this.name})}}})})}})}},handler:function(){const b=this,{board:c}=this,d=(a,b)=>{for(const c of a)if(c.name===b)return c},a=a=>{const c=b.chart;c&&"position"===a.cursor.type&&void 0!==a.cursor.column&&(a=d(c.series,a.cursor.column))&&a.setVisible(!0,!0)},w=a=>{const c=b.chart;c&&"position"===a.cursor.type&&
void 0!==a.cursor.column&&(a=d(c.series,a.cursor.column))&&a.setVisible(!1,!0)},k=()=>{const {dataCursor:b}=c;if(b){var f=this.connector&&this.connector.table;f&&(b.addListener(f.id,"series.show",a),b.addListener(f.id,"series.hide",w))}},f=()=>{const b=this.connector&&this.connector.table;b&&(c.dataCursor.removeListener(b.id,"series.show",a),c.dataCursor.removeListener(b.id,"series.hide",w))};c&&(k(),this.on("setConnector",()=>f()),this.on("afterSetConnector",()=>k()))}}}});l(b,"Dashboards/Plugins/HighchartsComponent.js",
[b["Dashboards/Components/Component.js"],b["Data/Converters/DataConverter.js"],b["Data/DataTable.js"],b["Dashboards/Globals.js"],b["Dashboards/Plugins/HighchartsSyncHandlers.js"],b["Core/Utilities.js"]],function(b,c,t,x,m,l){var a=this&&this.__awaiter||function(a,b,e,c){function g(a){return a instanceof e?a:new e(function(b){b(a)})}return new (e||(e=Promise))(function(e,h){function u(a){try{f(c.next(a))}catch(y){h(y)}}function n(a){try{f(c["throw"](a))}catch(y){h(y)}}function f(a){a.done?e(a.value):
g(a.value).then(u,n)}f((c=c.apply(a,b||[])).next())})};const {addEvent:d,createElement:k,error:f,diffObjects:r,isString:z,merge:p,splat:C,uniqueKey:q}=l;class e extends b{static fromJSON(a,b){const g=a.options,h=JSON.parse(a.options.chartOptions||"{}");b=new e(b,p(g,{chartOptions:h,syncHandlers:e.syncHandlers}));b.emit({type:"fromJSON",json:a});return b}constructor(a,b){b=p(e.defaultOptions,b);super(a,b);this.options=b;this.chartConstructor=this.options.chartConstructor;this.type="Highcharts";this.chartContainer=
k("figure",void 0,void 0,this.contentElement,!0);this.setOptions();this.sync=new e.Sync(this,this.syncHandlers);this.chartOptions=p(this.options.chartOptions||{chart:{}},{tooltip:{}});if(this.connector)this.connector.on("afterLoad",a=>{a.table&&this.connector&&this.connector.table.setColumns(a.table.getColumns())});this.innerResizeTimeouts=[]}onTableChanged(){this.updateSeries()}load(){const b=Object.create(null,{load:{get:()=>super.load}});return a(this,void 0,void 0,function*(){this.emit({type:"load"});
yield b.load.call(this);this.emit({type:"afterLoad"});return this})}render(){super.render();this.chart=this.getChart();this.updateSeries();this.sync.start();this.emit({type:"afterRender"});this.setupConnectorUpdate();return this}resize(a,b){for(super.resize(a,b);this.innerResizeTimeouts.length;)(a=this.innerResizeTimeouts.pop())&&clearTimeout(a);this.innerResizeTimeouts.push(setTimeout(()=>{this.chart&&this.chart.setSize(null,this.contentElement.clientHeight,!1)},33));return this}setupConnectorUpdate(){const {connector:a,
chart:b}=this;a&&b&&this.options.allowConnectorUpdate&&b.series.forEach(b=>{b.points.forEach(b=>{d(b,"drag",()=>{this.onChartUpdate(b,a)})})})}setOptions(){this.options.chartClassName&&this.chartContainer.classList.add(this.options.chartClassName);this.options.chartID&&(this.chartContainer.id=this.options.chartID)}onChartUpdate(a,b){b=b.table;const g=a.series.name,e=a.index;a=(new c).asNumber(a.y);b.setCell(g,e,a)}update(b,e=!0){const g=Object.create(null,{update:{get:()=>super.update}});return a(this,
void 0,void 0,function*(){yield g.update.call(this,b,!1);this.setOptions();this.filterAndAssignSyncOptions(m);this.chart&&this.chart.update(p(this.options.chartOptions)||{});this.emit({type:"afterUpdate"});e&&this.render()})}updateSeries(){var a;if(this.chart&&this.connector){this.presentationTable=this.presentationModifier?this.connector.table.modified.clone():this.connector.table;const {id:b}=this.connector.table,{chart:e}=this;this.presentationModifier&&(this.presentationTable=this.presentationModifier.modifyTable(this.presentationTable).modified);
const g=this.presentationTable,c=null===(a=g.getModifier())||void 0===a?void 0:a.options;a=g.modified.getColumnNames();const f=this.options.columnAssignment||this.getDefaultColumnAssignment(a),k={};this.emit({type:"afterPresentationModifier",table:g});const d=g.modified.getColumnNames().filter(a=>this.activeGroup&&!1===this.activeGroup.getSharedState().getColumnVisibility(a)||!f[a]?!1:"x"===f[a]?(k[a]=a,!1):!0);d.map((a,g)=>{for(var h,u=0;u<e.series.length;){const a=e.series[u],c=a.options.id===`${b}-series-${g}`,
h=-1!==d.indexOf(a.name);u++;if(h&&c)return a;!h&&c&&a.destroy()}u=!("Math"===(null===c||void 0===c?void 0:c.type)&&(null===(h=c.columnFormulas)||void 0===h?0:h.some(b=>b.column===a)));return e.addSeries({name:a,id:`${b}-series-${g}`,dragDrop:{draggableY:u}},!1)}).forEach(a=>{var b=Object.keys(k)[0];const e=new t({columns:g.modified.getColumns([b,a.name])});e.renameColumn(a.name,"y");b&&e.renameColumn(b,"x");b=e.getRowObjects().reduce((a,b)=>{a.push([b.x,b.y]);return a},[]);a.setData(b)})}}getChart(){return this.chart||
this.createChart()}getDefaultColumnAssignment(a=[]){var b;const e={};for(let g=0,c=a.length;g<c;++g)if(e[a[g]]="y",0===g){const c=null===(b=this.presentationTable)||void 0===b?void 0:b.getColumn(a[g],!0);c&&z(c[0])&&(e[a[g]]="x")}return e}createChart(){const a=e.charter||x.win.Highcharts;if("chart"!==this.chartConstructor){const b=a[this.chartConstructor];if(b)try{return b(this.chartContainer,this.chartOptions)}catch(n){f("The Highcharts component is misconfigured: `"+this.cell.id+"`")}}if("function"!==
typeof a.chart)throw Error("Chart constructor not found");return this.chart=a.chart(this.chartContainer,this.chartOptions)}registerChartEvents(){if(this.chart&&this.chart.options){const a=this.chart.options;"chart series yAxis xAxis colorAxis annotations navigation".split(" ").map(b=>{let e=a[b]||{};!Array.isArray(e)&&e.events&&(e=[e]);return e&&"object"===typeof e&&Array.isArray(e)?e.reduce((a,e,g)=>{e&&e.events&&(a[e.id||`${b}-${g}`]=e.events);return a},{})||{}:{}}).forEach(a=>{Object.keys(a).forEach(b=>
{const e=a[b];Object.keys(e).forEach(a=>{this.callbackRegistry.addCallback(`${b}-${a}`,{type:"seriesEvent",func:e[a]})})})})}}setConnector(a){var b;const e=this.chart;if(this.connector&&e&&e.series&&this.connector.table.id!==(null===a||void 0===a?void 0:a.table.id)){const a=this.connector.table.id;for(let g=e.series.length-1;0<=g;g--){const c=e.series[g];-1!==(null===(b=c.options.id)||void 0===b?void 0:b.indexOf(a))&&c.remove(!1)}}super.setConnector(a);return this}toJSON(){var a=JSON.stringify(this.options.chartOptions);
const b=this.options.chartConstructor;this.registerChartEvents();const e=super.toJSON();a=Object.assign(Object.assign({},e),{type:"Highcharts",options:Object.assign(Object.assign({},e.options),{chartOptions:a,chartConstructor:b,type:"Highcharts",sync:{}})});this.emit({type:"toJSON",json:a});return a}getOptions(){return Object.assign(Object.assign({},r(this.options,e.defaultOptions)),{type:"Highcharts"})}getEditableOptions(){var a;const b=this.options,e=this.chart,c=e&&e.options,u=c&&(null===(a=c.chart)||
void 0===a?void 0:a.type)||"line";return p(b,{chartOptions:c},{chartOptions:{yAxis:C(e&&e.yAxis[0].options),xAxis:C(e&&e.xAxis[0].options),plotOptions:{series:(c&&c.plotOptions||{})[u]}}})}getEditableOptionValue(a){if(a)return 1===a.length&&"chartOptions"===a[0]?JSON.stringify(this.options.chartOptions,null,2):super.getEditableOptionValue.call(this,a)}}e.syncHandlers=m;e.defaultOptions=p(b.defaultOptions,{allowConnectorUpdate:!0,className:[b.defaultOptions.className,`${b.defaultOptions.className}-highcharts`].join(" "),
chartClassName:"chart-container",chartID:"chart-"+q(),chartOptions:{chart:{styledMode:!0,zooming:{mouseWheel:{enabled:!1}}},series:[]},chartConstructor:"",editableOptions:(b.defaultOptions.editableOptions||[]).concat([{name:"chartOptions",type:"nested",nestedOptions:[{name:"chart",options:[{name:"title",propertyPath:["chartOptions","title","text"],type:"input"},{name:"subtitle",propertyPath:["chartOptions","subtitle","text"],type:"input"},{name:"type",propertyPath:["chartOptions","chart","type"],
type:"select",selectOptions:[{name:"column",iconURL:"series-types/icon-column.svg"},{name:"line",iconURL:"series-types/icon-line.svg"},{name:"scatter",iconURL:"series-types/icon-scatter.svg"},{name:"pie",iconURL:"series-types/icon-pie.svg"}]}]},{name:"xAxis",options:[{name:"title",propertyPath:["chartOptions","xAxis","title","text"],type:"input"},{name:"type",propertyPath:["chartOptions","xAxis","type"],type:"select",selectOptions:[{name:"linear"},{name:"datetime"},{name:"logarithmic"}]}]},{name:"yAxis",
options:[{name:"title",propertyPath:["chartOptions","yAxis","title","text"],type:"input"},{name:"type",propertyPath:["chartOptions","yAxis","type"],type:"select",selectOptions:[{name:"linear"},{name:"datetime"},{name:"logarithmic"}]}]},{name:"legend",showToggle:!0,propertyPath:["chartOptions","legend","enabled"],options:[{name:"align",propertyPath:["chartOptions","legend","align"],type:"select",selectOptions:[{name:"left"},{name:"center"},{name:"right"}]}]},{name:"tooltip",showToggle:!0,propertyPath:["chartOptions",
"tooltip","enabled"],options:[{name:"split",propertyPath:["chartOptions","tooltip","split"],type:"toggle"}]},{name:"dataLabels",propertyPath:["chartOptions","plotOptions","series","dataLabels","enabled"],showToggle:!0,options:[{name:"align",propertyPath:["chartOptions","plotOptions","series","dataLabels","align"],type:"select",selectOptions:[{name:"left"},{name:"center"},{name:"right"}]}]},{name:"credits",showToggle:!0,propertyPath:["chartOptions","credits","enabled"],options:[{name:"name",propertyPath:["chartOptions",
"credits","text"],type:"input"},{name:"url",propertyPath:["chartOptions","credits","href"],type:"input"}]}]},{name:"chartConfig",propertyPath:["chartOptions"],type:"textarea"},{name:"chartClassName",propertyPath:["chartClassName"],type:"input"},{name:"chartID",propertyPath:["chartID"],type:"input"}]),syncHandlers:m,editableOptionsBindings:p(b.defaultOptions.editableOptionsBindings,{skipRedraw:["chartOptions","chartConfig"]}),columnAssignment:void 0});return e});l(b,"Core/Chart/ChartDefaults.js",[],
function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}});l(b,"Core/Color/Color.js",[b["Core/Globals.js"],b["Core/Utilities.js"]],function(b,
c){const {isNumber:d,merge:l,pInt:m}=c;class z{static parse(a){return a?new z(a):z.None}constructor(a){this.rgba=[NaN,NaN,NaN,NaN];this.input=a;const c=b.Color;if(c&&c!==z)return new c(a);this.init(a)}init(a){let b;let c;if("object"===typeof a&&"undefined"!==typeof a.stops)this.stops=a.stops.map(a=>new z(a[1]));else if("string"===typeof a){this.input=a=z.names[a.toLowerCase()]||a;if("#"===a.charAt(0)){var f=a.length;var d=parseInt(a.substr(1),16);7===f?b=[(d&16711680)>>16,(d&65280)>>8,d&255,1]:4===
f&&(b=[(d&3840)>>4|(d&3840)>>8,(d&240)>>4|d&240,(d&15)<<4|d&15,1])}if(!b)for(d=z.parsers.length;d--&&!b;)c=z.parsers[d],(f=c.regex.exec(a))&&(b=c.parse(f))}b&&(this.rgba=b)}get(a){const b=this.input,c=this.rgba;if("object"===typeof b&&"undefined"!==typeof this.stops){const c=l(b);c.stops=[].slice.call(c.stops);this.stops.forEach((b,d)=>{c.stops[d]=[c.stops[d][0],b.get(a)]});return c}return c&&d(c[0])?"rgb"===a||!a&&1===c[3]?"rgb("+c[0]+","+c[1]+","+c[2]+")":"a"===a?`${c[3]}`:"rgba("+c.join(",")+")":
b}brighten(a){const b=this.rgba;if(this.stops)this.stops.forEach(function(b){b.brighten(a)});else if(d(a)&&0!==a)for(let c=0;3>c;c++)b[c]+=m(255*a),0>b[c]&&(b[c]=0),255<b[c]&&(b[c]=255);return this}setOpacity(a){this.rgba[3]=a;return this}tweenTo(a,b){const c=this.rgba,f=a.rgba;if(!d(c[0])||!d(f[0]))return a.input||"none";a=1!==f[3]||1!==c[3];return(a?"rgba(":"rgb(")+Math.round(f[0]+(c[0]-f[0])*(1-b))+","+Math.round(f[1]+(c[1]-f[1])*(1-b))+","+Math.round(f[2]+(c[2]-f[2])*(1-b))+(a?","+(f[3]+(c[3]-
f[3])*(1-b)):"")+")"}}z.names={white:"#ffffff",black:"#000000"};z.parsers=[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(a){return[m(a[1]),m(a[2]),m(a[3]),parseFloat(a[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(a){return[m(a[1]),m(a[2]),m(a[3]),1]}}];z.None=new z("");"";return z});l(b,"Core/Color/Palettes.js",[],function(){return{colors:"#2caffe #544fc5 #00e272 #fe6a35 #6b8abc #d568fb #2ee0ca #fa4b42 #feb56a #91e8e1".split(" ")}});
l(b,"Core/Time.js",[b["Core/Globals.js"],b["Core/Utilities.js"]],function(b,c){const {win:d}=b,{defined:l,error:m,extend:z,isObject:a,merge:w,objectEach:k,pad:f,pick:r,splat:B,timeUnits:p}=c,C=b.isSafari&&d.Intl&&d.Intl.DateTimeFormat.prototype.formatRange,q=b.isSafari&&d.Intl&&!d.Intl.DateTimeFormat.prototype.formatRange;class e{constructor(a){this.options={};this.variableTimezone=this.useUTC=!1;this.Date=d.Date;this.getTimezoneOffset=this.timezoneOffsetFunction();this.update(a)}get(a,b){if(this.variableTimezone||
this.timezoneOffset){const e=b.getTime(),c=e-this.getTimezoneOffset(b);b.setTime(c);a=b["getUTC"+a]();b.setTime(e);return a}return this.useUTC?b["getUTC"+a]():b["get"+a]()}set(a,b,e){if(this.variableTimezone||this.timezoneOffset){if("Milliseconds"===a||"Seconds"===a||"Minutes"===a&&0===this.getTimezoneOffset(b)%36E5)return b["setUTC"+a](e);var c=this.getTimezoneOffset(b);c=b.getTime()-c;b.setTime(c);b["setUTC"+a](e);a=this.getTimezoneOffset(b);c=b.getTime()+a;return b.setTime(c)}return this.useUTC||
C&&"FullYear"===a?b["setUTC"+a](e):b["set"+a](e)}update(a={}){const b=r(a.useUTC,!0);this.options=a=w(!0,this.options,a);this.Date=a.Date||d.Date||Date;this.timezoneOffset=(this.useUTC=b)&&a.timezoneOffset||void 0;this.getTimezoneOffset=this.timezoneOffsetFunction();this.variableTimezone=b&&!(!a.getTimezoneOffset&&!a.timezone)}makeTime(a,b,e,c,u,d){let g,h,f;this.useUTC?(g=this.Date.UTC.apply(0,arguments),h=this.getTimezoneOffset(g),g+=h,f=this.getTimezoneOffset(g),h!==f?g+=f-h:h-36E5!==this.getTimezoneOffset(g-
36E5)||q||(g-=36E5)):g=(new this.Date(a,b,r(e,1),r(c,0),r(u,0),r(d,0))).getTime();return g}timezoneOffsetFunction(){const a=this,b=this.options,e=b.getTimezoneOffset,c=b.moment||d.moment;if(!this.useUTC)return function(a){return 6E4*(new Date(a.toString())).getTimezoneOffset()};if(b.timezone){if(c)return function(a){return 6E4*-c.tz(a,b.timezone).utcOffset()};m(25)}return this.useUTC&&e?function(a){return 6E4*e(a.valueOf())}:function(){return 6E4*(a.timezoneOffset||0)}}dateFormat(a,e,c){if(!l(e)||
isNaN(e))return b.defaultOptions.lang&&b.defaultOptions.lang.invalidDate||"";a=r(a,"%Y-%m-%d %H:%M:%S");const g=this;var d=new this.Date(e);const h=this.get("Hours",d),n=this.get("Day",d),q=this.get("Date",d),m=this.get("Month",d),t=this.get("FullYear",d),p=b.defaultOptions.lang,y=p&&p.weekdays,w=p&&p.shortWeekdays;d=z({a:w?w[n]:y[n].substr(0,3),A:y[n],d:f(q),e:f(q,2," "),w:n,b:p.shortMonths[m],B:p.months[m],m:f(m+1),o:m+1,y:t.toString().substr(2,2),Y:t,H:f(h),k:h,I:f(h%12||12),l:h%12||12,M:f(this.get("Minutes",
d)),p:12>h?"AM":"PM",P:12>h?"am":"pm",S:f(d.getSeconds()),L:f(Math.floor(e%1E3),3)},b.dateFormats);k(d,function(b,c){for(;-1!==a.indexOf("%"+c);)a=a.replace("%"+c,"function"===typeof b?b.call(g,e):b)});return c?a.substr(0,1).toUpperCase()+a.substr(1):a}resolveDTLFormat(b){return a(b,!0)?b:(b=B(b),{main:b[0],from:b[1],to:b[2]})}getTimeTicks(a,b,e,c){const g=this,d=[],f={};var h=new g.Date(b);const n=a.unitRange,q=a.count||1;let k;c=r(c,1);if(l(b)){g.set("Milliseconds",h,n>=p.second?0:q*Math.floor(g.get("Milliseconds",
h)/q));n>=p.second&&g.set("Seconds",h,n>=p.minute?0:q*Math.floor(g.get("Seconds",h)/q));n>=p.minute&&g.set("Minutes",h,n>=p.hour?0:q*Math.floor(g.get("Minutes",h)/q));n>=p.hour&&g.set("Hours",h,n>=p.day?0:q*Math.floor(g.get("Hours",h)/q));n>=p.day&&g.set("Date",h,n>=p.month?1:Math.max(1,q*Math.floor(g.get("Date",h)/q)));if(n>=p.month){g.set("Month",h,n>=p.year?0:q*Math.floor(g.get("Month",h)/q));var m=g.get("FullYear",h)}n>=p.year&&g.set("FullYear",h,m-m%q);n===p.week&&(m=g.get("Day",h),g.set("Date",
h,g.get("Date",h)-m+c+(m<c?-7:0)));m=g.get("FullYear",h);c=g.get("Month",h);const a=g.get("Date",h),u=g.get("Hours",h);b=h.getTime();!g.variableTimezone&&g.useUTC||!l(e)||(k=e-b>4*p.month||g.getTimezoneOffset(b)!==g.getTimezoneOffset(e));b=h.getTime();for(h=1;b<e;)d.push(b),b=n===p.year?g.makeTime(m+h*q,0):n===p.month?g.makeTime(m,c+h*q):!k||n!==p.day&&n!==p.week?k&&n===p.hour&&1<q?g.makeTime(m,c,a,u+h*q):b+n*q:g.makeTime(m,c,a+h*q*(n===p.day?1:7)),h++;d.push(b);n<=p.hour&&1E4>d.length&&d.forEach(function(a){0===
a%18E5&&"000000000"===g.dateFormat("%H%M%S%L",a)&&(f[a]="day")})}d.info=z(a,{higherRanks:f,totalRange:n*q});return d}getDateFormat(a,b,e,c){const g=this.dateFormat("%m-%d %H:%M:%S.%L",b),h={millisecond:15,second:12,minute:9,hour:6,day:3};let d,f="millisecond";for(d in p){if(a===p.week&&+this.dateFormat("%w",b)===e&&"00:00:00.000"===g.substr(6)){d="week";break}if(p[d]>a){d=f;break}if(h[d]&&g.substr(h[d])!=="01-01 00:00:00.000".substr(h[d]))break;"week"!==d&&(f=d)}return this.resolveDTLFormat(c[d]).main}}
"";return e});l(b,"Core/Defaults.js",[b["Core/Chart/ChartDefaults.js"],b["Core/Color/Color.js"],b["Core/Globals.js"],b["Core/Color/Palettes.js"],b["Core/Time.js"],b["Core/Utilities.js"]],function(b,c,t,l,m,z){const {isTouchDevice:a,svg:d}=t,{merge:k}=z,f={colors:l.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),decimalPoint:".",numericSymbols:"kMGTPE".split(""),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:b,title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:"",align:"center",widthAdjust:-44},
caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",
textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:d,
borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %e %b, %H:%M:%S.%L",second:"%A, %e %b, %H:%M:%S",minute:"%A, %e %b, %H:%M",hour:"%A, %e %b, %H:%M",day:"%A, %e %b %Y",week:"Week from %A, %e %b %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:a?25:10,headerFormat:'<span style="font-size: 0.8em">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",
borderWidth:void 0,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}};f.chart.styledMode=!1;"";const r=new m(f.time);b={defaultOptions:f,defaultTime:r,getOptions:function(){return f},setOptions:function(a){k(!0,f,a);if(a.time||a.global)t.time?t.time.update(k(f.global,
f.time,a.global,a.time)):t.time=r;return f}};"";return b});l(b,"Core/Templating.js",[b["Core/Defaults.js"],b["Core/Utilities.js"]],function(b,c){function d(a="",b,c){const e=/\{([a-zA-Z0-9:\.,;\-\/<>%_@"'= #\(\)]+)\}/g,g=/\(([a-zA-Z0-9:\.,;\-\/<>%_@"'= ]+)\)/g,f=[],q=/f$/,k=/\.([0-9])/,p=m.lang,t=c&&c.time||z,r=c&&c.numberFormatter||l,x=(a="")=>{let e;return"true"===a?!0:"false"===a?!1:(e=Number(a)).toString()===a?e:w(a,b)};let A,y,F=0,G;for(;null!==(A=e.exec(a));){const e=g.exec(A[1]);e&&(A=e,G=
!0);y&&y.isBlock||(y={ctx:b,expression:A[1],find:A[0],isBlock:"#"===A[1].charAt(0),start:A.index,startInner:A.index+A[0].length,length:A[0].length});var D=A[1].split(" ")[0].replace("#","");C[D]&&(y.isBlock&&D===y.fn&&F++,y.fn||(y.fn=D));D="else"===A[1];if(y.isBlock&&y.fn&&(A[1]===`/${y.fn}`||D))if(F)D||F--;else{var E=y.startInner;E=a.substr(E,A.index-E);void 0===y.body?(y.body=E,y.startInner=A.index+A[0].length):y.elseBody=E;y.find+=E+A[0];D||(f.push(y),y=void 0)}else y.isBlock||f.push(y);if(e&&
(null===y||void 0===y||!y.isBlock))break}f.forEach(e=>{const {body:c,elseBody:g,expression:h,fn:f}=e;var n;if(f){var u=[e],m=h.split(" ");for(n=C[f].length;n--;)u.unshift(x(m[n+1]));n=C[f].apply(b,u);e.isBlock&&"boolean"===typeof n&&(n=d(n?c:g,b))}else u=h.split(":"),n=x(u.shift()||""),u.length&&"number"===typeof n&&(u=u.join(":"),q.test(u)?(m=parseInt((u.match(k)||["","-1"])[1],10),null!==n&&(n=r(n,m,p.decimalPoint,-1<u.indexOf(",")?p.thousandsSep:""))):n=t.dateFormat(u,n));a=a.replace(e.find,B(n,
""))});return G?d(a,b,c):a}function l(a,b,c,d){a=+a||0;b=+b;const e=m.lang;var g=(a.toString().split(".")[1]||"").split("e")[0].length;const h=a.toString().split("e"),k=b;if(-1===b)b=Math.min(g,20);else if(!f(b))b=2;else if(b&&h[1]&&0>h[1]){var q=b+ +h[1];0<=q?(h[0]=(+h[0]).toExponential(q).split("e")[0],b=q):(h[0]=h[0].split(".")[0]||0,a=20>b?(h[0]*Math.pow(10,h[1])).toFixed(b):0,h[1]=0)}q=(Math.abs(h[1]?h[0]:a)+Math.pow(10,-Math.max(b,g)-1)).toFixed(b);g=String(p(q));const l=3<g.length?g.length%
3:0;c=B(c,e.decimalPoint);d=B(d,e.thousandsSep);a=(0>a?"-":"")+(l?g.substr(0,l)+d:"");a=0>+h[1]&&!k?"0":a+g.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+d);b&&(a+=c+q.slice(-b));h[1]&&0!==+a&&(a+="e"+h[1]);return a}const {defaultOptions:m,defaultTime:z}=b,{extend:a,getNestedProperty:w,isArray:k,isNumber:f,isObject:r,pick:B,pInt:p}=c,C={add:(a,b)=>a+b,divide:(a,b)=>0!==b?a/b:"",eq:(a,b)=>a==b,each:function(b){const e=arguments[arguments.length-1];return k(b)?b.map((c,h)=>d(e.body,a(r(c)?c:{"@this":c},{"@index":h,
"@first":0===h,"@last":h===b.length-1}))).join(""):!1},ge:(a,b)=>a>=b,gt:(a,b)=>a>b,"if":a=>!!a,le:(a,b)=>a<=b,lt:(a,b)=>a<b,multiply:(a,b)=>a*b,ne:(a,b)=>a!=b,subtract:(a,b)=>a-b,unless:a=>!a};return{dateFormat:function(a,b,c){return z.dateFormat(a,b,c)},format:d,helpers:C,numberFormat:l}});l(b,"Dashboards/Plugins/KPISyncHandlers.js",[b["Core/Utilities.js"]],function(b){const {defined:c}=b;return{extremes:{handler:function(){const {board:b}=this,d=a=>{a=a.cursor;"position"===a.type&&"number"===typeof(null===
a||void 0===a?void 0:a.row)&&c(a.column)&&this.connector&&!c(this.options.value)&&(a=this.connector.table.modified.getCellAsString(a.column,a.row),this.setValue(a))},m=()=>{const {dataCursor:a}=b;if(a){var c=this.connector&&this.connector.table;c&&a.addListener(c.id,"xAxis.extremes.max",d)}},l=()=>{const a=this.connector&&this.connector.table,{dataCursor:c}=b;a&&c.removeListener(a.id,"xAxis.extremes.max",d)};b&&(m(),this.on("setConnector",()=>l()),this.on("afterSetConnector",()=>m()))}}}});l(b,"Dashboards/Components/KPIComponent.js",
[b["Core/Renderer/HTML/AST.js"],b["Dashboards/Components/Component.js"],b["Core/Templating.js"],b["Dashboards/Plugins/KPISyncHandlers.js"],b["Core/Utilities.js"]],function(b,c,l,x,m){var d=this&&this.__awaiter||function(a,b,c,d){function e(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,g){function h(a){try{n(d.next(a))}catch(A){g(A)}}function f(a){try{n(d["throw"](a))}catch(A){g(A)}}function n(a){a.done?c(a.value):e(a.value).then(h,f)}n((d=d.apply(a,b||
[])).next())})};const {format:a}=l,{createElement:t,css:k,defined:f,isArray:r,isNumber:B,merge:p,diffObjects:C}=m;class q extends c{static fromJSON(a,b){a=a.options;const c=a.chartOptions&&JSON.parse(a.chartOptions),e=JSON.parse(a.subtitle||"{}"),g=a.title&&JSON.parse(a.title);return new q(b,p(a,{chartOptions:c,title:g,subtitle:e}))}constructor(a,b){b=p(q.defaultOptions,b);super(a,b);this.options=b;this.type="KPI";this.sync=new q.Sync(this,this.syncHandlers);this.value=t("span",{className:`${b.className}-value`},
{},this.contentElement);this.subtitle=t("span",{className:this.getSubtitleClassName()},{},this.contentElement);this.options.chartOptions&&(this.chartContainer=t("div",{className:`${b.className}-chart-container`},{},this.contentElement))}load(){const a=Object.create(null,{load:{get:()=>super.load}});return d(this,void 0,void 0,function*(){yield a.load.call(this);this.contentElement.style.display="flex";this.contentElement.style.flexDirection="column";return this})}resize(a,b){super.resize(a,b);this.chart&&
this.chart.reflow();return this}render(){super.render();this.updateElements();const a=q.charter;a&&this.options.chartOptions&&!this.chart&&this.chartContainer?this.chart=a.chart(this.chartContainer,p(q.defaultChartOptions,this.options.chartOptions)):this.chart&&!this.options.chartOptions&&"chartOptions"in this.options&&(this.chart.destroy(),this.chart=void 0);this.sync.start();this.emit({type:"afterRender"});return this}setOptions(){this.filterAndAssignSyncOptions(x)}update(a,b=!0){const c=Object.create(null,
{update:{get:()=>super.update}});return d(this,void 0,void 0,function*(){yield c.update.call(this,a);this.setOptions();a.chartOptions&&this.chart&&this.chart.update(a.chartOptions);b&&this.render()})}onTableChanged(){this.setValue()}getValue(){var a;if(this.options.value)return this.options.value;if(this.connector&&this.options.columnName){const b=null===(a=this.connector)||void 0===a?void 0:a.table.modified;a=b.getColumn(this.options.columnName);return b.getCellAsString(this.options.columnName,((null===
a||void 0===a?void 0:a.length)||0)-1)}}setValue(c=this.getValue()){const {valueFormat:e,valueFormatter:d}=this.options;if(f(c)){let g;B(c)&&(g=c);d?c=d.call(this,c):e?c=a(e,{value:c}):B(c)&&(c=c.toLocaleString());b.setElementHTML(this.value,""+c);this.prevValue=g}}updateElements(){const {style:a,subtitle:c}=this.options;this.setValue();b.setElementHTML(this.subtitle,this.getSubtitle());a&&k(this.element,a);"object"===typeof c&&(c.style&&k(this.subtitle,c.style),this.subtitle.className=this.getSubtitleClassName());
this.chartContainer&&(this.chartContainer.style.flex=this.options.chartOptions?"1":"0");this.chart&&this.chart.reflow();this.value.style.color=this.getValueColor()}getSubtitle(){const {subtitle:b,value:c}=this.options;if("string"===typeof b)return b;if(b){if(B(this.prevValue)&&B(c)){const e=c-this.prevValue;let g;if(0<e)g='<span style="color:green">&#9650;</span> +';else if(0>e)g='<span style="color:red">&#9660;</span> ';else return this.subtitle.innerHTML;if("diff"===b.type)return g+e.toLocaleString();
if("diffpercent"===b.type)return g+a("{v:,.2f}%",{v:e/this.prevValue*100})}return b.text||""}return""}getSubtitleClassName(){const {subtitle:a}=this.options;return`${c.defaultOptions.className}-subtitle`+("object"===typeof a&&a.className||"")}getValueColor(){const {threshold:a,thresholdColors:b,value:c}=this.options;if(b&&a&&B(c)){if(r(a))for(let e=a.length-1;0<=e;e--){if(c>=a[e])return e+1<b.length?b[e+1]:b[b.length-1]}else if(c>=a)return b[1];return b[0]}return""}toJSON(){const a=super.toJSON(),
b=Object.assign(Object.assign({},a),{type:"KPI",options:Object.assign(Object.assign({},a.options),{type:"KPI",value:this.options.value,subtitle:JSON.stringify(this.options.subtitle),title:JSON.stringify(this.options.title),threshold:this.options.threshold,thresholdColors:this.options.thresholdColors,chartOptions:JSON.stringify(this.options.chartOptions),valueFormat:this.options.valueFormat})});this.emit({type:"toJSON",json:a});return b}getOptions(){return Object.assign(Object.assign({},C(this.options,
q.defaultOptions)),{type:"KPI"})}}q.syncHandlers=x;q.defaultOptions=p(c.defaultOptions,{type:"KPI",className:[c.defaultOptions.className,`${c.defaultOptions.className}-kpi`].join(" "),minFontSize:20,syncHandlers:x,thresholdColors:["#f45b5b","#90ed7d"],editableOptions:(c.defaultOptions.editableOptions||[]).concat([{name:"Value",type:"input",propertyPath:["value"]},{name:"Column name",type:"input",propertyPath:["columnName"]},{name:"Value format",type:"input",propertyPath:["valueFormat"]}])});q.defaultChartOptions=
{chart:{type:"spline",styledMode:!0,zooming:{mouseWheel:{enabled:!1}}},title:{text:void 0},xAxis:{visible:!1},yAxis:{visible:!1,title:{text:null}},legend:{enabled:!1},credits:{enabled:!1},tooltip:{outside:!0},plotOptions:{series:{marker:{enabled:!1}}}};return q});l(b,"Dashboards/Plugins/NavigatorComponentDefaults.js",[b["Dashboards/Components/Component.js"]],function(b){return{type:"Navigator",chartOptions:{chart:{animation:!1,height:200,styledMode:!0,type:"column",zooming:{mouseWheel:{enabled:!1}}},
credits:{enabled:!1},legend:{enabled:!1},navigator:{enabled:!0,outlineWidth:0,series:{animation:!1,lineWidth:0},xAxis:{endOnTick:!0,gridZIndex:4,labels:{x:1,y:22},opposite:!0,showFirstLabel:!0,showLastLabel:!0,startOnTick:!0,tickPosition:"inside"},yAxis:{maxPadding:.5}},plotOptions:{series:{borderRadius:0,marker:{enabled:!1},states:{hover:{enabled:!1}}}},scrollbar:{enabled:!0},title:{text:""},tooltip:{enabled:!1},xAxis:{visible:!1},yAxis:{visible:!1}},editableOptions:(b.defaultOptions.editableOptions||
[]).concat()}});l(b,"Dashboards/Plugins/NavigatorComponent.js",[b["Dashboards/Components/Component.js"],b["Data/Modifiers/DataModifier.js"],b["Dashboards/Globals.js"],b["Dashboards/Plugins/NavigatorComponentDefaults.js"],b["Core/Utilities.js"]],function(b,c,l,x,m){function d(a,b){let c="number"===typeof b.max?b.max:b.dataMax;b="number"===typeof b.min?b.min:b.dataMin;return a.hasNames?[a.names[Math.round(b)],a.names[Math.round(c)]]:[b,c]}var a=this&&this.__awaiter||function(a,b,c,d){function e(a){return a instanceof
c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,g){function f(a){try{n(d.next(a))}catch(A){g(A)}}function h(a){try{n(d["throw"](a))}catch(A){g(A)}}function n(a){a.done?c(a.value):e(a.value).then(f,h)}n((d=d.apply(a,b||[])).next())})};const {Range:t}=c.types,{addEvent:k,diffObjects:f,isNumber:r,merge:B,pick:p}=m,C={crossfilter:{emitter:function(){const b=this,c=(c,e)=>a(this,void 0,void 0,function*(){if(b.connector){const n=b.connector.table,m=b.board.dataCursor,k=b.getColumnAssignment()[0],
[l,p]=d(c,e);let u=n.getModifier();if(u instanceof t){{var a=u.options.ranges,g=k,f=l,h=p;let b=!1;for(let c=0,e=a.length;c<e;++c)if(a[c].column===g){a[c].maxValue=h;a[c].minValue=f;b=!0;break}b||a.push({column:g,maxValue:h,minValue:f})}}else u=new t({ranges:[{column:k,maxValue:p,minValue:l}]});yield n.setModifier(u);m.emitCursor(n,{type:"range",columns:[k],firstRow:0,lastRow:n.getRowCount()-1,state:"crossfilter"},e)}});let f;return k(b.chart.xAxis[0],"afterSetExtremes",function(a){clearTimeout(f);
f=setTimeout(c,50,this,a)})}},extremes:{emitter:function(){const a=this,b=(b,c)=>{if(a.connector){const e=a.connector.table,g=a.board.dataCursor,f=a.getColumnAssignment()[0],[h,n]=d(b,c);g.emitCursor(e,{type:"position",column:f,row:e.getRowIndexBy(f,h),state:"xAxis.extremes.min"},c);g.emitCursor(e,{type:"position",column:f,row:e.getRowIndexBy(f,n),state:"xAxis.extremes.max"},c)}};let c;return k(a.chart.xAxis[0],"afterSetExtremes",function(a){clearTimeout(c);c=setTimeout(b,50,this,a)})},handler:function(){const a=
this,b=a.board.dataCursor,c=b=>{var c=b.cursor;if(a.connector){b=a.connector.table;var e=b.getColumnNames()[0],d=b.getRowCount(),g=0;"range"===c.type?(d=c.lastRow,g=c.firstRow,c.columns&&(e=p(c.columns[0],e))):"xAxis.extremes.max"===c.state?(e=p(c.column,e),d=p(c.row,d)):(e=p(c.column,e),g=p(c.row,g));c=b.getModifier();if("string"===typeof e&&c instanceof t){const a=c.options.ranges;g=b.getCell(e,g);const h=b.getCell(e,d);if(null!==h&&"undefined"!==typeof h&&null!==g&&"undefined"!==typeof g){a:{d=
a;var f=e;for(let a=0,b=d.length;a<b;++a)if(d[a].column===f){d.splice(a,1);break a}}a.unshift({column:e,maxValue:h,minValue:g});b.setModifier(c)}}}},d=()=>{const e=a.connector&&a.connector.table;e&&(b.addListener(e.id,"xAxis.extremes",c),b.addListener(e.id,"xAxis.extremes.max",c),b.addListener(e.id,"xAxis.extremes.min",c))};d();a.on("setConnector",()=>{{const e=a.connector&&a.connector.table;e&&(b.removeListener(e.id,"xAxis.extremes",c),b.removeListener(e.id,"xAxis.extremes.max",c),b.removeListener(e.id,
"xAxis.extremes.min",c))}});a.on("afterSetConnector",()=>d())}}};class q extends b{static fromJSON(a,b){b=new q(b,a.options);b.emit({type:"fromJSON",json:a});return b}constructor(a,b){super(a,b);this.options=B(q.defaultOptions,b);a=q.charter||l.win.Highcharts;this.chartContainer=l.win.document.createElement("div");this.chart=a.chart(this.chartContainer,this.options.chartOptions||{});this.chartContainer.classList.add(l.classNamePrefix+"navigator");this.filterAndAssignSyncOptions(C);this.sync=new q.Sync(this,
this.syncHandlers);this.options.sync.crossfilter&&this.chart.update({navigator:{xAxis:{labels:{format:"{value}"}}}},!1)}adjustNavigator(){const a=this.chart,b=p(a.chartHeight,this.contentElement.clientHeight);var c=this.contentElement.clientWidth;const d={};if(a.chartHeight!==b||a.chartWidth!==c)d.chart={height:b,width:c};if(a.navigator){c=a.navigator;const e=c.top-a.plotTop+c.height;c.height!==e&&(d.navigator={handles:{height:Math.round(b/4)},height:e});Object.keys(d).length&&a.update(d,!1);c.series&&
c.series[0]&&c.series[0].update({type:a.series[0].type},!1)}else Object.keys(d).length&&a.update(d,!1)}getColumnAssignment(){var a=this.options.columnAssignments||{};let b;for(const c of Object.keys(a))if(b=a[c],null!==b)return[c,b];return this.connector&&(a=this.connector.table.getColumnNames(),a.length)?[a[0],"y"]:["","y"]}getOptions(){return Object.assign(Object.assign({},f(this.options,x)),{type:"Navigator"})}load(){const b=Object.create(null,{load:{get:()=>super.load}});return a(this,void 0,
void 0,function*(){yield b.load.call(this);this.contentElement.appendChild(this.chartContainer);this.parentElement.appendChild(this.element);this.adjustNavigator();this.emit({type:"afterLoad"});return this})}onTableChanged(){this.renderNavigator()}redrawNavigator(){const a=this.resizeTimeouts;for(let b=0,c=a.length;b<c;++b)clearTimeout(a[b]);a.length=0;a.push(setTimeout(()=>{this.adjustNavigator();this.chart.redraw()},33))}render(){super.render();this.renderNavigator();this.sync.start();this.emit({type:"afterRender"});
return this}renderNavigator(){const a=this.chart;if(this.connector){const e=this.connector.table;var b=this.options,c=this.getColumnAssignment();c=e.getColumn(c[0],!0)||[];var d;if(b.sync.crossfilter){b=[];const a=[];for(d of c)null!==d&&(r(d)||(d=`${d}`),c=a.indexOf(d),-1===c?(c=a.length,a[c]=d,b[c]=[d,1]):b[c][1]+=1);b.sort((a,b)=>p(a[0],NaN)<p(b[0],NaN)?-1:a[0]===b[0]?0:1);d=b}else d=c.slice();a.series[0]?a.series[0].setData(d,!1):a.addSeries({id:e.id,data:d},!1)}this.redrawNavigator()}resize(a,
b){super.resize(a,b);this.redrawNavigator();return this}update(b,c=!0){const d=Object.create(null,{update:{get:()=>super.update}});return a(this,void 0,void 0,function*(){const a=this.chart;yield d.update.call(this,b,!1);b.sync&&this.filterAndAssignSyncOptions(C);b.chartOptions&&a.update(B(this.options.sync.crossfilter?{navigator:{xAxis:{labels:{format:"{value}"}}}}:{},b.chartOptions),!1);this.emit({type:"afterUpdate"});c&&this.render()})}}q.defaultOptions=B(b.defaultOptions,x);return q});l(b,"Dashboards/Plugins/HighchartsPlugin.js",
[b["Dashboards/Plugins/HighchartsComponent.js"],b["Dashboards/Plugins/HighchartsSyncHandlers.js"],b["Dashboards/Components/KPIComponent.js"],b["Dashboards/Plugins/NavigatorComponent.js"]],function(b,c,l,x){return{custom:{connectHighcharts:function(c){b.charter=c;l.charter=c;x.charter=c}},name:"Highcharts.DashboardsPlugin",onRegister:function(d){const {Sync:m,ComponentRegistry:a}=d;a.registerComponent("Highcharts",b);a.registerComponent("KPI",l);a.registerComponent("Navigator",x);m.defaultHandlers=
Object.assign(Object.assign({},m.defaultHandlers),c)},onUnregister:function(b){const {Sync:d}=b;Object.keys(c).forEach(a=>{d.defaultHandlers[a]===c[a]&&delete d.defaultHandlers[a]})}}});l(b,"masters/modules/dashboards-plugin.src.js",[b["Dashboards/Plugins/DataGridPlugin.js"],b["Dashboards/Globals.js"],b["Dashboards/Plugins/HighchartsPlugin.js"]],function(b,c,l){c.DataGridPlugin=b;c.HighchartsPlugin=l;c.win.Highcharts&&(l.custom.connectHighcharts(c.win.Highcharts),c.PluginHandler.addPlugin(l));c.win.DataGrid&&
(b.custom.connectDataGrid(c.win.DataGrid.DataGrid),c.PluginHandler.addPlugin(b));return c})});
//# sourceMappingURL=dashboards-plugin.js.map