!/**
 * Highcharts Dashboards Layout 4.0.0 (2025-10-29)
 * @module dashboards/modules/layout
 * @requires dashboards
 *
 * (c) 2009-2025 Highsoft AS
 *
 * License: www.highcharts.com/license
 */function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(e._Dashboards,e._Dashboards.AST,e._Dashboards.ComponentRegistry):"function"==typeof define&&define.amd?define("dashboards/modules/layout",["dashboards/dashboards"],function(e){return t(e,e.AST,e.ComponentRegistry)}):"object"==typeof exports?exports["dashboards/modules/layout"]=t(e._Dashboards,e._Dashboards.AST,e._Dashboards.ComponentRegistry):e.Dashboards=t(e.Dashboards,e.Dashboards.AST,e.Dashboards.ComponentRegistry)}("undefined"==typeof window?this:window,(e,t,i)=>(()=>{"use strict";var o,s={160:e=>{e.exports=t},376:e=>{e.exports=i},668:t=>{t.exports=e}},n={};function l(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}};return s[e](i,i.exports,l),i.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var i in t)l.o(t,i)&&!l.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var a={};l.d(a,{default:()=>e7});var r=l(668),c=l.n(r);let d=c().classNamePrefix+"edit-",h={classNames:{resizeSnap:d+"resize-snap",resizeSnapX:d+"resize-snap-x",resizeSnapY:d+"resize-snap-y",separator:d+"separator",contextMenuBtn:d+"context-menu-btn",contextMenuBtnText:d+"context-menu-btn-text",contextMenu:d+"context-menu",contextMenuItem:d+"context-menu-item",editModeEnabled:d+"enabled",editToolbar:d+"toolbar",editToolbarCellOutline:d+"toolbar-cell-outline",editToolbarRowOutline:d+"toolbar-row-outline",editToolbarItem:d+"toolbar-item",editToolbarRow:d+"toolbar-row",editToolbarCell:d+"toolbar-cell",editSidebar:d+"sidebar",editSidebarShow:d+"sidebar-show",editSidebarHide:d+"sidebar-hide",editSidebarHeader:d+"sidebar-header",editSidebarTitle:d+"sidebar-title",editSidebarMenuItem:d+"sidebar-item",rowContextHighlight:d+"row-context-highlight",cellEditHighlight:d+"cell-highlight",dashboardCellEditHighlightActive:d+"cell-highlight-active",dragMock:d+"drag-mock",dropPointer:d+"drop-pointer",contextDetectionPointer:d+"ctx-detection-pointer",resizePointer:d+"resize-pointer",currentEditedElement:d+"unmask",maskElement:d+"mask",menuItem:d+"menu-item",menu:d+"menu",menuVerticalSeparator:d+"menu-vertical-separator",menuHorizontalSeparator:d+"menu-horizontal-separator",menuDestroy:d+"menu-destroy",editSidebarWrapper:d+"sidebar-wrapper",customSelect:d+"custom-select",customSelectButton:d+"custom-option-button",toggleContainer:d+"toggle-container",toggleWrapper:d+"toggle-wrapper",toggleSlider:d+"toggle-slider",toggleWrapperColored:d+"toggle-wrapper-colored",toggleLabels:d+"toggle-labels",labeledToggleWrapper:d+"labeled-toggle-wrapper",button:d+"button",sidebarNavButton:d+"sidebar-button-nav",labelText:d+"label-text",editSidebarTabBtn:d+"sidebar-tab-btn",editToolsBtn:d+"tools-btn",editTools:d+"tools",editGridItems:d+"grid-items",editStandaloneToggle:d+"standalone-toggle",confirmationPopup:d+"confirmation-popup",popupButtonContainer:d+"confirmation-popup-button-container",popupContentContainer:d+"confirmation-popup-content",popupCancelBtn:d+"confirmation-popup-cancel-btn",popupConfirmBtn:d+"confirmation-popup-confirm-btn",popupCloseButton:d+"popup-close",editOverlay:d+"overlay",editOverlayActive:d+"overlay-active",resizerMenuBtnActive:d+"resizer-menu-btn-active",sidebarCloseButton:d+"close-btn",editSidebarTabBtnWrapper:d+"tabs-buttons-wrapper",editSidebarRight:d+"sidebar-right",editSidebarRightShow:d+"sidebar-right-show",viewFullscreen:d+"view-fullscreen",accordionMenu:d+"accordion-menu",accordionContainer:d+"accordion",accordionHeader:d+"accordion-header",accordionHeaderBtn:d+"accordion-header-btn",accordionHeaderWrapper:d+"accordion-header-wrapper",accordionHeaderIcon:d+"accordion-header-icon",accordionContent:d+"accordion-content",accordionNestedWrapper:d+"accordion-nested",accordionMenuButtonsContainer:d+"accordion-menu-buttons-container",accordionMenuButton:d+"accordion-menu-button",accordionStandaloneWrapper:d+"accordion-standalone-wrapper",hiddenElement:d+"hidden-element",collapsableContentHeader:d+"collapsable-content-header",standaloneElement:d+"standalone-element",collapsedElement:d+"collapsed-element",dropdown:d+"dropdown",dropdownContent:d+"dropdown-content",dropdownButton:d+"dropdown-button",dropdownButtonContent:d+"dropdown-button-content",dropdownIcon:d+"pointer",icon:d+"icon"},lang:{accessibility:{contextMenu:{button:"Context menu"},editMode:{editMode:"Edit mode toggle button"}},addComponent:"Add component",cancelButton:"Cancel",caption:"Caption",chartClassName:"Chart class name",chartConfig:"Chart configuration",chartID:"Chart ID",chartOptions:"Chart options",chartType:"Chart type",connectorName:"Connector name",confirmButton:"Confirm",confirmDestroyCell:"Do you really want to destroy the cell?",confirmDestroyRow:"Do you really want to destroy the row?",confirmDiscardChanges:"Do you really want to discard the changes?",dataLabels:"Data labels",editMode:"Edit mode",errorMessage:"Something went wrong",exitFullscreen:"Exit full screen",htmlInput:"HTML",id:"Id",off:"off",on:"on",pointFormat:"Point format",settings:"Settings",style:"Styles",title:"Title",viewFullscreen:"View in full screen",sidebar:{HTML:"HTML",row:"Row",Highcharts:"Highcharts",Grid:"Grid",KPI:"KPI"}}},{addEvent:p,createElement:u,uniqueKey:m,objectEach:g,error:b}=c(),f=class{static getOffsets(e,t){let i={left:0,top:0,right:0,bottom:0};if(!e.container)return i;let o=e.container.getBoundingClientRect(),s=t?t.getBoundingClientRect():{left:0,top:0};return i.left=o.left-s.left,i.top=o.top-s.top,i.right=o.right-s.left,i.bottom=o.bottom-s.top,i}static getDimFromOffsets(e){return{width:e.right-e.left,height:e.bottom-e.top}}static getElementId(e){return c().classNamePrefix+e+"-"+m().slice(11)}static getPercentageWidth(e){let t,i=/^(\d{1})[\-\/\.](\d{1,2})$/;if(i.test(e)){let o=e.match(i)||[];t=((t=100*o[1]/o[2])<=100?t:100)+"%"}else if(-1!==e.indexOf("%")){let i=parseFloat(e);t=(i<=100?i>=0?i:0:100)+"%"}return t}getElementContainer(e){let t,i=this;if(e.render)e.attribs&&!e.attribs.id&&delete e.attribs.id;else if("string"==typeof e.elementId){let t=document.getElementById(e.elementId);t?i.container=t:b("Element "+e.elementId+" does not exist")}return i.removeBindedEventFn=p(t=e.element instanceof HTMLElement?e.element:u("div",e.attribs||{},e.style||{},e.parentContainer),"bindedGUIElement",function(e){e.guiElement=i,e.stopImmediatePropagation()}),t}destroy(){let e=this;e.removeBindedEventFn&&e.removeBindedEventFn(),e.container&&e.container.parentNode&&e.container.parentNode.removeChild(e.container),g(e,function(t,i){delete e[i]})}getType(){return this.type}changeVisibility(e=!0,t){let i=this.isVisible&&!e||!this.isVisible&&e;this.container&&i&&(this.container.style.display=e?t||"block":"none",this.isVisible=e)}hide(){this.changeVisibility(!1)}show(){this.changeVisibility()}},{merge:C,fireEvent:v}=c();class y extends f{constructor(e,t,i){super(),this.type=c().guiElementType.cell,this.id=t.id,this.options=t,this.row=e,this.isVisible=!0;let o=document.getElementById(t.parentContainerId||"")||e.container,s=e.layout.options||{},n=e.options||{},l=s.cellClassName||"";this.container=this.getElementContainer({render:e.layout.board.guiEnabled,parentContainer:o,attribs:{id:t.id,className:c().classNames.cell+" "+l},element:i,elementId:t.id,style:C(s.style,n.style,t.style,{height:this.height})}),this.options.layout&&this.setNestedLayout()}setNestedLayout(){let e=this.row.layout.board,t=this.row.layout.constructor,i=e.options.gui;this.nestedLayout=new t(e,C({},i&&i.layoutOptions,this.options.layout,{parentContainerId:this.options.id}),this)}destroy(){let{row:e}=this;this.mountedComponent?.destroy(),this.nestedLayout?.destroy(),e.unmountCell(this);let t=e.cells?.length===0;super.destroy(),t&&e.destroy()}getOptions(){return this.options}changeVisibility(e=!0){super.changeVisibility(e);let t=this,i=t.row;t.row.getVisibleCells().length?t.isVisible&&!i.isVisible&&t.row.show():t.row.hide(),setTimeout(()=>{v(i,"cellChange",{row:i,cell:t})},0)}getParentCell(e){let t;if(e<=this.row.layout.level){if(this.row.layout.level===e)return this;if(this.row.layout.level-1>=0&&(t=this.row.layout.parentCell))return t.getParentCell(e)}}getOverlappingLevels(e,t,i){let o=this.row.layout.parentCell,s=[this.row.layout.level];if(o){let n=i||f.getOffsets(this)[e],l=f.getOffsets(o)[e];Math.abs(n-l)<t&&(s=[...s,...o.getOverlappingLevels(e,t,l)])}return s}setSize(e,t){let i=this.row.layout.board.editMode;if(this.container){if(e)if("auto"===e&&"1 1 0%"!==this.container.style.flex)this.container.style.flex="1 1 0%";else{let t=this.convertWidthToValue(e);t&&this.container.style.flex!=="0 0 "+t&&(this.container.style.flex="0 0 "+t)}t&&(this.height=this.container.style.height=t+"px"),i&&(i.hideContextPointer(),i.cellToolbar&&i.cellToolbar.isVisible&&(i.cellToolbar.cell===this?i.cellToolbar.showToolbar(this):i.cellToolbar.hide())),v(this.row.layout.board,"cellResize",{cell:this}),v(this.row,"cellChange",{cell:this,row:this.row})}}setHighlight(e){let t=this.row?.layout.board.editMode;if(this.container&&t){let t=this.container,i=t.classList.contains(h.classNames.cellEditHighlight);e||i?e&&i&&(t.classList.remove(h.classNames.cellEditHighlight),this.row.layout.board.container.classList.remove(h.classNames.dashboardCellEditHighlightActive),this.isHighlighted=!1):(t.classList.add(h.classNames.cellEditHighlight),this.row.layout.board.container.classList.add(h.classNames.dashboardCellEditHighlightActive),this.isHighlighted=!0)}}setActiveState(){this.row.layout.board.mountedComponents.forEach(e=>{e.cell.container&&e.cell.container.classList.remove(c().classNames.cellActive),e.component.isActive=!1}),this.container&&this.container.classList.add(c().classNames.cellActive)}setLoadingState(e=!0){this.container?.classList?.toggle(c().classNames.cellLoading,e)}convertWidthToValue(e){return"number"==typeof e?e+"px":/px/.test(e)?e:f.getPercentageWidth(e)||""}}(y||(y={})).isCell=function(e){return!!e&&"row"in e&&"cell"===e.type};let w=y;class x extends f{constructor(e){super(),this.type="cell-html",this.options=e,this.id=e.id,this.container=e.container,this.mountedComponent=e.mountedComponent}destroy(){this.mountedComponent?.destroy(),super.destroy()}setHighlight(){this.container.classList.toggle(h.classNames.cellEditHighlight),this.mountedComponent?.board.container.classList.toggle(h.classNames.dashboardCellEditHighlightActive)}setActiveState(){this.container&&this.container.classList.add(c().classNames.cellActive)}}!function(e){e.isCellHTML=function(t){return t instanceof e}}(x||(x={}));let N=x,{merge:M,createElement:E,defined:O}=c();function T(e,t){let i,o=t.options.contextMenu;return o&&(i=E("button",{className:h.classNames.contextMenuBtn,onclick:function(e){e.stopPropagation(),t.onContextBtnClick()}},{},e),o.icon&&E("img",{src:o.icon,className:h.classNames.icon},{},i),o.text&&E("span",{className:h.classNames.contextMenuBtnText,textContent:o.text},{},i),i.setAttribute("aria-label",t.lang.accessibility.contextMenu.button),i.setAttribute("aria-expanded","false")),i}function L(e,t){let i,{name:o,showToggle:s,onchange:n,isEnabled:l,isNested:a,isStandalone:r,lang:c}=t,d=E("div",{className:h.classNames[a?"accordionNestedWrapper":"accordionContainer"]+" "+(r?h.classNames.accordionStandaloneWrapper:"")+" "+h.classNames.collapsableContentHeader},{},e),p=E("div",{className:h.classNames.accordionHeader},{},d);if((!r||s)&&(i=E(r&&s?"span":"button",{className:h.classNames[r?"accordionHeaderWrapper":"accordionHeaderBtn"]},{},p)),E("span",{textContent:c[o]||o},{},i),s&&p&&D(p,{enabledOnOffLabels:!0,id:o,name:"",onchange:n,value:l||!1,lang:c}),!r){let e=E("span",{className:h.classNames.accordionHeaderIcon+" "+h.classNames.collapsedElement},{},i);i?.addEventListener("click",function(){u.classList.toggle(h.classNames.hiddenElement),e?.classList.toggle(h.classNames.collapsedElement)})}let u=E("div",{className:h.classNames.accordionContent+" "+(r?h.classNames.standaloneElement:h.classNames.hiddenElement)},{},d);return{outerElement:d,content:u}}function P(e,t){let i;if(!e)return;t.name&&R(e,{title:t.name,isLabel:!0});let o=t.iconsURLPrefix||"",s=E("div",{className:h.classNames.dropdown+" "+h.classNames.collapsableContentHeader},{},e),n=E("button",{className:h.classNames.dropdownButton},{},s),l=E("div",{className:h.classNames.dropdownButtonContent},{},n),a=(c().find(t.selectOptions,e=>e.name===t.value)||{}).iconURL;a&&(i=E("img",{src:o+a,className:h.classNames.icon},{},l));let r=E("span",{textContent:t.value,id:t.id||""},{},l),d=E("img",{className:h.classNames.dropdownIcon+" "+h.classNames.collapsedElement,src:o+"dropdown-pointer.svg"},{},n),p=E("ul",{className:h.classNames.dropdownContent+" "+h.classNames.hiddenElement},{},s);n.addEventListener("click",function(){p.classList.toggle(h.classNames.hiddenElement),d.classList.toggle(h.classNames.collapsedElement)});for(let e=0,s=t.selectOptions.length;e<s;++e)!function(e,t,i,o,s,n,l){let a=e.iconsURLPrefix+e.iconURL,r=E("li",{},{},t),c=E("button",{className:h.classNames.customSelectButton},{},r);e.iconURL&&E("img",{src:a},{},c),E("span",{textContent:e.name||""},{},c),c.addEventListener("click",function(){if(t.classList.add(h.classNames.hiddenElement),s.classList.toggle(h.classNames.collapsedElement),i.textContent=e.name||"",n&&e.iconURL&&(n.src=a),l)return l(e.name)})}(M(t.selectOptions[e]||{},{iconsURLPrefix:o}),p,r,t.id,d,i,t.onchange);return s}function D(e,t){if(!e)return;let i=t.lang,o=t.value,s=t.title||t.name,n=t.langKey;t.isNested&&(e=E("div",{className:h.classNames.labeledToggleWrapper},{},e));let l=E("button",{className:h.classNames.toggleContainer,type:"button",role:"switch",ariaChecked:!1,ariaLabel:n?i.accessibility[n][t.name]:""},{},e);s&&R(t.isNested?e:l,{title:s}),t.enabledOnOffLabels&&R(l,{title:i.off,className:h.classNames.toggleLabels});let a=E("label",{className:h.classNames.toggleWrapper+" "+(t.className||"")},{},l),r=k(a,o),c=t.onchange;c&&l.addEventListener("click",e=>{c(!r.checked),r.checked=!r.checked,l.setAttribute("aria-checked",r.checked),e.stopPropagation()});let d=E("span",{className:h.classNames.toggleSlider},{},a);return c&&d.addEventListener("click",e=>{e.preventDefault()}),t.enabledOnOffLabels&&R(l,{title:i.on,className:h.classNames.toggleLabels}),l}function R(e,t){let i,{title:o,className:s,isLabel:n}=t;if(e){let t=n?{htmlFor:o}:{};i=E(n?"label":"div",{className:h.classNames.labelText+" "+(s||""),textContent:o,...t},{},e)}return i}function B(e,t){let{icon:i,callback:o}=t;if(!e)return;let s=E("div",{onclick:o,className:t.className||""},{},e);s.style["background-image"]="url("+i+")";let n=t.mousedown,l=t.click;return n&&(s.onmousedown=function(){n.apply(this,arguments)}),l&&s.addEventListener("click",function(){l.apply(this,arguments)}),s}function S(e,t){if(!e)return;t.name&&R(e,{title:t.name,isLabel:!0});let i=E("input",{type:"text",onclick:t.callback,id:t.id||"",name:t.name||"",value:O(t.value)&&t.value.toString().replace(/\"/g,"")||""},{},e),o=t.onchange;return o&&i.addEventListener("change",function(e){o(e.target.value)}),i}function I(e,t){if(!e)return;t.name&&R(e,{title:t.name,isLabel:!0});let i=E("textarea",{id:t.id,name:t.name,value:t.value||""},{},e),o=t.onchange;return o&&i.addEventListener("change",function(e){o(e.target.value)}),i}function k(e,t){let i;return e&&(i=E("input",{type:"checkbox",checked:!!t},{},e)),i}function A(e,t){if(!e)return;let i=E("button",{className:h.classNames.button+" "+(t.className||""),onclick:t.callback,textContent:t.text},t.style||{},e);return t.icon&&(i.style["background-image"]="url("+t.icon+")"),i}let H={renderToggle:D,renderText:R,renderCollapseHeader:L,renderIcon:B,renderContextButton:T,renderButton:A,getRendererFunction:function(e){return({select:P,toggle:D,text:R,collapse:L,icon:B,contextButton:T,input:S,textarea:I,checkbox:k,button:A})[e]}},{createElement:V,merge:z}=c();class W{constructor(e,t){this.menu=e,this.isActive=!1,this.options=z(W.defaultOptions,t),this.container=this.setContainer(),this.innerElement=this.setInnerElement()}setContainer(){let e=this.options,t=h.classNames.menuItem;return this.menu.options.itemsClassName&&(t+=" "+this.menu.options.itemsClassName),e.className&&(t+=" "+e.className),V("div",{className:t||""},z(this.options.style||{},this.isActive?{display:"block"}:{}),this.menu.container)}setInnerElement(){let e=this.options,t=this.container,i=e.langKey;return"toggle"===e.type?H.renderToggle(t,{id:e.id,name:e.id,title:i?this.menu.editMode.lang[i]:e.text,value:!!(e.getValue&&e.getValue(this)),lang:this.menu.editMode.lang,langKey:i,onchange:e.events?.click?.bind(this)}):"text"===e.type?H.renderText(t,{title:i?this.menu.editMode.lang[i]:e.text||"",className:e.className||""}):"icon"===e.type?H.renderIcon(t,{icon:e.icon||"",mousedown:e.events?.onmousedown?.bind(this),click:e.events?.click?.bind(this)}):"button"===e.type?H.renderButton(t,{callback:e.events?.click?.bind(this),className:e.className||"",style:e.style||{},text:i?this.menu.editMode.lang[i]:e.text||""}):void 0}update(){let e=this.options;e.events&&e.events.update&&e.events.update.apply(this,arguments)}activate(){this.update(),this.container&&(this.isActive=!0,this.container.style.display="block")}deactivate(){this.container&&(this.isActive=!1,this.container.style.display="none")}}W.defaultOptions={type:"text"};let{createElement:F,merge:U}=c();class X{constructor(e,t,i,o){this.parentElement=e,this.isVisible=!1,this.activeItems=[],this.options=t,this.items={},this.editMode=i,o&&(this.parent=o),this.container=this.setContainer()}setContainer(){return F("div",{className:h.classNames.menu+" "+(this.options.className||"")},{},this.parentElement)}initItems(e,t){let i,o,s,n,l=this.options.items||[];for(let a=0,r=l.length;a<r;++a)i="string"==typeof(o=l[a])?e[o]:o.id?e[o.id]:{},(n="string"==typeof o?U(i,{id:o}):U(i,o)).id&&(s=new W(this,n),this.items[s.options.id]=s,t&&(s.activate(),this.activeItems.push(s)))}setActiveItems(e){let t;for(let t=0,i=this.activeItems.length;t<i;++t)-1===e.indexOf(this.activeItems[t].options.id)&&this.activeItems[t].deactivate();this.activeItems.length=0;for(let i=0,o=e.length;i<o;++i)(t=this.items[e[i]])&&(t.isActive?t.update():t.activate(),this.activeItems.push(t))}deactivateActiveItems(){for(let e=0,t=this.activeItems.length;e<t;++e)this.activeItems[e].deactivate()}updateActiveItems(){let e=this.activeItems;for(let t=0,i=e.length;t<i;++t)e[t].update()}destroy(){this.activeItems.length=0,this.container.remove(),this.items={},this.options={}}}X.items={viewFullscreen:{id:"viewFullscreen",type:"button",langKey:"viewFullscreen",events:{click:function(){let e=this.menu.editMode.board.fullscreen;e&&e.toggle()}}}};let _=X,{defined:Y,createElement:j,css:J}=c(),K=class{constructor(e,t){this.container=j("div",{className:t.className},void 0,e.board.container),this.editMode=e,this.iconURLPrefix=e.iconsURLPrefix,this.menu=new _(this.container,t.menu,e,this),this.options=t,this.isVisible=!1,this.options.outline&&(this.outline=j("div",{className:t.outlineClassName},void 0,this.container))}hide(){this.setPosition(void 0,void 0)}refreshOutline(e,t,i,o=0){let s=(i||{}).container;this.outline&&s&&J(this.outline,{display:"block",left:e-o+"px",top:t-o+"px",width:s.offsetWidth+2*o+"px",height:s.offsetHeight+2*o+"px"})}hideOutline(){this.outline&&(this.outline.style.display="none")}setPosition(e,t){this.container&&J(this.container,{left:(e||"-9999")+"px",top:(t||"-9999")+"px"}),this.isVisible=Y(e)&&Y(t)}},{isFirefox:G}=c(),{merge:q,fireEvent:$,objectEach:Q}=c();class Z extends K{static getItemsConfig(e,t){let i=[];return e.dragDrop?.enabled&&i.push({id:"drag",type:"icon",icon:t+"drag.svg",events:{onmousedown:function(e){G&&e.preventDefault();let t=this.menu.parent,i=t.editMode.dragDrop;i&&t.cell&&w.isCell(t.cell)&&i.onDragStart(e,t.cell)}}}),e.settings?.enabled&&i.push({id:"settings",type:"icon",icon:t+"settings.svg",events:{click:function(){this.menu.parent.editMode.setEditOverlay(),this.menu.parent.onCellOptions()}}}),i.push({id:"destroy",type:"icon",className:h.classNames.menuDestroy,icon:t+"destroy.svg",events:{click:function(){let e=this.menu.parent,t=this.menu.parent.editMode,i=t.confirmationPopup;i.show({confirmButton:{value:t.lang.confirmButton,callback:e.onCellDestroy,context:e},cancelButton:{value:t.lang.cancelButton,callback:()=>{i.closePopup()}},text:t.lang.confirmDestroyCell})}}}),i}constructor(e){super(e,q(Z.defaultOptions,(e.options.toolbars||{}).cell,{menu:{items:Z.getItemsConfig(e.options,e.iconsURLPrefix)}})),e.customHTMLMode&&this.filterOptionsAvailableInCustomHTMLMode(),this.menu.initItems({})}showToolbar(e){let t=e.container,i=this.editMode.cellToolbar;if(i)if(t&&this.editMode.isActive()&&!(this.editMode.dragDrop||{}).isActive){let t=f.getOffsets(e,this.editMode.board.container),o=t.right-30-10,s=t.top+10;Q(this.menu.items,t=>{if(!e.options?.editMode?.toolbarItems)return void t.activate();let i=e.options.editMode.toolbarItems;if(i[t.options.id]?.enabled===!1)return void t.deactivate();t.activate()}),this.setPosition(o,s),this.cell=e,this.refreshOutline(),i.isVisible=!0}else this.isVisible&&(this.hide(),i.isVisible=!1)}refreshOutline(){this.cell&&this.cell.container&&this.outline&&super.refreshOutline(-this.cell.container.offsetWidth,0,this.cell,-1)}onCellOptions(){let e=this.editMode;e.sidebar&&(e.sidebar.show(this.cell),this.highlightCell())}onCellDestroy(){if(this.cell&&w.isCell(this.cell)){let e=this.cell.row,t=this.cell.id;this.cell.row.setHighlight(),this.resetEditedCell(),this.cell.destroy(),this.cell=void 0,this.editMode.hideToolbars(["cell","row"]),this.editMode.resizer?.disableResizer(),e&&e.cells&&e.cells.length&&($(this.editMode.board,"cellResize",{cell:e.cells[0]}),$(e,"cellChange",{cell:e.cells[0],row:e}),$(this.editMode,"layoutChanged",{type:"cellDestroyed",target:t,board:this.editMode.board}))}}resetEditedCell(){this.editedCell=void 0}filterOptionsAvailableInCustomHTMLMode(){this.options.menu.items=this.options.menu.items?.filter(e=>"string"!=typeof e&&"settings"===e.id)}highlightCell(){this.cell&&(this.cell.setHighlight?this.cell.setHighlight():(this.cell.container.classList.add(h.classNames.cellEditHighlight),this.editMode.board.container.classList.add(h.classNames.dashboardCellEditHighlightActive)))}}Z.defaultOptions={enabled:!0,className:h.classNames.editToolbar,outline:!1,outlineClassName:h.classNames.editToolbarCellOutline,menu:{className:h.classNames.editToolbarCell,itemsClassName:h.classNames.editToolbarItem,items:[]}};let{fireEvent:ee,merge:et,objectEach:ei}=c();class eo extends K{static getMenuItemsConfig(e,t){let i=[];return e.dragDrop?.enabled&&i.push({id:"drag",type:"icon",icon:t+"drag.svg",events:{onmousedown:function(e){let t=this.menu.parent,i=t.editMode.dragDrop;e.preventDefault(),i&&t.row&&i.onDragStart(e,t.row)}}}),i.push({id:"destroy",type:"icon",className:h.classNames.menuDestroy,icon:t+"destroy.svg",events:{click:function(){let e=this.menu.parent,t=this.menu.parent.editMode,i=t.confirmationPopup;i.show({confirmButton:{value:t.lang.confirmButton,callback:e.onRowDestroy,context:e},cancelButton:{value:t.lang.cancelButton,callback:()=>{i.closePopup()}},text:t.lang.confirmDestroyRow})}}}),i}constructor(e){super(e,et(eo.defaultOptions,(e.options.toolbars||{}).row,{menu:{items:eo.getMenuItemsConfig(e.options,e.iconsURLPrefix)}})),this.menu.initItems({})}refreshOutline(e,t){this.row&&this.row.container&&super.refreshOutline(e,t,this.row,2)}showToolbar(e){let t,i,o,s=e.container,n=this.editMode.rowToolbar;if(n)if(s&&this.editMode.isActive()&&!(this.editMode.dragDrop||{}).isActive){let s=f.getOffsets(e,this.editMode.board.container),l=s.right-s.left;ei(this.menu.items,t=>{if(!e.options?.editMode?.toolbarItems)return void t.activate();let i=e.options.editMode.toolbarItems;if(i[t.options.id]?.enabled===!1)return void t.deactivate();t.activate()}),o=l/2-this.container.clientWidth/2,t=s.left+o,i=s.top-this.container.clientHeight,this.setPosition(t,i),this.row=e,this.refreshOutline(-o,this.container.clientHeight),n.isVisible=!0}else this.isVisible&&(this.hide(),n.isVisible=!1)}onRowOptions(){this.editMode.sidebar&&this.editMode.sidebar.show(this.row)}onRowDestroy(){if(this.row){let e=this.row.options.id||-1;this.resetEditedRow(),this.row.destroy(),this.row=void 0,this.editMode.hideToolbars(["cell","row"]),this.editMode.resizer?.disableResizer(),ee(this.editMode,"layoutChanged",{type:"rowDestroyed",target:e,board:this.editMode.board})}}resetEditedRow(){this.editedRow=void 0}}eo.defaultOptions={enabled:!0,className:h.classNames.editToolbar,outline:!0,outlineClassName:h.classNames.editToolbarRowOutline,menu:{className:h.classNames.editToolbarRow,itemsClassName:h.classNames.editToolbarItem,items:[]}};var es=l(160),en=l.n(es);let{addEvent:el,createElement:ea}=c(),er=class{constructor(e,t){this.iconsURL=t,this.container=this.createPopupContainer(e),this.closeButton=this.addCloseButton()}createPopupContainer(e,t="highcharts-popup highcharts-no-tooltip"){return ea("div",{className:t},void 0,e)}addCloseButton(e="highcharts-popup-close"){let t=this,i=this.iconsURL,o=ea("button",{className:e},void 0,this.container);return ea("span",{className:"highcharts-icon"},{backgroundImage:"url("+(i.match(/png|svg|jpeg|jpg|gif/ig)?i:i+"close.svg")+")"},o),["click","touchstart"].forEach(e=>{el(o,e,t.closeButtonEvents.bind(t))}),el(document,"keydown",function(e){"Escape"===e.code&&t.closeButtonEvents()}),o}closeButtonEvents(){this.closePopup()}showPopup(e="highcharts-annotation-toolbar"){let t=this.container,i=this.closeButton;this.type=void 0,t.innerHTML=en().emptyHTML,t.className.indexOf(e)>=0&&(t.classList.remove(e),t.removeAttribute("style")),t.appendChild(i),t.style.display="block",t.style.height=""}closePopup(){this.container.style.display="none"}},{createElement:ec}=c(),ed=class extends er{constructor(e,t,i,o){super(e,t=o&&o.close&&o.close.icon?o.close.icon:t),this.editMode=i,this.options=o}createPopupContainer(e,t=h.classNames.confirmationPopup){return super.createPopupContainer(e,t)}addCloseButton(e=h.classNames.popupCloseButton){return super.addCloseButton(e)}closeButtonEvents(){let e=this.contentOptions?.cancelButton.callback;e&&e()}renderContent(){let e=this.contentOptions;if(!e)return;this.contentContainer=ec("div",{className:h.classNames.popupContentContainer},{},this.container);let t=this.contentContainer.parentNode;t.style.marginTop="0px";let i=t.getBoundingClientRect().top;t.style.marginTop=(i<0?Math.abs(i-200):200)+"px",H.renderText(this.contentContainer,{title:e.text||""}),this.buttonContainer=ec("div",{className:h.classNames.popupButtonContainer},{},this.container),H.renderButton(this.buttonContainer,{text:e.cancelButton.value,className:h.classNames.popupCancelBtn,callback:e.cancelButton.callback}),H.renderButton(this.buttonContainer,{text:e.confirmButton.value,className:h.classNames.popupConfirmBtn,callback:()=>{e.confirmButton.callback.call(e.confirmButton.context),this.closePopup()}})}show(e){this.contentOptions=e,this.showPopup(),this.renderContent(),this.editMode.setEditOverlay()}closePopup(){super.closePopup(),this.editMode.setEditOverlay(!0)}},{createElement:eh,merge:ep,error:eu,fireEvent:em}=c(),eg=class{constructor(e,t){this.changedOptions={},this.chartOptionsJSON={},this.oldOptionsBuffer={},this.waitingForConfirmation=!1,this.iconsURLPrefix=e,this.closeSidebar=t}renderContent(e,t,i){let o,s,{editMode:n}=t.board,l=t.editableOptions.getOptions();this.component=t,this.oldOptionsBuffer=t.getEditableOptions(),n&&(this.confirmationPopup=new ed(t.board.container,n.iconsURLPrefix,n,{close:{icon:""}}));let a=eh("div",{className:h.classNames.accordionMenu},{},e);for(let e=0,i=l.length;e<i;e++)o=l[e],s=H.renderCollapseHeader(a,ep({iconsURLPrefix:this.iconsURLPrefix,lang:(t.board?.editMode||h).lang},o)).content,this.renderAccordion(o,s,t);let r=eh("div",{className:h.classNames.accordionMenuButtonsContainer},{},i);H.renderButton(r,{text:(t.board?.editMode||h).lang.confirmButton,className:h.classNames.popupConfirmBtn,callback:async()=>{await this.confirmChanges(),em(n,"confirmEditing")}}),H.renderButton(r,{text:(t.board?.editMode||h).lang.cancelButton,className:h.classNames.popupCancelBtn,callback:()=>{this.cancelChanges(),em(n,"cancelEditing")}}),i.appendChild(r)}updateOptions(e,t){let i,o,s,n,l=e.length-1,a=this.changedOptions;if(0===l&&"chartOptions"===e[0])try{let e=JSON.parse(t);this.chartOptionsJSON=e}catch(e){eu(`Dashboards Error: Wrong JSON config structure passed as a chart options. 
____________
${e}`)}for(let t=0;t<l;t++){let l=e[t];if(a[l]||(a[l]={}),a=a[l],"gridOptions"===l){let e=this.component.grid?.options;if(e){let t=this.oldOptionsBuffer;t.gridOptions||(t.gridOptions={}),n=t.gridOptions,s=e}}else s&&n&&(s=s[l],void 0===n[l]&&(n[l]={}),n=n[l]);if("chartOptions"===l){let e=this.component.chart?.options;if(e){let t=this.oldOptionsBuffer;t.chartOptions||(t.chartOptions={}),o=t.chartOptions,i=e}}else i&&o&&(i=i[l],void 0===o[l]&&(o[l]={}),o=o[l])}let r=e[l];a[r]=t,o&&i&&(o[r]=o[r]??i[r]),this.component?.update(this.changedOptions)}renderAccordion(e,t,i){if("nested"===e.type)return this.renderNested(t,e,i);let o=H.getRendererFunction(e.type);o&&o(t,{...e,iconsURLPrefix:this.iconsURLPrefix,value:i.getEditableOptionValue(e.propertyPath),enabledOnOffLabels:"toggle"===e.type,onchange:t=>this.updateOptions(e.propertyPath||[],t)})}renderNested(e,t,i){if(!e||!t.nestedOptions)return;let o=t.nestedOptions;for(let t=0,s=o.length;t<s;++t){let s=o[t].name,n=o[t].options,l=!!o[t].showToggle,a=o[t].propertyPath||[],r=(i.board?.editMode||h).lang,c=H.renderCollapseHeader(e,{name:s,isEnabled:!!i.getEditableOptionValue(a),iconsURLPrefix:this.iconsURLPrefix,showToggle:l,onchange:e=>this.updateOptions(a,e),isNested:!!n,isStandalone:!n,lang:r});for(let e=0,t=n?.length;e<t;++e)this.renderAccordion(ep(n[e],{lang:r,isNested:!0}),c.content,i)}}cancelChanges(){Object.keys(this.changedOptions).length<1?this.closeSidebar():this.showCancelConfirmationPopup()}async confirmChanges(){let e=this.component;if(e){if("Highcharts"===e.type&&Object.keys(this.chartOptionsJSON).length)await e.update({chartOptions:this.chartOptionsJSON});else if("HTML"===e.type){let t=this.changedOptions;await e.update(t,!0)}em(e.board.editMode,"componentChanged",{target:e,changedOptions:ep({},this.changedOptions),oldOptions:ep({},this.oldOptionsBuffer)}),this.changedOptions={},this.chartOptionsJSON={},this.closeSidebar()}}async discardChanges(){let e=this.component;e&&(await e.update(this.oldOptionsBuffer),em(e.board.editMode,"componentChangesDiscarded",{target:e,changedOptions:ep({},this.changedOptions),oldOptions:ep({},this.oldOptionsBuffer)}),this.changedOptions={},this.chartOptionsJSON={})}showCancelConfirmationPopup(){let e=this.confirmationPopup,t=this.component?.board?.editMode;e&&t&&!this.waitingForConfirmation&&(this.waitingForConfirmation=!0,e.show({text:t.lang.confirmDiscardChanges,confirmButton:{value:t.lang.confirmButton,callback:async()=>{await this.discardChanges(),this.waitingForConfirmation=!1,this.closeSidebar()},context:this},cancelButton:{value:t.lang.cancelButton,callback:()=>{e.closePopup(),t.setEditOverlay(),setTimeout(()=>{this.waitingForConfirmation=!1},100)}}}))}};var eb=l(376),ef=l.n(eb);let{addEvent:eC,fireEvent:ev}=c();!function(e){function t(e,t){let i;"string"==typeof e&&document.querySelectorAll("#"+e).length>1&&console.warn(`Multiple cells have identical ID %c${e}%c, potentially leading to unexpected behavior. 
Ensure that each cell has a unique ID on the page.`,"font-weight: bold","");let o=t?t.querySelector("#"+e):document.getElementById(e);return null!==o&&ev(o,"bindedGUIElement",{},function(e){i=e.guiElement}),i}async function i(t,i,o){let s=t.states,n=t.events,l=t.renderTo;if(!l)return void console.error("The%c renderTo%c option is required to render the component.","font-weight: bold","");if(i.mountedComponents.filter(e=>e.options.renderTo===l).length>0)return void console.error(`A component has already been declared in the cell %c${l}%c use a different cell.`,"font-weight: bold","");o=o||e.getCell(l,i.container);let a=o?.container||document.querySelector("#"+l);if(!a||!t.type)return void console.error(`The component is unable to find the HTML cell element %c${l}%c to render the content.`,"font-weight: bold","");let r=ef().types[t.type];!r&&(console.error(`The component's type %c${t.type}%c does not exist.`,"font-weight: bold",""),o&&(r=ef().types.HTML,t.title={text:i.editMode?.lang.errorMessage||"Something went wrong",className:c().classNamePrefix+"component-title-error "+c().classNamePrefix+"component-title"}));let d=new r(o,t,i),h=d.load().catch(e=>{console.error(e),d.update({connector:{id:""},title:{text:i.editMode?.lang.errorMessage||"Something went wrong",className:c().classNamePrefix+"component-title-error "+c().classNamePrefix+"component-title"}})});return o&&(d.setCell(o),o.mountedComponent=d),i.mountedComponents.push({options:t,component:d,cell:o||new N({id:l,container:a,mountedComponent:d})}),o&&s?.active?.enabled&&s?.active?.isActive&&(o.setActiveState(),d.isActive=!0),ev(d,"mount"),eC(a,"click",()=>{n&&n.click&&n.click.call(d),o&&d&&a&&s?.active?.enabled&&(o.setActiveState(),d.isActive=!0)}),s?.hover?.enabled&&a.classList.add(c().classNames.cellHover),ev(d,"afterLoad"),h}e.addComponent=i,e.getCell=function(e,i){let o=t(e,i);if(o&&"cell"===o.getType())return o},e.getRow=function(e,i){let o=t(e,i);if(o&&"row"===o.getType())return o},e.getLayout=function(e,i){let o=t(e,i);if(o&&"layout"===o.getType())return o}}(o||(o={}));let ey=o,{pick:ew,defined:ex,merge:eN,objectEach:eM,fireEvent:eE}=c();class eO extends f{static setContainerHeight(e,t){t&&(e.style.height=t+"px")}constructor(e,t,i){super(),this.type=c().guiElementType.row,this.layout=e,this.cells=[],this.options=t,this.isVisible=!0;let o=document.getElementById(t.parentContainerId||"")||e.container,s=e.options||{},n=s.rowClassName||"";this.container=this.getElementContainer({render:e.board.guiEnabled,parentContainer:o,attribs:{id:t.id,className:c().classNames.row+" "+n},element:i,elementId:t.id,style:eN(s.style,t.style)}),this.options.cells&&this.setCells()}setCells(){let e,t,i,o=(this.layout.options||{}).cellClassName||"",s=ew(this.options.cells,this.container&&this.container.getElementsByClassName(o))||[];for(t=0,i=s.length;t<i;++t)e=s[t],this.addCell(this.layout.board.guiEnabled?e:{id:""},e instanceof HTMLElement?e:void 0)}addCell(e,t,i){let o=new w(this,e,t);return ex(i)?this.mountCell(o,i):this.cells.push(o),this.layout.board.editMode&&this.layout.board.editMode.setCellEvents(o),o}destroy(){let{layout:e}=this,t=[...this.cells];for(let e=0,i=t?.length;e<i;++e)t[e]&&t[e].destroy();this.layout&&(this.layout.unmountRow(this),super.destroy(),e.rows?.length===0&&e.destroy())}getOptions(){let e=[];for(let t=0,i=this.cells.length;t<i;++t)e.push(this.cells[t].getOptions());return{id:this.options.id,style:this.options.style,cells:e}}setSize(e){eO.setContainerHeight(this.container,e)}getCellIndex(e){for(let t=0,i=this.cells?.length;t<i;++t)if(this.cells[t].id===e.id)return t}mountCell(e,t=0){let i=this,o=i.cells[t],s=i.cells[t-1];e.container&&(o&&o.container?o.container.parentNode.insertBefore(e.container,o.container):s&&s.container?s.container.parentNode.insertBefore(e.container,s.container.nextSibling):s||o||!i.container||i.container.appendChild(e.container),i.cells.splice(t,0,e),e.row=i,setTimeout(()=>{eE(i,"cellChange",{row:i,cell:e})},0))}unmountCell(e){let t=this.getCellIndex(e);ex(t)&&this.cells.splice(t,1),setTimeout(()=>{eE(this,"cellChange",{row:this,cell:e})},0)}getVisibleCells(){let e=[];for(let t=0,i=this.cells.length;t<i;++t)this.cells[t].isVisible&&e.push(this.cells[t]);return e}changeVisibility(e=!0,t){super.changeVisibility(e,t),this.layout.getVisibleRows().length?this.isVisible&&!this.layout.isVisible&&this.layout.show():this.layout.hide()}show(){this.changeVisibility(!0,"flex")}setHighlight(e){let t=this.container.classList,i=h.classNames.rowContextHighlight;!0===e?t.remove(i):t.toggle(i,!e)}getRowLevels(){let e,t,i={},o=[];for(let o=0,s=this.cells.length;o<s;++o)(e=this.cells[o]).isVisible&&(i[(t=f.getOffsets(e)).top]||(i[t.top]={top:t.top,bottom:t.bottom,cells:[]}),i[t.top].bottom<t.bottom&&(i[t.top].bottom=t.bottom),i[t.top].cells.push(e));return eM(i,e=>{o.push(e)}),o}getRowLevelInfo(e){let t,i=this.getRowLevels();for(let o=0,s=i.length;o<s;++o)i[o].top<=e&&i[o].bottom>e&&(t={index:o,rowLevels:i,rowLevel:i[o]});return t}}let{pick:eT,defined:eL}=c(),eP=class extends f{constructor(e,t,i){super(),this.type=c().guiElementType.layout,this.board=e,this.rows=[],this.options=t,this.isVisible=!0;let o=i?i.container:document.getElementById(t.parentContainerId||"")||e.layoutsWrapper;i?(this.parentCell=i,this.level=i.row.layout.level+1):this.level=0,t.copyId&&(this.copyId=t.copyId);let s=(this.options||{}).rowClassName||"";this.container=this.getElementContainer({render:e.guiEnabled,parentContainer:o,attribs:{id:(t.id||"")+(this.copyId?"_"+this.copyId:""),className:c().classNames.layout+" "+s},elementId:t.id,style:this.options.style}),this.options.rows&&this.setRows()}setRows(){let e,t,i,o=eT(this.options.rows,this.container&&this.container.getElementsByClassName(this.options.rowClassName||""))||[];for(t=0,i=o.length;t<i;++t)e=o[t],this.addRow(this.board.guiEnabled?e:{},e instanceof HTMLElement?e:void 0)}addRow(e,t,i){let o=new eO(this,e,t);return eL(i)?this.mountRow(o,i):this.rows.push(o),this.board.editMode&&this.board.editMode.setRowEvents(o),o}destroy(){for(let e=this.board.layouts.length-1;e>=0;e--)this.board.layouts[e]===this&&this.board.layouts.splice(e,1);this.parentCell&&delete this.parentCell.nestedLayout;for(let e=this.rows.length-1;e>=0;e--)this.rows[e].destroy();this.parentCell&&this.parentCell.destroy(),super.destroy()}getRowIndex(e){for(let t=0,i=this.rows.length;t<i;++t)if(this.rows[t]===e)return t}mountRow(e,t){let i=this.rows[t],o=this.rows[t-1];e.container&&(i&&i.container?i.container.parentNode.insertBefore(e.container,i.container):o&&o.container&&o.container.parentNode.insertBefore(e.container,o.container.nextSibling),this.rows.splice(t,0,e),e.layout=this)}unmountRow(e){let t=this.getRowIndex(e);eL(t)&&this.rows.splice(t,1)}getVisibleRows(){let e=[];for(let t=0,i=this.rows.length;t<i;++t)this.rows[t].isVisible&&e.push(this.rows[t]);return e}changeVisibility(e=!0){super.changeVisibility(e),this.parentCell&&(this.isVisible&&!this.parentCell.isVisible?this.parentCell.show():!this.isVisible&&this.parentCell.isVisible&&this.parentCell.hide())}getOptions(){let e=[];for(let t=0,i=this.rows.length;t<i;++t)e.push(this.rows[t].getOptions());return{id:this.options.id,layoutClassName:this.options.layoutClassName,rowClassName:this.options.rowClassName,cellClassName:this.options.cellClassName,style:this.options.style,rows:e}}},{addEvent:eD,createElement:eR,fireEvent:eB,merge:eS}=c();class eI extends er{constructor(e,t,i){super(e,t),this.options={components:["HTML","row","Highcharts","Grid","KPI"]},this.isVisible=!1,this.componentsList=[],this.editMode=i,this.options=eS(this.options,i.options.toolbars?.sidebar||{}),this.componentsList=this.getComponentsList(this.options.components||[]),this.accordionMenu=new eg(this.iconsURL,this.hide.bind(this))}detectRightSidebar(e){let t=this.editMode,i=t.customHTMLMode?t.board.container:t.board.layoutsWrapper;return!!i&&f.getOffsets(e,i).left<i.offsetWidth/2-10}removeClassNames(){let e=h.classNames,t=this.container.classList;t.remove(e.editSidebarShow),t.remove(e.editSidebarRightShow)}addClassNames(e){let t=this.container.classList;e?t.add(h.classNames.editSidebarRight):t.remove(h.classNames.editSidebarRight),setTimeout(()=>{t.add(h.classNames[e?"editSidebarRightShow":"editSidebarShow"])})}show(e){let t=this.editMode,i=!!(e&&this.detectRightSidebar(e));this.showPopup(h.classNames.editSidebarShow),this.addClassNames(i),t.resizer&&t.resizer.disableResizer(),w.isCell(t.editCellContext)&&t.editCellContext.row&&t.editCellContext.row.setHighlight(),t.hideToolbars(["cell","row"]),t.stopContextDetection(),this.isVisible=!0,this.generateContent(e)}generateContent(e){if(this.container.innerHTML=en().emptyHTML,this.renderHeader(e?this.editMode.lang.settings:this.editMode.lang.addComponent,""),this.sidebarWrapper=eR("div",{className:h.classNames.editSidebarWrapper},void 0,this.container),!e)return void this.renderAddComponentsList();if(this.type=e.getType(),"cell-html"===this.type||"cell"===this.type){let t=e.mountedComponent;if(!t)return;this.accordionMenu.renderContent(this.sidebarWrapper,t,this.container)}}renderAddComponentsList(){let e,t=this,i=this.componentsList,o=eR("div",{className:h.classNames.editGridItems},{},t.sidebarWrapper);for(let s=0,n=i.length;s<n;++s)(e=eR("div",{},{},o)).addEventListener("mousedown",e=>{e.preventDefault();let o=t.editMode.dragDrop;if(o){let n=e=>{let i=t.container.getBoundingClientRect();(e.clientX<i.left||e.clientX>i.right||e.clientY<i.top||e.clientY>i.bottom)&&(t.hide(),document.removeEventListener("mousemove",n))},l=()=>{document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",l)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",l),o.onDragStart(e,void 0,e=>{if(0===this.editMode.board.layouts.length){let t=this.editMode.board,i=new eP(t,{id:f.getElementId("layout"),copyId:"",parentContainerId:t.container.id,rows:[{}],style:{}});i&&t.layouts.push(i),e=i.rows[0]}if(!e?.type){let i=t.editMode.board.layouts;o.dropContext=e=i[i.length-1].addRow({},void 0)}let l=i[s].onDrop(t,e),a=eD(this.editMode,"layoutChanged",e=>{if(l&&"newComponent"===e.type){let e=l.mountedComponent?.chart,i=this.editMode.options.settings?.enabled;if(e?.isDirtyBox){let o=eD(e,"render",()=>{t.editMode.setEditCellContext(l),i&&(t.show(l),l.setHighlight()),o(),a()})}else t.editMode.setEditCellContext(l),i&&(t.show(l),l.setHighlight()),a()}});document.removeEventListener("mousemove",n)})}}),e.innerHTML=i[s].text}onDropNewComponent(e,t){let i=this.editMode.dragDrop;if(!i)return;let o=("cell"===e.getType()?e.row:e).addCell({id:f.getElementId("col")});i.onCellDragEnd(o);let s=eS(t,{renderTo:o.id}),n=ey.addComponent(s,this.editMode.board,o);return this.editMode.setEditOverlay(!this.editMode.options.settings?.enabled),(async()=>{let e=await n;e&&eB(this.editMode,"layoutChanged",{type:"newComponent",target:e})})(),o}hide(){let e=this.editMode,t=e.editCellContext;this.removeClassNames(),this.container.style.display="none",e.isEditOverlayActive&&e.setEditOverlay(!0),w.isCell(t)&&t.row?(e.showToolbars(["cell","row"],t),t.row.setHighlight(!0),t.setHighlight(!0),e.resizer&&e.resizer.setSnapPositions(e.editCellContext)):N.isCellHTML(t)&&e.cellToolbar&&(e.cellToolbar.showToolbar(t),t.setHighlight()),e.isContextDetectionActive=!0,this.isVisible=!1}closeButtonEvents(){"cell"===this.type||"cell-html"===this.type?this.accordionMenu.cancelChanges():this.hide()}renderHeader(e,t){if(!this.container)return;let i=eR("div",{className:h.classNames.editSidebarHeader},{},this.container);this.container.appendChild(i),this.headerWrapper=i;let o=H.renderIcon(this.headerWrapper,{icon:t,className:h.classNames.editSidebarTitle});o&&(o.textContent=e),this.headerWrapper?.appendChild(this.closeButton)}getComponentsList(e){let t=this.editMode,i=t.board.componentTypes,o=[];return e.forEach(e=>{let s=i[e];s?o.push({text:t.lang?.sidebar[e]||s.name,onDrop:function(e,t){let i=s.prototype.getOptionsOnDrop(e);if(i)return e.onDropNewComponent(t,i)}}):"row"===e&&o.push({...eI.addRow,text:t.lang?.sidebar[e]||eI.addRow.text})}),o}addCloseButton(e=h.classNames.popupCloseButton){return eD(document,"click",e=>{e.stopPropagation(),"block"===this.container.style.display&&!this.container.contains(e.target)&&this.container.classList.value.includes("show")&&("cell"===this.type||"cell-html"===this.type?this.accordionMenu.cancelChanges():this.hide())}),super.addCloseButton.call(this,e)}createPopupContainer(e,t=h.classNames.editSidebar){return super.createPopupContainer.call(this,e,t)}}eI.addRow={text:h.lang.sidebar.row,onDrop:function(e,t){if(!t)return;let i="cell"===t.getType(),o=(i?t.row:t).layout.board,s=f.getElementId("cell");if(i){let e=new eP(o,{id:f.getElementId("layout"),copyId:"",parentContainerId:o.container.id,rows:[{cells:[{id:s}]}],style:{}});o.layouts.push(e),eB(o.editMode,"layoutChanged",{type:"newLayout",target:e,board:o})}else t.layout.rows[0].addCell({id:s});ey.addComponent({type:"HTML",renderTo:s,className:"highcharts-dashboards-component-placeholder",html:`
                    <h2> Placeholder </h2>
                    <span> This placeholder can be deleted when you add extra
                        components to this row.
                    </span>
                    `},o)}};let{addEvent:ek,merge:eA}=c();class eH extends _{constructor(e,t,i){if(super(i.board.container,eA(eH.defaultOptions,t||{}),i),this.editMode=i,this.options=eA(eH.defaultOptions,t||{}),this.editMode.board.layoutsWrapper?.parentNode.insertBefore(this.container,this.editMode.board.layoutsWrapper),this.container.style.width=this.options.width+"px",super.initItems(eH.items),this.options.items){let e=[];for(let t=0,i=this.options.items.length;t<i;++t)"string"==typeof this.options.items[t]?e.push(this.options.items[t]):this.options.items[t].id&&e.push(this.options.items[t].id);this.setActiveItems(e)}this.initEvents()}initEvents(){let e=this;ek(document,"click",t=>{t.target!==this.container&&t.target!==e.editMode.tools.contextButtonElement&&!t.target.classList.contains(h.classNames.toggleSlider)&&"INPUT"!==t.target.tagName&&this.isVisible&&this.setVisible(!1)})}setVisible(e){let t=this.editMode.tools.contextButtonElement;this.container&&t&&(e?(this.container.style.display="block",this.isVisible=!0,t.setAttribute("aria-expanded","true")):(this.container.style.display="none",this.isVisible=!1,t.setAttribute("aria-expanded","false")));let i=this.activeItems.find(e=>"editMode"===e.options.langKey);i&&i.options.setValue(i,this.editMode.isActive())}updatePosition(e,t,i){let o=this.options.width||0,s=e?e.offsetLeft-o+e.offsetWidth:t,n=e?e.offsetTop+e.offsetHeight:i;s&&n&&(this.container.style.left=s+"px",this.container.style.top=n+"px")}}eH.defaultOptions={enabled:!0,width:150,className:h.classNames.contextMenu,itemsClassName:h.classNames.contextMenuItem,items:["editMode"]},eH.items=eA(_.items,{editMode:{id:"editMode",type:"toggle",getValue:function(e){return e.menu.editMode.isActive()},setValue:function(e,t){let i=e.innerElement?.querySelector("input");i&&(i.checked=t)},langKey:"editMode",events:{click:function(){this.menu.editMode.toggleEditMode()}}}});let{defined:eV}=c();class ez{static isGUIElementOnParentEdge(e,t){let i="top"===t||"bottom"===t?e.row.layout.getVisibleRows():"left"===t||"right"===t?e.row.getVisibleCells():[],o=i.length-1;return i[o]===e&&"right"===t||i[o]===e.row&&"bottom"===t||i[0]===e&&"left"===t||i[0]===e.row&&"top"===t}static getContextLevel(e,t,i,o){let s=e.getOverlappingLevels(o,t/2),n=t/s.length,l=s[s.length-1],a=e.row.layout.level-Math.floor(i/n);return a<l?l:a>e.row.layout.level?e.row.layout.level:a}static getContext(e,t,i){let o,s=f.getOffsets(e),{width:n,height:l}=f.getDimFromOffsets(s);n<2*i&&(i=n/2);let a=t.clientX-s.left,r=t.clientY-s.top,c="bottom";switch(a>=-i&&a<=i?c="left":a-n>=-i&&a-n<=i?c="right":r>=-i&&r<=i?c="top":r-l>=-i&&r-l<=i&&(c="bottom"),c){case"right":o=a-n+i;break;case"left":o=i-a;break;case"top":o=i-r;break;case"bottom":o=r-l+i}let d={cell:e,side:c};if(e.row?.layout.level&&c&&ez.isGUIElementOnParentEdge(e,c)&&eV(o)){let t=ez.getContextLevel(e,i,o,c),s=e.getParentCell(t);s&&(d.cell=s)}return d}}let{addEvent:eW,merge:eF,css:eU,fireEvent:eX,createElement:e_}=c();class eY{constructor(e,t){this.editMode=e,this.options=eF(eY.defaultOptions,t),this.mockElement=e_("div",{className:h.classNames.dragMock},{},e.board.container),this.dropPointer={isVisible:!1,align:"",element:e_("div",{className:h.classNames.dropPointer},{},e.board.container)},this.isActive=!1,this.initEvents()}showDropPointer(e,t,i,o){this.dropPointer.isVisible=!0,eU(this.dropPointer.element,{display:"block",left:e+"px",top:t+"px",height:o+"px",width:i+"px"})}hideDropPointer(){this.dropPointer.isVisible&&(this.dropPointer.isVisible=!1,this.dropPointer.align="",this.dropPointer.element.style.display="none")}setMockElementPosition(e){let t=this.editMode.board.container.getBoundingClientRect(),i=this.mockElement.clientWidth/2,o=e.clientX-t.left-i,s=e.clientY-t.top-i;eU(this.mockElement,{left:o+"px",top:s+"px"})}initEvents(){eW(document,"mousemove",this.onDrag.bind(this)),eW(document,"mouseup",this.onDragEnd.bind(this))}onDragStart(e,t,i){this.isActive=!0,this.editMode.hideToolbars(["cell","row"]),this.editMode.resizer&&this.editMode.resizer.disableResizer(),this.setMockElementPosition(e),t?(this.context=t,t.hide(),t.getType()===c().guiElementType.cell&&(eX(this.editMode.board,"cellResize",{cell:t}),eX(t.row,"cellChange",{cell:t,row:t.row}))):i&&(this.dragEndCallback=i),eU(this.mockElement,{cursor:"grabbing",display:"block"})}onDrag(e){this.isActive&&(e.preventDefault(),this.setMockElementPosition(e),this.context?this.context.getType()===c().guiElementType.cell?this.onCellDrag(e):this.context.getType()===c().guiElementType.row&&this.onRowDrag(e):this.dragEndCallback&&this.onCellDrag(e))}onDragEnd(){this.isActive&&(this.isActive=!1,eU(this.mockElement,{cursor:"grab",display:"none"}),this.context?(this.context.getType()===c().guiElementType.cell?this.onCellDragEnd():this.context.getType()===c().guiElementType.row&&this.onRowDragEnd(),this.context=void 0,this.editMode.editCellContext&&(this.editMode.showToolbars(["row","cell"],this.editMode.editCellContext),this.editMode.resizer&&this.editMode.resizer.setSnapPositions(this.editMode.editCellContext))):this.dragEndCallback&&(this.dragEndCallback(this.dropContext),this.dragEndCallback=void 0,this.hideDropPointer()))}onRowDrag(e,t){let i=this.mouseCellContext,o=this.options.dropPointerSize||0,s=this.options.rowDropOffset||0,n=!1;if(i){let l=t||ez.getContext(i,e,s),a=l.side;if((this.dropPointer.align!==a||this.dropContext!==l.cell.row)&&(n=!0,this.dropPointer.align=a,this.dropContext=l.cell.row),a){let e=f.getOffsets(this.dropContext,this.editMode.board.container),{width:t,height:i}=f.getDimFromOffsets(e);(!this.dropPointer.isVisible||n)&&this.showDropPointer(e.left,e.top+("bottom"===this.dropPointer.align?i:0)-o/2,t,o)}else this.dropContext=void 0,this.hideDropPointer()}}onRowDragEnd(){let e=this.context,t=this.dropContext;this.dropPointer.align&&(e.layout.unmountRow(e),0===e.layout.rows.length&&e.layout.destroy(),t.layout.mountRow(e,(t.layout.getRowIndex(t)||0)+ +("bottom"===this.dropPointer.align)),e.cells[0]&&(eX(this.editMode.board,"cellResize",{cell:e.cells[0]}),eX(e,"cellChange",{cell:e.cells[0],row:e}))),this.hideDropPointer(),e.show(),eX(this.editMode,"layoutChanged",{type:"rowDragEnd",target:e,board:this.editMode.board})}onCellDrag(e,t){let i=this.mouseCellContext,o=this.options.cellDropOffset||0;i||t?this.onCellDragCellCtx(e,t||ez.getContext(i,e,o)):this.mouseRowContext&&this.onCellDragRowCtx(e,this.mouseRowContext)}onCellDragCellCtx(e,t){let i=this.options.dropPointerSize||0,o=t.side,s=!1;if((this.dropPointer.align!==o||this.dropContext!==t.cell)&&(s=!0,this.dropPointer.align=o,this.dropContext=t.cell),"right"===o||"left"===o){let t=f.getOffsets(this.dropContext,this.editMode.board.container),{width:n,height:l}=f.getDimFromOffsets(t);if(!this.dropPointer.isVisible||s){let s=this.dropContext.row.getRowLevelInfo(e.clientY),a=s?s.rowLevel.bottom-s.rowLevel.top:l;this.showDropPointer(t.left+("right"===o?n:0)-i/2,t.top,i,a)}}else if("top"===o||"bottom"===o){let i=f.getOffsets(this.dropContext),s=this.dropContext.row.getRowLevelInfo(i.top);s&&(0===s.index&&"top"===o||s.index===s.rowLevels.length-1&&"bottom"===o)&&this.onRowDrag(e,t)}else this.dropContext=void 0,this.hideDropPointer()}onCellDragRowCtx(e,t){let i,o,s=this.options.dropPointerSize||0,n=f.getOffsets(t),l=t.getRowLevelInfo(e.clientY);if(l)for(let t=0,a=l.rowLevel.cells.length;t<a;++t){i=l.rowLevel.cells[t],o=f.getOffsets(i);let{width:r,height:c}=f.getDimFromOffsets(o),d=this.editMode.board.container.getBoundingClientRect(),h=l.rowLevel.bottom-l.rowLevel.top;if(i.isVisible){if(c<.8*h&&o.left<=e.clientX&&o.right>=e.clientX)o.top>e.clientY||o.bottom<e.clientY&&(this.showDropPointer(o.left-d.left,o.top-d.top+c,r,h-c),this.dropPointer.align="nestedBottom",this.dropContext=i),t=a;else if(0===t&&o.left>e.clientX||t===a-1&&o.right<e.clientX){if(o.left>e.clientX);else if(o.right<e.clientX){let l=n.right-o.right;this.showDropPointer(o.left+(0===t&&o.left>e.clientX?0:r)-s/2-d.left,o.top-d.top,l>s?l:s,h||c),this.dropPointer.align="right",this.dropContext=i}t=a}}else i.isVisible||i!==this.context||(this.dropContext=void 0,this.hideDropPointer())}}onCellDragEnd(e){let t=e||this.context,i=this.dropContext;if(this.dropPointer.align&&i&&t)if(t.row.unmountCell(t),0===t.row.cells.length&&t.row.destroy(),("top"===this.dropPointer.align||"bottom"===this.dropPointer.align)&&i.getType()===c().guiElementType.row)i.layout.addRow({},void 0,(i.layout.getRowIndex(i)||0)+ +("bottom"===this.dropPointer.align)).mountCell(t,0);else if("nestedBottom"===this.dropPointer.align&&i.getType()===c().guiElementType.cell){let e=i.row,o=e.getCellIndex(i);e.unmountCell(i);let s=e.addCell({id:f.getElementId("col-nested"),layout:{rows:[{},{}]}},void 0,o);s.nestedLayout&&(s.nestedLayout.rows[0].mountCell(i),s.nestedLayout.rows[1].mountCell(t))}else i.getType()===c().guiElementType.cell&&i.row.mountCell(t,(i.row.getCellIndex(i)||0)+ +("right"===this.dropPointer.align));eX(this.editMode.board,"cellResize",{cell:t}),eX(t.row,"cellChange",{cell:t,row:t.row}),this.hideDropPointer(),t.show(),eX(this.editMode,"layoutChanged",{type:"cellDragEnd",target:t,board:this.editMode.board})}}eY.defaultOptions={enabled:!0,rowDropOffset:30,cellDropOffset:30,dropPointerSize:16};let{merge:ej,addEvent:eJ,createElement:eK,fireEvent:eG,removeEvent:eq}=c();class e${static fromJSON(e,t){return new e$(e,t.options)}constructor(e,t){this.editMode=e,this.options=ej({},e$.defaultOptions,e.options.resize,t),this.currentCell=void 0,this.isX=this.options.type.indexOf("x")>-1,this.isY=this.options.type.indexOf("y")>-1,this.isActive=!1,this.startX=0,this.tempSiblingsWidth=[],this.addSnaps()}addSnaps(){let e=this.editMode.iconsURLPrefix,t=this.options.snap.width||0,i=this.options.snap.height||0,o=this.editMode.board.container;this.snapRight=eK("img",{className:h.classNames.resizeSnap+" "+h.classNames.resizeSnapX,src:e+"resize-handle.svg"},{width:t+"px",height:i+"px",left:"-9999px"},o),this.snapBottom=eK("img",{className:h.classNames.resizeSnap+" "+h.classNames.resizeSnapY,src:e+"resize-handle.svg"},{width:t+"px",height:i+"px",top:"-9999px",left:"0px"},o),this.addResizeEvents()}disableResizer(){this.isActive=!1,this.currentDimension=void 0,this.currentCell=void 0,this.snapRight&&(this.snapRight.style.left="-9999px"),this.snapBottom&&(this.snapBottom.style.left="-9999px")}setSnapPositions(e){this.currentCell=e;let t=f.getOffsets(e,this.editMode.board.container),i=t.left||0,o=t.top||0,{width:s,height:n}=f.getDimFromOffsets(t),l=this.options.snap.width||0,a=this.options.snap.height||0;this.snapRight&&(this.snapRight.style.left=i+s-l+"px",this.snapRight.style.top=o+n/2-a/2+"px"),this.snapBottom&&(this.snapBottom.style.top=o+n-a+"px",this.snapBottom.style.left=i+s/2-l/2+"px")}setTempWidthSiblings(){let e=this.currentCell;if(e){let t,i,o=f.getOffsets(e),s=e.row.getRowLevelInfo(o.top),n=s&&s.rowLevel.cells||[];for(let o=0,s=n.length;o<s&&(t=(i=n[o]).container,i!==e);++o)t&&(t.style.flex="0 0 "+t.offsetWidth+"px",this.tempSiblingsWidth.push(i))}}revertSiblingsAutoWidth(){let e,t,i=this.tempSiblingsWidth;for(let o=0,s=i.length;o<s;++o)(e=i[o].container)&&(e.style.flex="1 1 0%",t=i[o]);this.tempSiblingsWidth=[],t&&(eG(this.editMode.board,"cellResize",{cell:t}),eG(t.row,"cellChange",{cell:t,row:t.row}))}addResizeEvents(){let e,t,i,o,s=this;s.mouseDownSnapX=e=function(e){s.isActive=!0,s.currentDimension="x",s.editMode.hideToolbars(["row","cell"]),s.setTempWidthSiblings(),s.startX=e.clientX},s.mouseDownSnapY=t=function(){s.isActive=!0,s.currentDimension="y",s.editMode.hideToolbars(["row","cell"])},s.mouseMoveSnap=i=function(e){s.isActive&&s.onMouseMove(e)},s.mouseUpSnap=o=function(){s.isActive&&(s.isActive=!1,s.currentDimension=void 0,s.revertSiblingsAutoWidth(),s.editMode.showToolbars(["row","cell"],s.currentCell),s.currentCell&&s.setSnapPositions(s.currentCell))},eJ(this.snapRight,"mousedown",e),eJ(this.snapBottom,"mousedown",t),eJ(document,"mousemove",i),eJ(document,"mouseup",o);let n=()=>{s.currentCell&&s.setSnapPositions(s.currentCell)};if("function"==typeof ResizeObserver)this.resizeObserver=new ResizeObserver(n),this.resizeObserver.observe(s.editMode.board.container);else{let e=eJ(window,"resize",n);eJ(this,"destroy",e)}}onMouseMove(e){let t=this.currentCell,i=t&&t.container,o=this.currentDimension;if(t&&i&&!((t.row.layout.board.editMode||{}).dragDrop||{}).isActive){let i=f.getOffsets(t),{width:s}=f.getDimFromOffsets(f.getOffsets(t.row));if("x"===o){let o=Math.min(e.clientX-i.left,s)/s*100+"%";t.setSize(o),this.startX=e.clientX}"y"===o&&t.setSize(void 0,e.clientY-i.top),eG(this.editMode.board,"cellResize",{cell:t}),eG(t.row,"cellChange",{cell:t,row:t.row}),this.setSnapPositions(t)}}destroy(){let e,t=["snapRight","snapBottom"];eq(document,"mousemove"),eq(document,"mouseup"),this.resizeObserver?.unobserve(this.editMode.board.container);for(let i=0,o=t.length;i<o;++i)eq(e=this[t[i]],"mousedown"),e.remove()}toJSON(){let e=this.options;return{$class:"Dashboards.Action.Resizer",options:{enabled:e.enabled,styles:{minWidth:e.styles.minWidth,minHeight:e.styles.minHeight},type:e.type,snap:{width:e.snap.width,height:e.snap.height}}}}}e$.defaultOptions={enabled:!0,styles:{minWidth:20,minHeight:50},type:"xy",snap:{width:9,height:17}};let{addEvent:eQ,createElement:eZ,css:e0,merge:e1}=c(),e9=class{constructor(e,t){this.active=!1,this.customHTMLMode=!1,this.iconsURLPrefix="https://code.highcharts.com/dashboards/3.6.0/gfx/dashboards-icons/",this.iconsURLPrefix=t&&t.iconsURLPrefix||this.iconsURLPrefix,this.options=e1({confirmationPopup:{close:{icon:this.iconsURLPrefix+"close.svg"}},contextMenu:{icon:this.iconsURLPrefix+"menu.svg"},dragDrop:{enabled:!0},enabled:!0,resize:{enabled:!0},settings:{enabled:!0},toolbars:{cell:{enabled:!0},row:{enabled:!0}},tools:{addComponentBtn:{enabled:!0,icon:this.iconsURLPrefix+"add.svg"}}},t||{}),this.board=e,this.lang=e1({},h.lang,this.options.lang),e.boardWrapper=e.container,e.guiEnabled&&this.initLayout(),this.isInitialized=!1,this.isContextDetectionActive=!1,this.tools={},e.editModeEnabled&&(this.customHTMLMode=!this.board.layoutsWrapper,this.contextPointer={isVisible:!1,element:eZ("div",{className:h.classNames.contextDetectionPointer},{},e.container)},this.createTools(),this.confirmationPopup=new ed(e.container,this.iconsURLPrefix,this,this.options.confirmationPopup),this.editOverlay=eZ("div",{className:h.classNames.editOverlay},{},e.container),this.isEditOverlayActive=!1,e.fullscreen=new Dashboards.Fullscreen(e),this.customHTMLMode&&e.container.classList.add(c().classNames.boardContainer))}onContextBtnClick(){this.tools.contextMenu&&(this.tools.contextMenu.isVisible||this.tools.contextMenu.updatePosition(this.tools.contextButtonElement),this.tools.contextMenu.setVisible(!this.tools.contextMenu.isVisible))}toggleEditMode(){this.active?this.deactivate():this.activate()}init(){this.options.resize?.enabled&&!this.customHTMLMode&&(this.resizer=new e$(this,this.options.resize)),this.dragDrop=new eY(this,this.options.dragDrop),!this.options.toolbars?.row?.enabled||this.rowToolbar||this.customHTMLMode||(this.rowToolbar=new eo(this)),this.options.toolbars?.cell?.enabled&&!this.cellToolbar&&(this.cellToolbar=new Z(this)),this.sidebar||(this.sidebar=new eI(this.board.container,this.iconsURLPrefix,this)),this.isInitialized=!0}initEvents(){let e=this,t=e.board;if(this.customHTMLMode){let i=t.mountedComponents.length;for(let o=0;o<i;++o)e.setCellEvents(t.mountedComponents[o].cell)}else for(let i=0,o=t.layouts.length;i<o;++i)e.setLayoutEvents(t.layouts[i]);eQ(document,"keydown",t=>{"Escape"===t.key&&e.isActive()&&(e.hideToolbars(["cell","row"]),e.editCellContext=void 0,e.resizer?.disableResizer())}),e.cellToolbar&&(eQ(e.cellToolbar.container,"mouseenter",function(){e.stopContextDetection()}),eQ(e.cellToolbar.container,"mouseleave",function(){e.isContextDetectionActive=!0})),e.rowToolbar&&(eQ(e.rowToolbar.container,"mouseenter",function(){e.stopContextDetection()}),eQ(e.rowToolbar.container,"mouseleave",function(){e.isContextDetectionActive=!0}));let i=this.customHTMLMode?t.container:t.layoutsWrapper;eQ(i,"mousemove",e.onDetectContext.bind(e)),eQ(i,"click",e.onContextConfirm.bind(e)),eQ(i,"mouseleave",()=>{e.hideContextPointer()})}initLayout(){let e=this.board;e.container.innerHTML="",e.container=eZ("div",{className:c().classNames.boardContainer},{},e.boardWrapper),e.layoutsWrapper=eZ("div",{className:c().classNames.layoutsWrapper},{},e.container),e.options.gui&&this.setLayouts(e.options.gui)}setLayouts(e){let t=this.board,i=e.layouts;for(let o=0,s=i.length;o<s;++o)t.layouts.push(new eP(t,e1({},e.layoutOptions,i[o])))}setLayoutEvents(e){for(let t=0,i=e.rows.length;t<i;++t){let i=e.rows[t];this.setRowEvents(i);for(let e=0,t=i.cells.length;e<t;++e)this.setCellEvents(i.cells[e])}}setRowEvents(e){let t=this;if(t.dragDrop){let i=t.dragDrop;eQ(e.container,"mouseenter",function(){t.isContextDetectionActive&&(t.mouseRowContext=e)}),eQ(e.container,"mousemove",function(t){i.isActive&&t.target===e.container&&(i.mouseRowContext=e)}),eQ(e.container,"mouseleave",function(){i.isActive&&i.mouseRowContext===e&&(i.mouseRowContext=void 0),t.isContextDetectionActive&&(t.mouseRowContext=void 0)})}}setCellEvents(e){let t=this;if(N.isCellHTML(e))eQ(e.container,"mouseenter",function(){t.isContextDetectionActive&&(t.mouseCellContext=e)});else if(e.nestedLayout)t.setLayoutEvents(e.nestedLayout);else if(t.cellToolbar&&e.container&&(eQ(e.container,"mouseenter",function(){t.isContextDetectionActive&&(t.mouseCellContext=e)}),t.dragDrop||t.resizer)){let i=t.dragDrop;eQ(e.container,"mousemove",function(t){i&&i.isActive&&t.target===e.container&&(i.mouseCellContext=e,i.mouseRowContext=void 0)}),eQ(e.container,"mouseleave",function(){i&&i.isActive&&i.mouseCellContext===e&&(i.mouseCellContext=void 0),t.isContextDetectionActive&&(t.mouseCellContext=void 0)})}}activate(){this.isInitialized||(this.init(),this.initEvents()),this.board.container.classList.add(h.classNames.editModeEnabled),this.addComponentBtn&&(this.addComponentBtn.style.display="block"),this.active=!0,this.isContextDetectionActive=!0}deactivate(){this.board.container.classList.remove(h.classNames.editModeEnabled),this.hideToolbars(),this.editCellContext&&w.isCell(this.editCellContext)&&this.editCellContext.row?.setHighlight(),this.addComponentBtn&&(this.addComponentBtn.style.display="none"),this.resizer&&this.resizer.disableResizer(),this.board.layoutsWrapper&&(this.board.layoutsWrapper.style.width="100%"),this.board.reflow(),this.active=!1,this.stopContextDetection(),this.editCellContext=void 0,this.potentialCellContext=void 0}isActive(){return this.active}hideToolbars(e){let t=e||["cell","row","sidebar"];for(let e=0,i=t.length;e<i;++e)switch(t[e]){case"cell":this.cellToolbar&&this.cellToolbar.isVisible&&this.cellToolbar.hide();break;case"row":this.rowToolbar&&this.rowToolbar.isVisible&&this.rowToolbar.hide();break;case"sidebar":this.sidebar&&this.sidebar.isVisible&&this.sidebar.hide()}}showToolbars(e,t){let i=e||["cell","row","sidebar"];for(let e=0,o=i.length;e<o;++e)switch(i[e]){case"cell":t&&this.cellToolbar&&this.cellToolbar.showToolbar(t);break;case"row":t&&t.row&&this.rowToolbar&&this.rowToolbar.showToolbar(t.row);break;case"sidebar":this.sidebar&&!this.sidebar.isVisible&&this.sidebar.show()}}createTools(){let e=this,{board:t,options:i,tools:o}=e;if(o.container=document.createElement("div"),o.container.classList.add(h.classNames.editTools),t.layoutsWrapper?t.layoutsWrapper.parentNode.insertBefore(o.container,t.layoutsWrapper):t.container.insertBefore(o.container,t.container.firstChild),i.contextMenu&&i.contextMenu.enabled&&(i.contextMenu.items?.length?(o.contextButtonElement=H.renderContextButton(o.container,e),e.tools.contextMenu||(e.tools.contextMenu=new eH(e.board.container,e.options.contextMenu||{},e))):o.standaloneEditToggle=H.renderToggle(o.container,{id:eH.items.editMode.id,name:eH.items.editMode.id,className:h.classNames.editStandaloneToggle,title:e.lang.editMode,value:e.isActive(),lang:e.lang,langKey:"editMode",onchange(){e.toggleEditMode()}})),i.tools?.addComponentBtn?.enabled&&i.toolbars?.cell?.enabled&&!this.customHTMLMode){let t=i.tools.addComponentBtn.icon;this.addComponentBtn=H.renderButton(o.container,{className:h.classNames.editToolsBtn,icon:t,text:this.lang.addComponent,callback:()=>{e.sidebar&&(e.sidebar.show(),e.setEditOverlay())},style:{display:"none"}})}}onDetectContext(){let e;if(this.isActive()&&this.isContextDetectionActive&&(this.mouseCellContext||this.mouseRowContext)&&!(this.dragDrop||{}).isActive&&(this.mouseCellContext?e=this.mouseCellContext:this.mouseRowContext&&(e=this.mouseRowContext.layout.parentCell),this.potentialCellContext=e,e)){let t=f.getOffsets(e,this.board.container),{width:i,height:o}=f.getDimFromOffsets(t);this.showContextPointer(t.left,t.top,i,o)}}stopContextDetection(){this.isContextDetectionActive=!1,this.dragDrop&&(this.dragDrop.mouseCellContext=void 0),this.mouseCellContext=void 0,this.hideContextPointer()}onContextConfirm(){this.isContextDetectionActive&&this.potentialCellContext&&this.editCellContext!==this.potentialCellContext&&this.setEditCellContext(this.potentialCellContext,this.editCellContext)}setEditCellContext(e,t){if(N.isCellHTML(e)||N.isCellHTML(t))this.editCellContext=e,this.cellToolbar?.showToolbar(e);else{let i=t?.row;this.editCellContext=e,this.showToolbars(["row","cell"],e),(!i||i!==e.row)&&(i&&i.setHighlight(!0),e.row&&e.row.setHighlight()),this.resizer&&this.resizer.setSnapPositions(e)}}showContextPointer(e,t,i,o){this.contextPointer&&(this.contextPointer.isVisible=!0,e0(this.contextPointer.element,{display:"block",left:e+"px",top:t+"px",height:o+"px",width:i+"px"}))}hideContextPointer(){this.contextPointer?.isVisible&&(this.contextPointer.isVisible=!1,this.contextPointer.element.style.display="none")}setEditOverlay(e){let t=this.editOverlay,i=t?.classList.contains(h.classNames.editOverlayActive);e||i?e&&i&&(t?.classList.remove(h.classNames.editOverlayActive),this.isEditOverlayActive=!1):(t?.classList.add(h.classNames.editOverlayActive),this.isEditOverlayActive=!0)}},{addEvent:e2}=c(),e6=class{constructor(e){this.isOpen=!1,this.board=e,this.board.boardWrapper.classList.add(c().classNamePrefix+"-fullscreen")}toggle(){this[this.isOpen?"close":"open"]()}open(){if(this.isOpen)return;let e=this,t=e.board,i=e2(t.boardWrapper.ownerDocument,"fullscreenchange",function(){e.isOpen?(e.isOpen=!1,e.close()):(e.isOpen=!0,e.setButtonText())});e.unbindFullscreenEvent=()=>{i()},t.boardWrapper.requestFullscreen().catch(()=>{throw Error("Full screen is not supported.")})}close(){let e=this.board;this.isOpen&&e.boardWrapper.ownerDocument instanceof Document&&e.boardWrapper.ownerDocument.exitFullscreen(),this.unbindFullscreenEvent&&(this.unbindFullscreenEvent=this.unbindFullscreenEvent()),this.isOpen=!1,this.setButtonText()}setButtonText(){let e=this.board.editMode,t=e&&e.tools.contextMenu,i=t&&t.items.viewFullscreen;if(i&&i.innerElement){let t=e.lang;i.innerElement.innerHTML=(this.isOpen?t.exitFullscreen:t.viewFullscreen)||""}}},e3=c();e3.EditMode=e9,e3.Fullscreen=e6;let e7=e3;return a.default})());