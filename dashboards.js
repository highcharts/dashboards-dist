!/**
 * Highcharts Dashboards v2.0.0-rc1 (2024-02-21)
 *
 * (c) 2009-2024 Highsoft AS
 *
 * License: www.highcharts.com/license
 */function(t,e){"object"==typeof module&&module.exports?(e.default=e,module.exports=t&&t.document?e(t):e):"function"==typeof define&&define.amd?define("dashboards/dashboards",function(){return e(t)}):(t.Dashboards&&t.Dashboards.error(16,!0),t.Dashboards=e(t))}("undefined"!=typeof window?window:this,function(t){"use strict";var e={};function i(e,i,s,o){e.hasOwnProperty(i)||(e[i]=o.apply(null,s),"function"==typeof CustomEvent&&t.dispatchEvent(new CustomEvent("DashboardsModuleLoaded",{detail:{path:i,module:e[i]}})))}return i(e,"Core/Globals.js",[],function(){var e,i;return(i=e||(e={})).SVG_NS="http://www.w3.org/2000/svg",i.product="Highcharts",i.version="2.0.0-rc1",i.win=void 0!==t?t:{},i.doc=i.win.document,i.svg=i.doc&&i.doc.createElementNS&&!!i.doc.createElementNS(i.SVG_NS,"svg").createSVGRect,i.userAgent=i.win.navigator&&i.win.navigator.userAgent||"",i.isChrome=-1!==i.userAgent.indexOf("Chrome"),i.isFirefox=-1!==i.userAgent.indexOf("Firefox"),i.isMS=/(edge|msie|trident)/i.test(i.userAgent)&&!i.win.opera,i.isSafari=!i.isChrome&&-1!==i.userAgent.indexOf("Safari"),i.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(i.userAgent),i.isWebKit=-1!==i.userAgent.indexOf("AppleWebKit"),i.deg2rad=2*Math.PI/360,i.hasBidiBug=i.isFirefox&&4>parseInt(i.userAgent.split("Firefox/")[1],10),i.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],i.noop=function(){},i.supportsPassiveEvents=function(){let t=!1;if(!i.isMS){let e=Object.defineProperty({},"passive",{get:function(){t=!0}});i.win.addEventListener&&i.win.removeEventListener&&(i.win.addEventListener("testPassive",i.noop,e),i.win.removeEventListener("testPassive",i.noop,e))}return t}(),i.charts=[],i.composed=[],i.dateFormats={},i.seriesTypes={},i.symbolSizes={},i.chartCount=0,e}),i(e,"Core/Utilities.js",[e["Core/Globals.js"]],function(t){let e;let{charts:i,doc:s,win:o}=t;function n(e,i,s,r){let a=i?"Highcharts error":"Highcharts warning";32===e&&(e=`${a}: Deprecated member`);let l=u(e),h=l?`${a} #${e}: www.highcharts.com/errors/${e}/`:e.toString();if(void 0!==r){let t="";l&&(h+="?"),v(r,function(e,i){t+=`
 - ${i}: ${e}`,l&&(h+=encodeURI(i)+"="+encodeURI(e))}),h+=t}D(t,"displayError",{chart:s,code:e,message:h,params:r},function(){if(i)throw Error(h);o.console&&-1===n.messages.indexOf(h)&&console.warn(h)}),n.messages.push(h)}function r(t,e){return parseInt(t,e||10)}function a(t){return"string"==typeof t}function l(t){let e=Object.prototype.toString.call(t);return"[object Array]"===e||"[object Array Iterator]"===e}function h(t,e){return!!t&&"object"==typeof t&&(!e||!l(t))}function d(t){return h(t)&&"number"==typeof t.nodeType}function c(t){let e=t&&t.constructor;return!!(h(t,!0)&&!d(t)&&e&&e.name&&"Object"!==e.name)}function u(t){return"number"==typeof t&&!isNaN(t)&&t<1/0&&t>-1/0}function p(t){return null!=t}function m(t,e,i){let s;let o=a(e)&&!p(i),n=(e,i)=>{p(e)?t.setAttribute(i,e):o?(s=t.getAttribute(i))||"class"!==i||(s=t.getAttribute(i+"Name")):t.removeAttribute(i)};return a(e)?n(i,e):v(e,n),s}function f(t){return l(t)?t:[t]}function g(t,e){let i;for(i in t||(t={}),e)t[i]=e[i];return t}function y(){let t=arguments,e=t.length;for(let i=0;i<e;i++){let e=t[i];if(null!=e)return e}}function b(t,e){g(t.style,e)}function C(t){return Math.pow(10,Math.floor(Math.log(t)/Math.LN10))}function w(t,e){return t>1e14?t:parseFloat(t.toPrecision(e||14))}(n||(n={})).messages=[],Math.easeInOutSine=function(t){return -.5*(Math.cos(Math.PI*t)-1)};let O=Array.prototype.find?function(t,e){return t.find(e)}:function(t,e){let i;let s=t.length;for(i=0;i<s;i++)if(e(t[i],i))return t[i]};function v(t,e,i){for(let s in t)Object.hasOwnProperty.call(t,s)&&e.call(i||t[s],t[s],s,t)}function x(t,e,i){function s(e,i){let s=t.removeEventListener;s&&s.call(t,e,i,!1)}function o(i){let o,n;t.nodeName&&(e?(o={})[e]=!0:o=i,v(o,function(t,e){if(i[e])for(n=i[e].length;n--;)s(e,i[e][n].fn)}))}let n="function"==typeof t&&t.prototype||t;if(Object.hasOwnProperty.call(n,"hcEvents")){let t=n.hcEvents;if(e){let n=t[e]||[];i?(t[e]=n.filter(function(t){return i!==t.fn}),s(e,i)):(o(t),t[e]=[])}else o(t),delete n.hcEvents}}function D(e,i,o,n){if(o=o||{},s.createEvent&&(e.dispatchEvent||e.fireEvent&&e!==t)){let t=s.createEvent("Events");t.initEvent(i,!0,!0),o=g(t,o),e.dispatchEvent?e.dispatchEvent(o):e.fireEvent(i,o)}else if(e.hcEvents){o.target||g(o,{preventDefault:function(){o.defaultPrevented=!0},target:e,type:i});let t=[],s=e,n=!1;for(;s.hcEvents;)Object.hasOwnProperty.call(s,"hcEvents")&&s.hcEvents[i]&&(t.length&&(n=!0),t.unshift.apply(t,s.hcEvents[i])),s=Object.getPrototypeOf(s);n&&t.sort((t,e)=>t.order-e.order),t.forEach(t=>{!1===t.fn.call(e,o)&&o.preventDefault()})}n&&!o.defaultPrevented&&n.call(e,o)}v({map:"map",each:"forEach",grep:"filter",reduce:"reduce",some:"some"},function(e,i){t[i]=function(t){return n(32,!1,void 0,{[`Highcharts.${i}`]:`use Array.${e}`}),Array.prototype[e].apply(t,[].slice.call(arguments,1))}});let T=function(){let t=Math.random().toString(36).substring(2,9)+"-",i=0;return function(){return"highcharts-"+(e?"":t)+i++}}();return o.jQuery&&(o.jQuery.fn.highcharts=function(){let e=[].slice.call(arguments);if(this[0])return e[0]?(new t[a(e[0])?e.shift():"Chart"](this[0],e[0],e[1]),this):i[m(this[0],"data-highcharts-chart")]}),{addEvent:function(e,i,s,o={}){let n="function"==typeof e&&e.prototype||e;Object.hasOwnProperty.call(n,"hcEvents")||(n.hcEvents={});let r=n.hcEvents;t.Point&&e instanceof t.Point&&e.series&&e.series.chart&&(e.series.chart.runTrackerClick=!0);let a=e.addEventListener;a&&a.call(e,i,s,!!t.supportsPassiveEvents&&{passive:void 0===o.passive?-1!==i.indexOf("touch"):o.passive,capture:!1}),r[i]||(r[i]=[]);let l={fn:s,order:"number"==typeof o.order?o.order:1/0};return r[i].push(l),r[i].sort((t,e)=>t.order-e.order),function(){x(e,i,s)}},arrayMax:function(t){let e=t.length,i=t[0];for(;e--;)t[e]>i&&(i=t[e]);return i},arrayMin:function(t){let e=t.length,i=t[0];for(;e--;)t[e]<i&&(i=t[e]);return i},attr:m,clamp:function(t,e,i){return t>e?t<i?t:i:e},clearTimeout:function(t){p(t)&&clearTimeout(t)},correctFloat:w,createElement:function(t,e,i,o,n){let r=s.createElement(t);return e&&g(r,e),n&&b(r,{padding:"0",border:"none",margin:"0"}),i&&b(r,i),o&&o.appendChild(r),r},css:b,defined:p,destroyObjectProperties:function(t,e,i){v(t,function(s,o){s!==e&&s?.destroy&&s.destroy(),(s?.destroy||!i)&&delete t[o]})},diffObjects:function(t,e,i,s){let o={};return function t(e,o,n,r){let a=i?o:e;v(e,function(i,d){if(!r&&s&&s.indexOf(d)>-1&&o[d]){i=f(i),n[d]=[];for(let e=0;e<Math.max(i.length,o[d].length);e++)o[d][e]&&(void 0===i[e]?n[d][e]=o[d][e]:(n[d][e]={},t(i[e],o[d][e],n[d][e],r+1)))}else h(i,!0)&&!i.nodeType?(n[d]=l(i)?[]:{},t(i,o[d]||{},n[d],r+1),0!==Object.keys(n[d]).length||"colorAxis"===d&&0===r||delete n[d]):(e[d]!==o[d]||d in e&&!(d in o))&&(n[d]=a[d])})}(t,e,o,0),o},discardElement:function(t){t&&t.parentElement&&t.parentElement.removeChild(t)},erase:function(t,e){let i=t.length;for(;i--;)if(t[i]===e){t.splice(i,1);break}},error:n,extend:g,extendClass:function(t,e){let i=function(){};return i.prototype=new t,g(i.prototype,e),i},find:O,fireEvent:D,getClosestDistance:function(t,e){let i,s,o,n;let r=!e;return t.forEach(t=>{if(t.length>1)for(n=s=t.length-1;n>0;n--)(o=t[n]-t[n-1])<0&&!r?(e?.(),e=void 0):o&&(void 0===i||o<i)&&(i=o)}),i},getMagnitude:C,getNestedProperty:function(t,e){let i=t.split(".");for(;i.length&&p(e);){let t=i.shift();if(void 0===t||"__proto__"===t)return;if("this"===t){let t;return h(e)&&(t=e["@this"]),t??e}let s=e[t];if(!p(s)||"function"==typeof s||"number"==typeof s.nodeType||s===o)return;e=s}return e},getStyle:function t(e,i,s){let n;if("width"===i){let i=Math.min(e.offsetWidth,e.scrollWidth),s=e.getBoundingClientRect&&e.getBoundingClientRect().width;return s<i&&s>=i-1&&(i=Math.floor(s)),Math.max(0,i-(t(e,"padding-left",!0)||0)-(t(e,"padding-right",!0)||0))}if("height"===i)return Math.max(0,Math.min(e.offsetHeight,e.scrollHeight)-(t(e,"padding-top",!0)||0)-(t(e,"padding-bottom",!0)||0));let a=o.getComputedStyle(e,void 0);return a&&(n=a.getPropertyValue(i),y(s,"opacity"!==i)&&(n=r(n))),n},inArray:function(t,e,i){return n(32,!1,void 0,{"Highcharts.inArray":"use Array.indexOf"}),e.indexOf(t,i)},insertItem:function(t,e){let i;let s=t.options.index,o=e.length;for(i=t.options.isInternal?o:0;i<o+1;i++)if(!e[i]||u(s)&&s<y(e[i].options.index,e[i]._i)||e[i].options.isInternal){e.splice(i,0,t);break}return i},isArray:l,isClass:c,isDOMElement:d,isFunction:function(t){return"function"==typeof t},isNumber:u,isObject:h,isString:a,keys:function(t){return n(32,!1,void 0,{"Highcharts.keys":"use Object.keys"}),Object.keys(t)},merge:function(){let t,e=arguments,i={},s=function(t,e){return"object"!=typeof t&&(t={}),v(e,function(i,o){"__proto__"!==o&&"constructor"!==o&&(!h(i,!0)||c(i)||d(i)?t[o]=e[o]:t[o]=s(t[o]||{},i))}),t};!0===e[0]&&(i=e[1],e=Array.prototype.slice.call(e,2));let o=e.length;for(t=0;t<o;t++)i=s(i,e[t]);return i},normalizeTickInterval:function(t,e,i,s,o){let n,r=t;i=y(i,C(t));let a=t/i;for(!e&&(e=o?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===s&&(1===i?e=e.filter(function(t){return t%1==0}):i<=.1&&(e=[1/i]))),n=0;n<e.length&&(r=e[n],(!o||!(r*i>=t))&&(o||!(a<=(e[n]+(e[n+1]||e[n]))/2)));n++);return w(r*i,-Math.round(Math.log(.001)/Math.LN10))},objectEach:v,offset:function(t){let e=s.documentElement,i=t.parentElement||t.parentNode?t.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:i.top+(o.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(o.pageXOffset||e.scrollLeft)-(e.clientLeft||0),width:i.width,height:i.height}},pad:function(t,e,i){return Array((e||2)+1-String(t).replace("-","").length).join(i||"0")+t},pick:y,pInt:r,pushUnique:function(t,e){return 0>t.indexOf(e)&&!!t.push(e)},relativeLength:function(t,e,i){return/%$/.test(t)?e*parseFloat(t)/100+(i||0):parseFloat(t)},removeEvent:x,splat:f,stableSort:function(t,e){let i,s;let o=t.length;for(s=0;s<o;s++)t[s].safeI=s;for(t.sort(function(t,s){return 0===(i=e(t,s))?t.safeI-s.safeI:i}),s=0;s<o;s++)delete t[s].safeI},syncTimeout:function(t,e,i){return e>0?setTimeout(t,e,i):(t.call(0,i),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},uniqueKey:T,useSerialIds:function(t){return e=y(t,e)},wrap:function(t,e,i){let s=t[e];t[e]=function(){let t=arguments,e=this;return i.apply(this,[function(){return s.apply(e,arguments.length?arguments:t)}].concat([].slice.call(arguments)))}}}}),i(e,"Core/Renderer/HTML/AST.js",[e["Core/Globals.js"],e["Core/Utilities.js"]],function(t,e){let{SVG_NS:i,win:s}=t,{attr:o,createElement:n,css:r,error:a,isFunction:l,isString:h,objectEach:d,splat:c}=e,{trustedTypes:u}=s,p=u&&l(u.createPolicy)&&u.createPolicy("highcharts",{createHTML:t=>t}),m=p?p.createHTML(""):"",f=function(){try{return!!new DOMParser().parseFromString(m,"text/html")}catch(t){return!1}}();class g{static filterUserAttributes(t){return d(t,(e,i)=>{let s=!0;-1===g.allowedAttributes.indexOf(i)&&(s=!1),-1!==["background","dynsrc","href","lowsrc","src"].indexOf(i)&&(s=h(e)&&g.allowedReferences.some(t=>0===e.indexOf(t))),s||(a(33,!1,void 0,{"Invalid attribute in config":`${i}`}),delete t[i]),h(e)&&t[i]&&(t[i]=e.replace(/</g,"&lt;"))}),t}static parseStyle(t){return t.split(";").reduce((t,e)=>{let i=e.split(":").map(t=>t.trim()),s=i.shift();return s&&i.length&&(t[s.replace(/-([a-z])/g,t=>t[1].toUpperCase())]=i.join(":")),t},{})}static setElementHTML(t,e){t.innerHTML=g.emptyHTML,e&&new g(e).addToDOM(t)}constructor(t){this.nodes="string"==typeof t?this.parseMarkup(t):t}addToDOM(e){return function e(s,n){let l;return c(s).forEach(function(s){let h;let c=s.tagName,u=s.textContent?t.doc.createTextNode(s.textContent):void 0,p=g.bypassHTMLFiltering;if(c){if("#text"===c)h=u;else if(-1!==g.allowedTags.indexOf(c)||p){let a="svg"===c?i:n.namespaceURI||i,l=t.doc.createElementNS(a,c),m=s.attributes||{};d(s,function(t,e){"tagName"!==e&&"attributes"!==e&&"children"!==e&&"style"!==e&&"textContent"!==e&&(m[e]=t)}),o(l,p?m:g.filterUserAttributes(m)),s.style&&r(l,s.style),u&&l.appendChild(u),e(s.children||[],l),h=l}else a(33,!1,void 0,{"Invalid tagName in config":c})}h&&n.appendChild(h),l=h}),l}(this.nodes,e)}parseMarkup(t){let e;let i=[];if(t=t.trim().replace(/ style=(["'])/g," data-style=$1"),f)e=new DOMParser().parseFromString(p?p.createHTML(t):t,"text/html");else{let i=n("div");i.innerHTML=t,e={body:i}}let s=(t,e)=>{let i=t.nodeName.toLowerCase(),o={tagName:i};"#text"===i&&(o.textContent=t.textContent||"");let n=t.attributes;if(n){let t={};[].forEach.call(n,e=>{"data-style"===e.name?o.style=g.parseStyle(e.value):t[e.name]=e.value}),o.attributes=t}if(t.childNodes.length){let e=[];[].forEach.call(t.childNodes,t=>{s(t,e)}),e.length&&(o.children=e)}e.push(o)};return[].forEach.call(e.body.childNodes,t=>s(t,i)),i}}return g.allowedAttributes=["alt","aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","dx","dy","disabled","fill","filterUnits","flood-color","flood-opacity","height","href","id","in","markerHeight","markerWidth","offset","opacity","orient","padding","paddingLeft","paddingRight","patternUnits","r","refX","refY","role","scope","slope","src","startOffset","stdDeviation","stroke","stroke-linecap","stroke-width","style","tableValues","result","rowspan","summary","target","tabindex","text-align","text-anchor","textAnchor","textLength","title","type","valign","width","x","x1","x2","xlink:href","y","y1","y2","zIndex"],g.allowedReferences=["https://","http://","mailto:","/","../","./","#"],g.allowedTags=["a","abbr","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feDropShadow","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feOffset","feMerge","feMergeNode","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","text","textPath","thead","title","tbody","tspan","td","th","tr","u","ul","#text"],g.emptyHTML=m,g.bypassHTMLFiltering=!1,g}),i(e,"Dashboards/CallbackRegistry.js",[],function(){return class{constructor(){this.registry={}}addCallback(t,e){this.registry[t]=e}getCallback(t){return this.registry[t]}toJSON(){let t={};return Object.keys(this.registry).forEach(e=>{let{func:i,type:s}=this.getCallback(e);t[e]={func:i.toString(),type:s}}),t}}}),i(e,"Dashboards/Serializable.js",[],function(){var t;return function(t){let e={},i={};t.fromJSON=function(t){let s=t.$class;if("string"!=typeof s)throw Error("JSON has no $class property.");let o=e[s];if(o)return o.fromJSON(t);let n=i[s];if(n)return n.fromJSON(t);throw Error(`'${s}' unknown.`)},t.registerClassPrototype=function(t,i){if(e[t])throw Error("A serializer for '"+t+"' is already registered.");e[t]=i},t.registerHelper=function(t){if(i[t.$class])throw Error("A serializer for '"+t.$class+"' is already registered.");i[t.$class]=t},t.toJSON=function(t){let e;if("function"==typeof t.fromJSON&&"function"==typeof t.toJSON)return t.toJSON();let s=Object.keys(i),o=s.length;for(let n=0;n<o;++n)if((e=i[s[n]]).jsonSupportFor(t))return e.toJSON(t);throw Error("Object is not supported.")}}(t||(t={})),t}),i(e,"Dashboards/Components/SharedComponentState.js",[e["Dashboards/Serializable.js"],e["Core/Utilities.js"]],function(t,e){let{addEvent:i,fireEvent:s,merge:o}=e;class n{constructor(){this.columnVisibilityMap={},this.hiddenRowIndexes=[],this.selection={}}emit(t){s(this,t.type,t)}getColumnOrder(){return(this.columnOrder||[]).slice()}getColumnVisibility(t){return this.columnVisibilityMap[t]}getColumnSorter(){let t=(this.columnOrder||[]).slice();return t.length?(e,i)=>{let s=t.indexOf(e),o=t.indexOf(i);return s>-1&&o>-1?s-o:o>-1?1:s>-1?-1:0}:()=>0}isSet(){return!0===this.isModified}on(t,e){return i(this,t,e)}setColumnOrder(t,e){let i=(this.columnOrder||[]).slice(),s=t.slice();this.emit({type:"columnOrderChange",detail:e,newColumnOrder:s,oldColumnOrder:i}),this.columnOrder=s,this.isModified=!0,this.emit({type:"afterColumnOrderChange",detail:e,newColumnOrder:s,oldColumnOrder:i})}setColumnVisibility(t,e){this.columnVisibilityMap=o(this.columnVisibilityMap,t),this.emit({type:"afterColumnVisibilityChange",visibilityMap:this.columnVisibilityMap,detail:e})}setHiddenRows(t,e=!0){t.forEach(t=>{-1===this.hiddenRowIndexes.indexOf(t)&&e&&this.hiddenRowIndexes.push(t),this.hiddenRowIndexes.indexOf(t)>-1&&!e&&this.hiddenRowIndexes.splice(this.hiddenRowIndexes.indexOf(t),1)}),this.emit({type:"afterSetHiddenRows",hiddenRows:this.hiddenRowIndexes})}getHiddenRows(){return this.hiddenRowIndexes}setHoverPoint(t,e){let i=e&&e.isDataGrid;this.hoverPoint=i?void 0:t,t instanceof HTMLElement&&(this.hoverRow=i?t:void 0),this.emit({type:"afterHoverPointChange",hoverPoint:i?void 0:this.hoverPoint,hoverRow:i?this.hoverRow:void 0,detail:e})}getHoverPoint(){return this.hoverPoint}getSelection(){return this.selection}setSelection(t,e=!1,i){Object.keys(t).forEach(e=>{this.selection[e]=t[e]}),this.emit({type:"afterSelectionChange",selection:this.selection,reset:e,detail:i})}fromJSON(t){let e=new n,{columnOrder:i,visibilityMap:s,selection:o,hoverpoint:r}=t;return i&&e.setColumnOrder(i),s&&e.setColumnVisibility(s),o&&e.setSelection(o),r&&e.setHoverPoint(r),e}toJSON(){let t={$class:"Dashboards.SharedComponentState"};if(this.columnOrder&&(t.columnOrder=this.columnOrder.slice()),this.hoverPoint){let{x:e,y:i,id:s}=this.hoverPoint;t.hoverPoint={x:e,y:i,id:s}}return this.selection&&(t.selection=this.selection),this.columnVisibilityMap&&(t.columnVisibility=this.columnVisibilityMap),t}}return t.registerClassPrototype("Dashboards.SharedComponentState",n.prototype),n}),i(e,"Dashboards/Components/ComponentGroup.js",[e["Dashboards/Components/SharedComponentState.js"]],function(t){class e{static getComponentGroup(t){if(this.componentGroups[t])return this.componentGroups[t]}static addComponentGroup(t){let{id:e}=t;this.componentGroups[e]||(this.componentGroups[e]=t)}static getGroupsFromComponent(t){return Object.keys(this.componentGroups).reduce((e,i)=>{let s=this.getComponentGroup(i);return s&&s.components.indexOf(t)>-1&&e.push(s),e},[])}constructor(i){this.state=new t,this.components=[],this.id=i,e.addComponentGroup(this)}addComponents(t){for(;t.length;){let e=t.pop();if(!e)break;-1===this.components.indexOf(e)&&this.components.push(e)}}removeComponents(t){for(;t.length;){let e=t.pop();if(!e)break;let i=this.components.indexOf(e);i>-1&&this.components.splice(i,1)}}getSharedState(){return this.state}on(){throw Error("Method not implemented.")}emit(){throw Error("Method not implemented.")}}return e.componentGroups={},e}),i(e,"Dashboards/Components/EditableOptions.js",[],function(){class t{constructor(e,i=t.defaultBindings){this.component=e,this.bindings=i}getOptions(){let t=this.component.options.editableOptions;if(!t)return[];for(let e=0,i=t.length;e<i;e++){let i=t[e];if("connectorName"===i.name){let t=this.component.board,e=t?t.dataPool.getConnectorIds().map(t=>({name:t})):[];i.selectOptions=e}}return t}}return t.defaultBindings={keyMap:{color:"colorPicker",title:"text",caption:"text",style:"textarea"},typeMap:{string:"text",number:"input",boolean:"toggle"},skipRedraw:[]},t.defaultTypeMap={string:"text",number:"input",boolean:"toggle"},t}),i(e,"Dashboards/Components/Sync/Emitter.js",[],function(){class t{static register(t){let{id:e}=t;this.registry[e]=t}static get(t){return this.registry[t]}constructor(e,i){this.id=e,this.func=i,t.register(this)}create(t){this.callback=this.func.call(t)}remove(){this.callback&&this.callback()}}return t.registry={},t}),i(e,"Dashboards/Components/Sync/Handler.js",[],function(){class t{static register(t){let{id:e}=t;this.registry[e]=t}static get(t){return this.registry[t]}constructor(e,i){this.id=e,this.func=i,t.register(this)}register(t){let{func:e}=this;this.callback=e.call(t)}remove(){this.callback&&this.callback()}}return t.registry={},t}),i(e,"Dashboards/Components/Sync/Sync.js",[e["Dashboards/Components/Sync/Emitter.js"],e["Dashboards/Components/Sync/Handler.js"]],function(t,e){class i{constructor(t,e=i.defaultHandlers){this.component=t,this.syncConfig=e,this.registeredSyncHandlers={},this.registeredSyncEmitters={},this.isSyncing=!1,this.listeners=[]}registerSyncEmitter(t){let{id:e}=t;this.registeredSyncEmitters[e]=t}isRegisteredEmitter(t){return!!this.registeredSyncEmitters[t]}registerSyncHandler(t){let{id:e}=t;this.registeredSyncHandlers[e]=t}isRegisteredHandler(t){return!!this.registeredSyncHandlers[t]}start(){let{syncConfig:s,component:o}=this;for(let n of Object.keys(s)){let r=s[n];if(!r)continue;let{emitter:a,handler:l}=r;if(l){"boolean"==typeof l&&(l=i.defaultHandlers[n].handler);let t=new e(n,l);this.isRegisteredHandler(t.id)||(this.registerSyncHandler(t),t.register(o))}if(a){"boolean"==typeof a&&(a=i.defaultHandlers[n].emitter);let e=new t(n,a);this.isRegisteredEmitter(e.id)||(this.registerSyncEmitter(e),e.create(o))}}this.isSyncing=!0,this.listeners.push(o.on("update",()=>this.stop()))}stop(){let{component:t,listeners:e,registeredSyncHandlers:i,registeredSyncEmitters:s}=this;Object.keys(i).forEach(t=>{i[t].remove(),delete i[t]}),Object.keys(s).forEach(t=>{s[t].remove(),delete s[t]}),this.isSyncing=!1;for(let t=0,i=e.length;t<i;++t)e[t]();this.listeners.length=0,this.listeners.push(t.on("afterUpdate",()=>{this.start()}))}}return i.defaultHandlers={},(i||(i={})).defaultSyncOptions={crossfilter:{affectNavigator:!1},highlight:{highlightPoint:!0,showTooltip:!0,showCrosshair:!0}},i}),i(e,"Dashboards/Globals.js",[],function(){var e,i;return(i=e||(e={})).classNamePrefix="highcharts-dashboards-",i.classNames={layout:i.classNamePrefix+"layout",cell:i.classNamePrefix+"cell",cellHover:i.classNamePrefix+"cell-state-hover",cellActive:i.classNamePrefix+"cell-state-active",cellLoading:i.classNamePrefix+"cell-state-loading",row:i.classNamePrefix+"row",layoutsWrapper:i.classNamePrefix+"layouts-wrapper",boardContainer:i.classNamePrefix+"wrapper"},i.guiElementType={row:"row",cell:"cell",layout:"layout"},i.boards=[],i.win=t,e}),i(e,"Dashboards/Components/ComponentUtilities.js",[],function(){var e;return function(e){function i(e,i){let s=t.getComputedStyle(e);return i.map(t=>s[t])}function s(t,e){return e&&(t+="number"==typeof e?e:parseFloat(e)),t}e.getMargins=function(t,e=!0){let o={x:["borderLeft","borderRight"],y:["borderTop","borderBottom"]};return{y:i(t,["marginTop","marginBottom",...e?o.y:[]]).reduce(s,0),x:i(t,["marginLeft","marginTop",...e?o.x:[]]).reduce(s,0)}},e.getPaddings=function(t){return{x:i(t,["paddingLeft","paddingRight"]).reduce(s,0),y:i(t,["paddingTop","paddingBottom"]).reduce(s,0)}},e.getStyles=i,e.sumPixels=s}(e||(e={})),e}),i(e,"Dashboards/Utilities.js",[e["Core/Utilities.js"]],function(t){let{error:e,isClass:i,isDOMElement:s,isObject:o,objectEach:n,uniqueKey:r}=t;return{error:function(t,i){if(16===t){console.warn("Dashboard error: Dashboards library loaded more than once.This may cause undefined behavior.");return}e(t,i)},merge:function(){let t,e=arguments,r=0,a={},l=Error("Recursive copy depth > 100"),h=(t,e)=>{if("object"!=typeof t&&(t={}),++r>100)throw l;return n(e,(n,r)=>{"__proto__"!==r&&"constructor"!==r&&(!o(n,!0)||i(n)||s(n)?t[r]=e[r]:t[r]=h(t[r]||{},n))}),--r,t};!0===e[0]&&(a=e[1],e=Array.prototype.slice.call(e,2));let d=e.length;for(t=0;t<d;t++)a=h(a,e[t]);return a},uniqueKey:function(){return`dashboard-${r().replace("highcharts-","")}`}}}),i(e,"Dashboards/Components/Component.js",[e["Dashboards/CallbackRegistry.js"],e["Dashboards/Components/ComponentGroup.js"],e["Dashboards/Components/EditableOptions.js"],e["Dashboards/Components/Sync/Sync.js"],e["Dashboards/Globals.js"],e["Core/Utilities.js"],e["Dashboards/Components/ComponentUtilities.js"],e["Dashboards/Utilities.js"]],function(e,i,s,o,n,r,a,l){let{classNamePrefix:h}=n,{createElement:d,isArray:c,merge:u,fireEvent:p,addEvent:m,objectEach:f,isFunction:g,isObject:y,getStyle:b,relativeLength:C,diffObjects:w}=r,{getMargins:O,getPaddings:v}=a,{uniqueKey:x}=l;class D{static createTextElement(t,e,i){if("object"==typeof i){let{className:s,text:o,style:n}=i;return d(t,{className:s||`${h}component-${e}`,textContent:o},n)}if("string"==typeof i)return d(t,{className:`${h}component-${e}`,textContent:i},{})}constructor(t,i,o){this.callbackRegistry=new e,this.tableEvents=[],this.cellListeners=[],this.resizeTimeouts=[],this.innerResizeTimeouts=[];let n=i.renderTo||i.cell;this.board=o||t?.row?.layout?.board||{},this.parentElement=t?.container||document.querySelector("#"+n),this.cell=t,this.options=u(D.defaultOptions,i),this.id=this.options.id&&this.options.id.length?this.options.id:x(),this.editableOptions=new s(this,i.editableOptionsBindings),this.presentationModifier=this.options.presentationModifier,this.dimensions={width:null,height:null},this.element=d("div",{className:this.options.className},{},this.parentElement),this.contentElement=d("div",{className:`${this.options.className}-content`},{},this.element,!0),this.filterAndAssignSyncOptions(),this.setupEventListeners(),t&&(this.attachCellListeners(),this.on("tableChanged",()=>{this.onTableChanged()}),this.on("update",()=>{this.cell.setLoadingState()}),this.on("afterRender",()=>{this.cell.setLoadingState(!1)}))}getOptionsOnDrop(t){return{}}async initConnector(){let t=this.options.connector?.id,e=this.board.dataPool;if(t&&(this.connectorId!==t||e.isNewConnector(t))){this.cell?.setLoadingState();let i=await e.getConnector(t);this.setConnector(i)}return this}filterAndAssignSyncOptions(t=this.constructor.syncHandlers){let e=this.options.sync||{},i=Object.keys(e).reduce((i,s)=>{if(s){let n=t[s],r=o.defaultSyncOptions[s],a=e[s];if(i[s]=u(r||{},{enabled:y(a)?a.enabled:a},y(a)?a:{}),n&&i[s].enabled)for(let t of["emitter","handler"])(!0===i[s][t]||void 0===i[s][t])&&(i[s][t]=n[t])}return i},{});this.sync&&(this.sync.syncConfig=i),this.syncHandlers=i}attachCellListeners(){for(;this.cellListeners.length;){let t=this.cellListeners.pop();t&&t()}if(this.cell&&Object.keys(this.cell).length){let t=this.cell.row.layout.board;this.cellListeners.push(m(t,"cellResize",()=>{this.resizeTo(this.parentElement)}),m(this.cell.row,"cellChange",t=>{let{row:e}=t;e&&this.cell&&void 0===e.getCellIndex(this.cell)&&this.cell&&this.setCell(this.cell)}))}}setCell(t,e=!1){this.cell=t,t.container&&(this.parentElement=t.container),this.attachCellListeners(),e&&this.resizeTo(this.parentElement)}setupTableListeners(t){let e=this.connector;e&&(t&&["afterDeleteColumns","afterDeleteRows","afterSetCell","afterSetConnector","afterSetColumns","afterSetRows"].forEach(e=>{this.tableEvents.push(t.on(e,t=>{clearTimeout(this.tableEventTimeout),this.tableEventTimeout=n.win.setTimeout(()=>{this.emit({...t,type:"tableChanged"}),this.tableEventTimeout=void 0})}))}),this.tableEvents.push(e.on("afterLoad",()=>{clearTimeout(this.tableEventTimeout),this.tableEventTimeout=n.win.setTimeout(()=>{this.emit({target:this,type:"tableChanged"}),this.tableEventTimeout=void 0})})))}clearTableListeners(){let t=this.connector,e=this.tableEvents;e.length&&e.forEach(t=>t()),t&&e.push(t.table.on("afterSetModifier",t=>{"afterSetModifier"===t.type&&(clearTimeout(this.tableEventTimeout),this.tableEventTimeout=n.win.setTimeout(()=>{this.emit({...t,type:"tableChanged"}),this.tableEventTimeout=void 0}))}))}setConnector(t){for(p(this,"setConnector",{connector:t});this.tableEvents.length;){let t=this.tableEvents.pop();"function"==typeof t&&t()}if(this.connector=t,t){this.clearTableListeners(),this.setupTableListeners(t.table),t.table.on("setModifier",()=>this.clearTableListeners()),t.table.on("afterSetModifier",t=>{"afterSetModifier"===t.type&&t.modified&&this.setupTableListeners(t.modified)});let e=t.table.id;i.getComponentGroup(e)||i.addComponentGroup(new i(e));let s=i.getComponentGroup(e);s&&(s.addComponents([this.id]),this.activeGroup=s)}return p(this,"afterSetConnector",{connector:t}),this}setActiveGroup(t){"string"==typeof t&&(t=i.getComponentGroup(t)||null),t instanceof i&&(this.activeGroup=t),null===t&&(this.activeGroup=void 0),this.activeGroup&&this.activeGroup.addComponents([this.id])}getContentHeight(){return(this.dimensions.height||Number(b(this.element,"height")))-(this.titleElement?this.titleElement.clientHeight+O(this.titleElement).y:0)-(this.captionElement?this.captionElement.clientHeight+O(this.captionElement).y:0)}resize(t,e){if(this.board.editMode){if(e){let t=v(this.element).y+O(this.element).y;this.dimensions.height=C(e,Number(b(this.parentElement,"height")))-t,this.element.style.height=this.dimensions.height+"px",this.contentElement.style.height=this.getContentHeight()+"px"}else null===e&&(this.dimensions.height=null,this.element.style.removeProperty("height"))}p(this,"resize",{width:t,height:e})}resizeTo(t){for(;this.resizeTimeouts.length;){let t=this.resizeTimeouts.pop();t&&cancelAnimationFrame(t)}let e=requestAnimationFrame(()=>{let{width:e,height:i}=t.getBoundingClientRect(),s=v(t),o=O(t);this.resize(e-s.x-o.x,i-s.y-o.y)});this.resizeTimeouts.push(e)}async update(t,e=!0){let i={options:t,shouldForceRerender:!1};if(p(this,"update",i),this.options=u(this.options,t),this.options.connector?.id&&this.connectorId!==this.options.connector.id){let t=await this.board.dataPool.getConnector(this.options.connector.id);this.setConnector(t)}this.options=u(this.options,t),(e||i.shouldForceRerender)&&this.render()}setupEventListeners(){let e=this.options.events;e&&(Object.keys(e).forEach(t=>{let i=e[t];i&&this.callbackRegistry.addCallback(t,{type:"component",func:i})}),f(e,(t,e)=>{g(t)&&this.on(e,t)}));let i=()=>{this.resizeTo(this.parentElement)};if("function"==typeof ResizeObserver)this.resizeObserver=new ResizeObserver(i),this.resizeObserver.observe(this.element);else{let e=m(t,"resize",i);m(this,"destroy",e)}}setTitle(t){let e=this.titleElement;if(t&&("string"==typeof t||t.text)){let i=D.createTextElement("h2","title",t);i&&(e?e.replaceWith(i):this.element.insertBefore(i,this.element.firstChild),this.titleElement=i)}else if(e){e.remove(),delete this.titleElement;return}}setCaption(t){let e=this.captionElement;if(t&&("string"==typeof t||t.text)){let i=D.createTextElement("div","caption",t);i&&(e?e.replaceWith(i):this.element.appendChild(i),this.captionElement=i)}else if(e){e.remove(),delete this.captionElement;return}}async load(){return await this.initConnector(),this.render(),this}render(){return this.emit({type:"render"}),this.resizeTo(this.parentElement),this.setTitle(this.options.title),this.setCaption(this.options.caption),this}destroy(){for(;this.element.firstChild;)this.element.firstChild.remove();p(this,"unmount"),this.tableEvents.forEach(t=>t()),this.element.remove()}on(t,e){return m(this,t,e)}emit(t){t.target||(t.target=this),p(this,t.type,t)}toJSON(){let t={width:0,height:0};return f(this.dimensions,function(e,i){null!==e&&(t[i]=e)}),{$class:this.options.type,options:{renderTo:this.options.renderTo,parentElement:this.parentElement.id,dimensions:t,id:this.id,type:this.type}}}getOptions(){return w(this.options,D.defaultOptions)}getEditableOptions(){return u(this.options)}getEditableOptionValue(t){if(!t)return;let e=this.getEditableOptions();for(let i=0,s=t.length;i<s;i++){if(c(e)&&(e=e[0]),!e)return;e=e[t[i]]}return e}}return D.Sync=o,D.defaultOptions={className:`${h}component`,id:"",title:!1,caption:!1,sync:o.defaultHandlers,editableOptions:[{name:"connectorName",propertyPath:["connector","id"],type:"select"},{name:"title",propertyPath:["title"],type:"input"},{name:"caption",propertyPath:["caption"],type:"input"}]},D.syncHandlers={},D}),i(e,"Dashboards/Components/HTMLComponent.js",[e["Core/Renderer/HTML/AST.js"],e["Dashboards/Components/Component.js"],e["Core/Utilities.js"]],function(t,e,i){let{merge:s,diffObjects:o}=i;t.allowedTags=[...t.allowedTags,"option","select","label","input","textarea"],t.allowedAttributes=[...t.allowedAttributes,"for","value","checked","src","name","selected"],t.allowedReferences=[...t.allowedReferences,"data:image/"];class n extends e{static fromJSON(t,e){let i=new n(e,s(t.options,{elements:t.elements?t.elements.map(t=>JSON.parse(t)):[]}));return i.emit({type:"fromJSON",json:t}),i}constructor(t,i){super(t,i=s(n.defaultOptions,i)),this.options=i,this.type="HTML",this.elements=[],this.sync=new e.Sync(this,this.syncHandlers)}async load(){this.emit({type:"load"}),await super.load();let e=this.options,i=!1;if(e.elements&&(this.elements=e.elements.map(function(e){return"string"==typeof e?new t(e).nodes[0]:(e.textContent||e.tagName||!e.attributes||(i=!0),e)})),this.constructTree(),this.emit({type:"afterLoad"}),i)throw Error("Missing tagName param in component: "+e.cell);return this}render(){return super.render(),this.constructTree(),this.sync.start(),this.emit({type:"afterRender"}),this}resize(t,e){return super.resize(t,e),this}async update(t){await super.update(t),this.emit({type:"afterUpdate"})}getOptionsOnDrop(){return{cell:"",type:"HTML",elements:[{tagName:"img",attributes:{src:"https://www.highcharts.com/samples/graphics/stock-dark.svg"}}]}}constructTree(){for(;this.contentElement.firstChild;)this.contentElement.firstChild.remove();new t(this.elements).addToDOM(this.contentElement)}toJSON(){let t=(this.options.elements||[]).map(t=>JSON.stringify(t)),e=s(super.toJSON(),{elements:t,options:this.options});return this.emit({type:"toJSON",json:e}),e}getOptions(){return{...o(this.options,n.defaultOptions),type:"HTML"}}onTableChanged(t){t.detail?.sender!==this.id&&this.render()}}return n.defaultOptions=s(e.defaultOptions,{type:"HTML",elements:[]}),n}),i(e,"Data/DataTable.js",[e["Core/Utilities.js"]],function(t){let{addEvent:e,fireEvent:i,uniqueKey:s}=t;class o{static isNull(t){if(t===o.NULL)return!0;if(t instanceof Array){if(!t.length)return!1;for(let e=0,i=t.length;e<i;++e)if(null!==t[e])return!1}else{let e=Object.keys(t);if(!e.length)return!1;for(let i=0,s=e.length;i<s;++i)if(null!==t[e[i]])return!1}return!0}constructor(t={}){this.aliases=t.aliases?JSON.parse(JSON.stringify(t.aliases)):{},this.autoId=!t.id,this.columns={},this.id=t.id||s(),this.modified=this,this.rowCount=0,this.versionTag=s();let e=t.columns||{},i=Object.keys(e),o=this.columns,n=0;for(let t=0,s=i.length,r,a;t<s;++t)r=e[a=i[t]].slice(),o[a]=r,n=Math.max(n,r.length);for(let t=0,e=i.length;t<e;++t)o[i[t]].length=n;this.rowCount=n;let r=t.aliases||{},a=Object.keys(r),l=this.aliases;for(let t=0,e=a.length,i;t<e;++t)l[i=a[t]]=r[i]}clone(t,e){let i={};this.emit({type:"cloneTable",detail:e}),t||(i.aliases=this.aliases,i.columns=this.columns),this.autoId||(i.id=this.id);let s=new o(i);return t||(s.versionTag=this.versionTag),this.emit({type:"afterCloneTable",detail:e,tableClone:s}),s}deleteColumnAlias(t){let e=this.aliases[t],i=this.modifier;return e&&(delete this.aliases[t],i&&i.modifyColumns(this,{[e]:Array(this.rowCount)},0)),e}deleteColumns(t,e){let i=this.columns,s={},o={},n=this.modifier,r=this.rowCount;if((t=t||Object.keys(i)).length){this.emit({type:"deleteColumns",columnNames:t,detail:e});for(let e=0,n=t.length,a,l;e<n;++e)(a=i[l=t[e]])&&(s[l]=a,o[l]=Array(r)),delete i[l];return Object.keys(i).length||(this.rowCount=0),n&&n.modifyColumns(this,o,0,e),this.emit({type:"afterDeleteColumns",columns:s,columnNames:t,detail:e}),s}}deleteRows(t,e=1,i){let s=[],o=[],n=this.modifier;if(this.emit({type:"deleteRows",detail:i,rowCount:e,rowIndex:t||0}),void 0===t&&(t=0,e=this.rowCount),e>0&&t<this.rowCount){let i=this.columns,n=Object.keys(i);for(let r=0,a=n.length,l,h;r<a;++r){h=(l=i[n[r]]).splice(t,e),r||(this.rowCount=l.length);for(let t=0,e=h.length;t<e;++t)s[t]=s[t]||[],s[t][r]=h[t];o.push(Array(a))}}return n&&n.modifyRows(this,o,t||0,i),this.emit({type:"afterDeleteRows",detail:i,rowCount:e,rowIndex:t||0,rows:s}),s}emit(t){switch(t.type){case"afterDeleteColumns":case"afterDeleteRows":case"afterSetCell":case"afterSetColumns":case"afterSetRows":this.versionTag=s()}i(this,t.type,t)}getCell(t,e){t=this.aliases[t]||t;let i=this.columns[t];if(i)return i[e]}getCellAsBoolean(t,e){t=this.aliases[t]||t;let i=this.columns[t];return!!(i&&i[e])}getCellAsNumber(t,e,i){t=this.aliases[t]||t;let s=this.columns[t],o=s&&s[e];switch(typeof o){case"boolean":return o?1:0;case"number":return isNaN(o)&&!i?null:o}return isNaN(o=parseFloat(`${o}`))&&!i?null:o}getCellAsString(t,e){t=this.aliases[t]||t;let i=this.columns[t];return`${i&&i[e]}`}getColumn(t,e){return this.getColumns([t],e)[t]}getColumnAsNumbers(t,e){let i=this.columns[t=this.aliases[t]||t],s=[];if(i){let o=i.length;if(e)for(let e=0;e<o;++e)s.push(this.getCellAsNumber(t,e,!0));else{for(let t=0,e;t<o;++t){if("number"==typeof(e=i[t]))return i.slice();if(null!=e)break}for(let e=0;e<o;++e)s.push(this.getCellAsNumber(t,e))}}return s}getColumnNames(){return Object.keys(this.columns)}getColumns(t,e){let i=this.aliases,s=this.columns,o={};t=t||Object.keys(s);for(let n=0,r=t.length,a,l;n<r;++n)(a=s[i[l=t[n]]||l])&&(o[l]=e?a:a.slice());return o}getModifier(){return this.modifier}getRow(t,e){return this.getRows(t,1,e)[0]}getRowCount(){return this.rowCount}getRowIndexBy(t,e,i){t=this.aliases[t]||t;let s=this.columns[t];if(s){let t=s.indexOf(e,i);if(-1!==t)return t}}getRowObject(t,e){return this.getRowObjects(t,1,e)[0]}getRowObjects(t=0,e=this.rowCount-t,i){let s=this.aliases,o=this.columns,n=Array(e);i=i||Object.keys(o);for(let r=t,a=0,l=Math.min(this.rowCount,t+e),h,d;r<l;++r,++a)for(let t of(d=n[a]={},i))h=o[s[t]||t],d[t]=h?h[r]:void 0;return n}getRows(t=0,e=this.rowCount-t,i){let s=this.aliases,o=this.columns,n=Array(e);i=i||Object.keys(o);for(let r=t,a=0,l=Math.min(this.rowCount,t+e),h,d;r<l;++r,++a)for(let t of(d=n[a]=[],i))h=o[s[t]||t],d.push(h?h[r]:void 0);return n}getVersionTag(){return this.versionTag}hasColumns(t){let e=this.aliases,i=this.columns;for(let s=0,o=t.length,n;s<o;++s)if(!i[n=t[s]]&&!e[n])return!1;return!0}hasRowWith(t,e){t=this.aliases[t]||t;let i=this.columns[t];return!!i&&-1!==i.indexOf(e)}on(t,i){return e(this,t,i)}renameColumn(t,e){let i=this.columns;if(i[t]){if(t!==e){let s=this.aliases;s[e]&&delete s[e],i[e]=i[t],delete i[t]}return!0}return!1}setCell(t,e,i,s){let o=this.columns,n=this.modifier,r=o[t=this.aliases[t]||t];r&&r[e]===i||(this.emit({type:"setCell",cellValue:i,columnName:t,detail:s,rowIndex:e}),r||(r=o[t]=Array(this.rowCount)),e>=this.rowCount&&(this.rowCount=e+1),r[e]=i,n&&n.modifyCell(this,t,e,i),this.emit({type:"afterSetCell",cellValue:i,columnName:t,detail:s,rowIndex:e}))}setColumn(t,e=[],i=0,s){this.setColumns({[t]:e},i,s)}setColumns(t,e,i){let s=this.columns,o=this.modifier,n=void 0===e,r=Object.keys(t);this.emit({type:"setColumns",columns:t,columnNames:r,detail:i,rowIndex:e});for(let i=0,o=r.length,a,l;i<o;++i)if(a=t[l=r[i]],l=this.aliases[l]||l,n)s[l]=a.slice(),this.rowCount=a.length;else{let t=s[l]?s[l]:s[l]=Array(this.rowCount);for(let i=e||0,s=a.length;i<s;++i)t[i]=a[i];this.rowCount=Math.max(this.rowCount,t.length)}let a=Object.keys(s);for(let t=0,e=a.length;t<e;++t)s[a[t]].length=this.rowCount;o&&o.modifyColumns(this,t,e||0),this.emit({type:"afterSetColumns",columns:t,columnNames:r,detail:i,rowIndex:e})}setModifier(t,e){let i=this;return i.emit({type:"setModifier",detail:e,modifier:t,modified:i.modified}),i.modified=i,i.modifier=t,(t?t.modify(i):Promise.resolve(i)).then(i=>(i.emit({type:"afterSetModifier",detail:e,modifier:t,modified:i.modified}),i)).catch(e=>{throw i.emit({type:"setModifierError",error:e,modifier:t,modified:i.modified}),e})}setRow(t,e,i){this.setRows([t],e,i)}setRows(t,e=this.rowCount,i){let s=this.aliases,n=this.columns,r=Object.keys(n),a=this.modifier,l=t.length;this.emit({type:"setRows",detail:i,rowCount:l,rowIndex:e,rows:t});for(let i=0,a=e,h;i<l;++i,++a)if((h=t[i])===o.NULL)for(let t=0,e=r.length;t<e;++t)n[r[t]][a]=null;else if(h instanceof Array)for(let t=0,e=r.length;t<e;++t)n[r[t]][a]=h[t];else{let t=Object.keys(h);for(let e=0,i=t.length,o;e<i;++e)n[o=s[o=t[e]]||o]||(n[o]=Array(a+1)),n[o][a]=h[o]}let h=e+l;if(h>this.rowCount){this.rowCount=h;for(let t=0,e=r.length;t<e;++t)n[r[t]].length=h}a&&a.modifyRows(this,t,e),this.emit({type:"afterSetRows",detail:i,rowCount:l,rowIndex:e,rows:t})}}return o.NULL={},o.version="1.0.0",o}),i(e,"Data/Converters/DataConverter.js",[e["Data/DataTable.js"],e["Core/Utilities.js"]],function(t,e){let{addEvent:i,fireEvent:s,isNumber:o,merge:n}=e;class r{constructor(t){this.dateFormats={"YYYY/mm/dd":{regex:/^([0-9]{4})([\-\.\/])([0-9]{1,2})\2([0-9]{1,2})$/,parser:function(t){return t?Date.UTC(+t[1],t[3]-1,+t[4]):NaN}},"dd/mm/YYYY":{regex:/^([0-9]{1,2})([\-\.\/])([0-9]{1,2})\2([0-9]{4})$/,parser:function(t){return t?Date.UTC(+t[4],t[3]-1,+t[1]):NaN},alternative:"mm/dd/YYYY"},"mm/dd/YYYY":{regex:/^([0-9]{1,2})([\-\.\/])([0-9]{1,2})\2([0-9]{4})$/,parser:function(t){return t?Date.UTC(+t[4],t[1]-1,+t[3]):NaN}},"dd/mm/YY":{regex:/^([0-9]{1,2})([\-\.\/])([0-9]{1,2})\2([0-9]{2})$/,parser:function(t){let e=new Date;if(!t)return NaN;let i=+t[4];return i>e.getFullYear()-2e3?i+=1900:i+=2e3,Date.UTC(i,t[3]-1,+t[1])},alternative:"mm/dd/YY"},"mm/dd/YY":{regex:/^([0-9]{1,2})([\-\.\/])([0-9]{1,2})\2([0-9]{2})$/,parser:function(t){return t?Date.UTC(+t[4]+2e3,t[1]-1,+t[3]):NaN}}};let e=n(r.defaultOptions,t),i=e.decimalPoint;("."===i||","===i)&&(i="."===i?"\\.":",",this.decimalRegExp=RegExp("^(-?[0-9]+)"+i+"([0-9]+)$")),this.options=e}asBoolean(t){return"boolean"==typeof t?t:"string"==typeof t?""!==t&&"0"!==t&&"false"!==t:!!this.asNumber(t)}asDate(t){let e;if("string"==typeof t)e=this.parseDate(t);else if("number"==typeof t)e=t;else{if(t instanceof Date)return t;e=this.parseDate(this.asString(t))}return new Date(e)}asGuessedType(t){return({number:this.asNumber,Date:this.asDate,string:this.asString})[this.guessType(t)].call(this,t)}asNumber(t){if("number"==typeof t)return t;if("boolean"==typeof t)return t?1:0;if("string"==typeof t){let e=this.decimalRegExp;if(t.indexOf(" ")>-1&&(t=t.replace(/\s+/g,"")),e){if(!e.test(t))return NaN;t=t.replace(e,"$1.$2")}return parseFloat(t)}return t instanceof Date?t.getDate():t?t.getRowCount():NaN}asString(t){return""+t}deduceDateFormat(t,e,i){let s=[],o=[],n="YYYY/mm/dd",r,a=[],l=0,h=!1,d,c;for((!e||e>t.length)&&(e=t.length);l<e;l++)if(void 0!==t[l]&&t[l]&&t[l].length)for(c=0,r=t[l].trim().replace(/[-\.\/]/g," ").split(" "),a=["","",""];c<r.length;c++)c<a.length&&(d=parseInt(r[c],10))&&(o[c]=!o[c]||o[c]<d?d:o[c],void 0!==s[c]?s[c]!==d&&(s[c]=!1):s[c]=d,d>31?d<100?a[c]="YY":a[c]="YYYY":d>12&&d<=31?(a[c]="dd",h=!0):a[c].length||(a[c]="mm"));if(h){for(c=0;c<s.length;c++)!1!==s[c]?o[c]>12&&"YY"!==a[c]&&"YYYY"!==a[c]&&(a[c]="YY"):o[c]>12&&"mm"===a[c]&&(a[c]="dd");3===a.length&&"dd"===a[1]&&"dd"===a[2]&&(a[2]="YY"),n=a.join("/")}return i&&(this.options.dateFormat=n),n}emit(t){s(this,t.type,t)}export(t,e){throw this.emit({type:"exportError",columns:[],headers:[]}),Error("Not implemented")}getTable(){throw Error("Not implemented")}guessType(t){let e="string";if("string"==typeof t){let i=this.trim(`${t}`),s=this.decimalRegExp,n=this.trim(i,!0);s&&(n=s.test(n)?n.replace(s,"$1.$2"):"");let r=parseFloat(n);+n===r?t=r:e=o(this.parseDate(t))?"Date":"string"}return"number"==typeof t&&(e=t>31536e6?"Date":"number"),e}on(t,e){return i(this,t,e)}parse(t){throw this.emit({type:"parseError",columns:[],headers:[]}),Error("Not implemented")}parseDate(t,e){let i=this.options,s=e||i.dateFormat,n=NaN,r,a,l;if(i.parseDate)n=i.parseDate(t);else{if(s)(a=this.dateFormats[s])||(a=this.dateFormats["YYYY/mm/dd"]),(l=t.match(a.regex))&&(n=a.parser(l));else for(r in this.dateFormats)if(a=this.dateFormats[r],l=t.match(a.regex)){s=r,n=a.parser(l);break}!l&&("object"==typeof(l=Date.parse(t))&&null!==l&&l.getTime?n=l.getTime()-6e4*l.getTimezoneOffset():o(l)&&(n=l-6e4*new Date(l).getTimezoneOffset(),-1===t.indexOf("2001")&&2001===new Date(n).getFullYear()&&(n=NaN)))}return n}trim(t,e){return"string"==typeof t&&(t=t.replace(/^\s+|\s+$/g,""),e&&/^[0-9\s]+$/.test(t)&&(t=t.replace(/\s/g,""))),t}}return r.defaultOptions={dateFormat:"",alternativeFormat:"",startColumn:0,endColumn:Number.MAX_VALUE,startRow:0,endRow:Number.MAX_VALUE,firstRowAsNames:!0,switchRowsAndColumns:!1},(r||(r={})).getTableFromColumns=function(e=[],i=[]){let s=new t;for(let t=0,o=Math.max(i.length,e.length);t<o;++t)s.setColumn(i[t]||`${t}`,e[t]);return s},r}),i(e,"Data/Converters/CSVConverter.js",[e["Data/Converters/DataConverter.js"],e["Core/Utilities.js"]],function(t,e){let{merge:i}=e;class s extends t{constructor(t){let e=i(s.defaultOptions,t);super(e),this.columns=[],this.headers=[],this.dataTypes=[],this.options=e}export(t,e=this.options){let{useLocalDecimalPoint:i,lineDelimiter:s}=e,o=!1!==this.options.firstRowAsNames,{decimalPoint:n,itemDelimiter:r}=e;n||(n=","!==r&&i?1.1.toLocaleString()[1]:"."),r||(r=","===n?";":",");let a=t.getSortedColumns(e.usePresentationOrder),l=Object.keys(a),h=[],d=l.length,c=[];o&&h.push(l.map(t=>`"${t}"`).join(r));for(let e=0;e<d;e++){let i;let s=l[e],o=a[s],u=o.length,p=t.whatIs(s);p&&(i=p.dataType);for(let t=0;t<u;t++){let s=o[t];if(c[t]||(c[t]=[]),"string"===i?s='"'+s+'"':"number"==typeof s?s=String(s).replace(".",n):"string"==typeof s&&(s=`"${s}"`),c[t][e]=s,e===d-1){let i=e;for(;c[t].length>2&&void 0===c[t][i];)c[t].pop(),i--;h.push(c[t].join(r))}}}return h.join(s)}parse(t,e){let s=this.dataTypes,o=i(this.options,t),{beforeParse:n,lineDelimiter:r,firstRowAsNames:a,itemDelimiter:l}=o,h,d=0,{csv:c,startRow:u,endRow:p}=o,m;if(this.columns=[],this.emit({type:"parse",columns:this.columns,detail:e,headers:this.headers}),c&&n&&(c=n(c)),c){if(h=c.replace(/\r\n|\r/g,"\n").split(r||"\n"),(!u||u<0)&&(u=0),(!p||p>=h.length)&&(p=h.length-1),l||(this.guessedItemDelimiter=this.guessDelimiter(h)),a){let t=h[0].split(l||this.guessedItemDelimiter||",");for(let e=0;e<t.length;e++)t[e]=t[e].trim().replace(/^["']|["']$/g,"");this.headers=t,u++}let t=0;for(d=u;d<=p;d++)"#"===h[d][0]?t++:this.parseCSVRow(h[d],d-u-t);s.length&&s[0].length&&"date"===s[0][1]&&!this.options.dateFormat&&this.deduceDateFormat(this.columns[0],null,!0);for(let t=0,e=this.columns.length;t<e;++t){m=this.columns[t];for(let e=0,i=m.length;e<i;++e)if(m[e]&&"string"==typeof m[e]){let i=this.asGuessedType(m[e]);i instanceof Date&&(i=i.getTime()),this.columns[t][e]=i}}}this.emit({type:"afterParse",columns:this.columns,detail:e,headers:this.headers})}parseCSVRow(t,e){let i=this,s=i.columns||[],o=i.dataTypes,{startColumn:n,endColumn:r}=i.options,a=i.options.itemDelimiter||i.guessedItemDelimiter,{decimalPoint:l}=i.options;l&&l!==a||(l=i.guessedDecimalPoint||".");let h=0,d="",c="",u=0,p=0,m=e=>{d=t[e]},f=t=>{o.length<p+1&&o.push([t]),o[p][o[p].length-1]!==t&&o[p].push(t)},g=()=>{if(n>u||u>r){++u,c="";return}if("string"==typeof c?!isNaN(parseFloat(c))&&isFinite(c)?(c=parseFloat(c),f("number")):isNaN(Date.parse(c))?f("string"):(c=c.replace(/\//g,"-"),f("date")):f("number"),s.length<p+1&&s.push([]),"number"!=typeof c&&"number"!==i.guessType(c)&&l){let t=c;c=c.replace(l,"."),"number"!==i.guessType(c)&&(c=t)}s[p][e]=c,c="",++p,++u};if(t.trim().length&&"#"!==t.trim()[0]){for(;h<t.length;h++){if(m(h),"#"===d&&!/^#[0-F]{3,3}|[0-F]{6,6}/i.test(t.substring(h))){g();return}if('"'===d)for(m(++h);h<t.length&&'"'!==d;)c+=d,m(++h);else d===a?g():c+=d}g()}}guessDelimiter(t){let e=0,i=0,s,o={",":0,";":0,"	":0},n=t.length;for(let s=0;s<n;s++){let n=!1,r,a,l,h="";if(s>13)break;let d=t[s];for(let t=0;t<d.length&&(r=d[t],a=d[t+1],l=d[t-1],"#"!==r);t++){if('"'===r){if(n){if('"'!==l&&'"'!==a){for(;" "===a&&t<d.length;)a=d[++t];void 0!==o[a]&&o[a]++,n=!1}}else n=!0}else void 0!==o[r]?(isNaN(Date.parse(h=h.trim()))?(isNaN(Number(h))||!isFinite(Number(h)))&&o[r]++:o[r]++,h=""):h+=r;","===r&&i++,"."===r&&e++}}return o[";"]>o[","]?s=";":(o[","],o[";"],s=","),e>i?this.guessedDecimalPoint=".":this.guessedDecimalPoint=",",s}getTable(){return t.getTableFromColumns(this.columns,this.headers)}}return s.defaultOptions={...t.defaultOptions,lineDelimiter:"\n"},s}),i(e,"Data/Modifiers/DataModifier.js",[e["Core/Utilities.js"]],function(e){var i;let{addEvent:s,fireEvent:o,merge:n}=e;class r{benchmark(e,i){let s=[],o=this,r=()=>{o.modifyTable(e),o.emit({type:"afterBenchmarkIteration"})},{iterations:a}=n({iterations:1},i);o.on("afterBenchmarkIteration",()=>{if(s.length===a){o.emit({type:"afterBenchmark",results:s});return}r()});let l={startTime:0,endTime:0};return o.on("modify",()=>{l.startTime=t.performance.now()}),o.on("afterModify",()=>{l.endTime=t.performance.now(),s.push(l.endTime-l.startTime)}),r(),s}emit(t){o(this,t.type,t)}modify(t,e){let i=this;return new Promise((s,o)=>{t.modified===t&&(t.modified=t.clone(!1,e));try{s(i.modifyTable(t,e))}catch(s){i.emit({type:"error",detail:e,table:t}),o(s)}})}modifyCell(t,e,i,s,o){return this.modifyTable(t)}modifyColumns(t,e,i,s){return this.modifyTable(t)}modifyRows(t,e,i,s){return this.modifyTable(t)}on(t,e){return s(this,t,e)}}return(i=r||(r={})).types={},i.registerType=function(t,e){return!!t&&!i.types[t]&&!!(i.types[t]=e)},r}),i(e,"Data/Connectors/DataConnector.js",[e["Data/Modifiers/DataModifier.js"],e["Data/DataTable.js"],e["Core/Utilities.js"]],function(e,i,s){var o;let{addEvent:n,fireEvent:r,merge:a,pick:l}=s;class h{constructor(t={}){this.table=new i(t.dataTable),this.metadata=t.metadata||{columns:{}}}get polling(){return!!this.polling}describeColumn(t,e){let i=this.metadata.columns;i[t]=a(i[t]||{},e)}describeColumns(t){let e;let i=Object.keys(t);for(;"string"==typeof(e=i.pop());)this.describeColumn(e,t[e])}emit(t){r(this,t.type,t)}getColumnOrder(t){let e=this.metadata.columns,i=Object.keys(e||{});if(i.length)return i.sort((t,i)=>l(e[t].index,0)-l(e[i].index,0))}getSortedColumns(t){return this.table.getColumns(this.getColumnOrder(t))}load(){return r(this,"afterLoad",{table:this.table}),Promise.resolve(this)}on(t,e){return n(this,t,e)}save(){return r(this,"saveError",{table:this.table}),Promise.reject(Error("Not implemented"))}setColumnOrder(t){for(let e=0,i=t.length;e<i;++e)this.describeColumn(t[e],{index:e})}setModifierOptions(t){let i=t&&e.types[t.type];return this.table.setModifier(i?new i(t):void 0).then(()=>this)}startPolling(e=1e3){let i=this;t.clearTimeout(i._polling),i._polling=t.setTimeout(()=>i.load().catch(t=>i.emit({type:"loadError",error:t,table:i.table})).then(()=>{i._polling&&i.startPolling(e)}),e)}stopPolling(){t.clearTimeout(this._polling),delete this._polling}whatIs(t){return this.metadata.columns[t]}}return(o=h||(h={})).types={},o.registerType=function(t,e){return!!t&&!o.types[t]&&!!(o.types[t]=e)},h}),i(e,"Data/Connectors/CSVConnector.js",[e["Data/Converters/CSVConverter.js"],e["Data/Connectors/DataConnector.js"],e["Core/Utilities.js"]],function(t,e,i){let{merge:s}=i;class o extends e{constructor(e){let i=s(o.defaultOptions,e);super(i),this.converter=new t(i),this.options=i,i.enablePolling&&this.startPolling(1e3*Math.max(i.dataRefreshRate||0,1))}load(t){let e=this,i=e.converter,s=e.table,{csv:o,csvURL:n,dataModifier:r}=e.options;return e.emit({type:"load",csv:o,detail:t,table:s}),Promise.resolve(n?fetch(n).then(t=>t.text()):o||"").then(t=>(t&&(s.deleteColumns(),i.parse({csv:t}),s.setColumns(i.getTable().getColumns())),e.setModifierOptions(r).then(()=>t))).then(i=>(e.emit({type:"afterLoad",csv:i,detail:t,table:s}),e)).catch(i=>{throw e.emit({type:"loadError",detail:t,error:i,table:s}),i})}}return o.defaultOptions={csv:"",csvURL:"",enablePolling:!1,dataRefreshRate:1,firstRowAsNames:!0},e.registerType("CSV",o),o}),i(e,"Data/Converters/GoogleSheetsConverter.js",[e["Data/Converters/DataConverter.js"],e["Core/Utilities.js"]],function(t,e){let{merge:i,uniqueKey:s}=e;class o extends t{constructor(t){let e=i(o.defaultOptions,t);super(e),this.columns=[],this.header=[],this.options=e}parse(t,e){let o;let n=i(this.options,t),r=(n.json&&n.json.values||[]).map(t=>t.slice());if(0===r.length)return!1;this.header=[],this.columns=[],this.emit({type:"parse",columns:this.columns,detail:e,headers:this.header}),this.columns=r;for(let t=0,e=r.length;t<e;t++){o=r[t],this.header[t]=n.firstRowAsNames?`${o.shift()}`:s();for(let e=0,i=o.length;e<i;++e)if(o[e]&&"string"==typeof o[e]){let i=this.asGuessedType(o[e]);i instanceof Date&&(i=i.getTime()),this.columns[t][e]=i}}this.emit({type:"afterParse",columns:this.columns,detail:e,headers:this.header})}getTable(){return t.getTableFromColumns(this.columns,this.header)}}return o.defaultOptions={...t.defaultOptions},o}),i(e,"Data/Connectors/GoogleSheetsConnector.js",[e["Data/Connectors/DataConnector.js"],e["Data/Converters/GoogleSheetsConverter.js"],e["Core/Utilities.js"]],function(t,e,i){let{merge:s,pick:o}=i;class n extends t{constructor(t){let i=s(n.defaultOptions,t);super(i),this.converter=new e(i),this.options=i}load(t){let e=this,i=e.converter,s=e.table,{dataModifier:o,dataRefreshRate:r,enablePolling:a,firstRowAsNames:l,googleAPIKey:h,googleSpreadsheetKey:d}=e.options,c=n.buildFetchURL(h,d,e.options);return e.emit({type:"load",detail:t,table:s,url:c}),fetch(c).then(t=>t.json()).then(t=>{if("object"==typeof t&&t&&"object"==typeof t.error&&t.error&&"number"==typeof t.error.code&&"string"==typeof t.error.message&&"string"==typeof t.error.status)throw Error(t.error.message);return i.parse({firstRowAsNames:l,json:t}),s.deleteColumns(),s.setColumns(i.getTable().getColumns()),e.setModifierOptions(o)}).then(()=>(e.emit({type:"afterLoad",detail:t,table:s,url:c}),a&&setTimeout(()=>e.load(),1e3*Math.max(r||0,1)),e)).catch(i=>{throw e.emit({type:"loadError",detail:t,error:i,table:s}),i})}}return n.defaultOptions={googleAPIKey:"",googleSpreadsheetKey:"",worksheet:1,enablePolling:!1,dataRefreshRate:2,firstRowAsNames:!0},function(t){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ";function i(t={}){let{endColumn:i,endRow:s,googleSpreadsheetRange:n,startColumn:r,startRow:a}=t;return n||(e[r||0]||"A")+(Math.max(a||0,0)+1)+":"+(e[o(i,25)]||"Z")+(s?Math.max(s,0):"Z")}t.buildFetchURL=function(t,e,s={}){return`https://sheets.googleapis.com/v4/spreadsheets/${e}/values/`+(s.onlyColumnNames?"A1:Z1":i(s))+"?alt=json"+(s.onlyColumnNames?"":"&dateTimeRenderOption=FORMATTED_STRING&majorDimension=COLUMNS&valueRenderOption=UNFORMATTED_VALUE")+"&prettyPrint=false"+`&key=${t}`},t.buildQueryRange=i}(n||(n={})),t.registerType("GoogleSheets",n),n}),i(e,"Data/Converters/HTMLTableConverter.js",[e["Data/Converters/DataConverter.js"],e["Core/Utilities.js"]],function(t,e){let{merge:i}=e;class s extends t{constructor(t){let e=i(s.defaultOptions,t);super(e),this.columns=[],this.headers=[],this.options=e,e.tableElement&&(this.tableElement=e.tableElement,this.tableElementID=e.tableElement.id)}export(t,e=this.options){let i=!1!==e.firstRowAsNames,s=e.useMultiLevelHeaders,o=t.getSortedColumns(e.usePresentationOrder),n=Object.keys(o),r=[],a=n.length,l=[],h="";if(i){let t=[];if(s){for(let e of n){let i=(o[e].shift()||"").toString();t.push(i)}h=this.getTableHeaderHTML(n,t,e)}else h=this.getTableHeaderHTML(void 0,n,e)}for(let t=0;t<a;t++){let e=o[n[t]],i=e.length;for(let s=0;s<i;s++){let i=e[s];l[s]||(l[s]=[]),"string"==typeof i||"number"==typeof i||void 0===i||(i=(i||"").toString()),l[s][t]=this.getCellHTMLFromValue(t?"td":"th",null,t?"":'scope="row"',i),t===a-1&&r.push("<tr>"+l[s].join("")+"</tr>")}}let d="";return e.tableCaption&&(d='<caption class="highcharts-table-caption">'+e.tableCaption+"</caption>"),"<table>"+d+h+"<tbody>"+r.join("")+"</tbody></table>"}getCellHTMLFromValue(t,e,i,s,o){let n=s,r="text"+(e?" "+e:"");return"number"==typeof n?(n=n.toString(),","===o&&(n=n.replace(".",o)),r="number"):s||(n="",r="empty"),"<"+t+(i?" "+i:"")+' class="'+r+'">'+n+"</"+t+">"}getTableHeaderHTML(t=[],e=[],i=this.options){let{useMultiLevelHeaders:s,useRowspanHeaders:o}=i,n="<thead>",r=0,a=e&&e.length,l,h=0,d;if(s&&t&&e&&!function(t,e){let i=t.length;if(e.length!==i)return!1;for(;--i;)if(t[i]!==e[i])return!1;return!0}(t,e)){for(n+="<tr>";r<a;++r)(l=t[r])===t[r+1]?++h:h?(n+=this.getCellHTMLFromValue("th","highcharts-table-topheading",'scope="col" colspan="'+(h+1)+'"',l),h=0):(l===e[r]?o?(d=2,delete e[r]):(d=1,e[r]=""):d=1,n+=this.getCellHTMLFromValue("th","highcharts-table-topheading",'scope="col"'+(d>1?' valign="top" rowspan="'+d+'"':""),l));n+="</tr>"}if(e){for(n+="<tr>",r=0,a=e.length;r<a;++r)void 0!==e[r]&&(n+=this.getCellHTMLFromValue("th",null,'scope="col"',e[r]));n+="</tr>"}return n+"</thead>"}parse(t,e){let s=[],o=[],n=i(this.options,t),{endRow:r,startColumn:a,endColumn:l,firstRowAsNames:h}=n,d=n.tableElement||this.tableElement;if(!(d instanceof HTMLElement)){this.emit({type:"parseError",columns:s,detail:e,headers:o,error:"Not a valid HTML Table"});return}this.tableElement=d,this.tableElementID=d.id,this.emit({type:"parse",columns:this.columns,detail:e,headers:this.headers});let c=d.getElementsByTagName("tr"),u=c.length,p=0,m,{startRow:f}=n;if(h&&u){let t=c[0].children,e=t.length;for(let i=a;i<e&&!(i>l);i++)("TD"===(m=t[i]).tagName||"TH"===m.tagName)&&o.push(m.innerHTML);f++}for(;p<u;){if(p>=f&&p<=r){let t=c[p].children,e=t.length,i=0;for(;i<e;){let e=i-a,o=s[e];if(("TD"===(m=t[i]).tagName||"TH"===m.tagName)&&i>=a&&i<=l){s[e]||(s[e]=[]);let t=this.asGuessedType(m.innerHTML);t instanceof Date&&(t=t.getTime()),s[e][p-f]=t;let i=1;for(;p-f>=i&&void 0===o[p-f-i];)o[p-f-i]=null,i++}i++}}p++}this.columns=s,this.headers=o,this.emit({type:"afterParse",columns:s,detail:e,headers:o})}getTable(){return t.getTableFromColumns(this.columns,this.headers)}}return s.defaultOptions={...t.defaultOptions,useRowspanHeaders:!0,useMultiLevelHeaders:!0},s}),i(e,"Data/Connectors/HTMLTableConnector.js",[e["Data/Connectors/DataConnector.js"],e["Core/Globals.js"],e["Data/Converters/HTMLTableConverter.js"],e["Core/Utilities.js"]],function(t,e,i,s){let{win:o}=e,{merge:n}=s;class r extends t{constructor(t){let e=n(r.defaultOptions,t);super(e),this.converter=new i(e),this.options=e}load(t){let e;let i=this,s=i.converter,r=i.table,{dataModifier:a,table:l}=i.options;if(i.emit({type:"load",detail:t,table:r,tableElement:i.tableElement}),"string"==typeof l?(i.tableID=l,e=o.document.getElementById(l)):(e=l,i.tableID=e.id),i.tableElement=e||void 0,!i.tableElement){let e="HTML table not provided, or element with ID not found";return i.emit({type:"loadError",detail:t,error:e,table:r}),Promise.reject(Error(e))}return s.parse(n({tableElement:i.tableElement},i.options),t),r.deleteColumns(),r.setColumns(s.getTable().getColumns()),i.setModifierOptions(a).then(()=>(i.emit({type:"afterLoad",detail:t,table:r,tableElement:i.tableElement}),i))}}return r.defaultOptions={table:""},t.registerType("HTMLTable",r),r}),i(e,"Data/Converters/JSONConverter.js",[e["Data/Converters/DataConverter.js"],e["Data/DataTable.js"],e["Core/Utilities.js"]],function(t,e,i){let{error:s,isArray:o,merge:n,objectEach:r}=i;class a extends t{constructor(t){let i=n(a.defaultOptions,t);super(i),this.columns=[],this.headers=[],this.options=i,this.table=new e}parse(t,e){let{beforeParse:i,orientation:a,firstRowAsNames:l,columnNames:h}=t=n(this.options,t),d=t.data;if(d){if(this.columns=[],this.emit({type:"parse",columns:this.columns,detail:e,headers:this.headers}),i&&(d=i(d)),d=d.slice(),"columns"===a)for(let t=0,e=d.length;t<e;t++){let e=d[t];if(!(e instanceof Array))return;this.headers instanceof Array?(l?this.headers.push(`${e.shift()}`):h&&h instanceof Array&&this.headers.push(h[t]),this.table.setColumn(this.headers[t]||t.toString(),e)):s("JSONConverter: Invalid `columnNames` option.",!1)}else if("rows"===a){l?this.headers=d.shift():h&&(this.headers=h);for(let t=0,e=d.length;t<e;t++){let e=d[t];if(o(e))for(let t=0,i=e.length;t<i;t++)this.columns.length<t+1&&this.columns.push([]),this.columns[t].push(e[t]),this.headers instanceof Array?this.table.setColumn(this.headers[t]||t.toString(),this.columns[t]):s("JSONConverter: Invalid `columnNames` option.",!1);else{let i=this.headers;if(i&&!(i instanceof Array)){let t={};r(i,(i,s)=>{t[s]=i.reduce((t,e)=>t[e],e)}),e=t}this.table.setRows([e],t)}}}this.emit({type:"afterParse",columns:this.columns,detail:e,headers:this.headers})}}getTable(){return this.table}}return a.defaultOptions={...t.defaultOptions,data:[],orientation:"rows"},a}),i(e,"Data/Connectors/JSONConnector.js",[e["Data/Connectors/DataConnector.js"],e["Core/Utilities.js"],e["Data/Converters/JSONConverter.js"]],function(t,e,i){let{merge:s}=e;class o extends t{constructor(t){let e=s(o.defaultOptions,t);super(e),this.converter=new i(e),this.options=e,e.enablePolling&&this.startPolling(1e3*Math.max(e.dataRefreshRate||0,1))}load(t){let e=this,i=e.converter,s=e.table,{data:o,dataUrl:n,dataModifier:r}=e.options;return e.emit({type:"load",data:o,detail:t,table:s}),Promise.resolve(n?fetch(n).then(t=>t.json()):o||[]).then(t=>(t&&(s.deleteColumns(),i.parse({data:t}),s.setColumns(i.getTable().getColumns())),e.setModifierOptions(r).then(()=>t))).then(i=>(e.emit({type:"afterLoad",data:i,detail:t,table:s}),e)).catch(i=>{throw e.emit({type:"loadError",detail:t,error:i,table:s}),i})}}return o.defaultOptions={data:[],enablePolling:!1,dataRefreshRate:0,firstRowAsNames:!0,orientation:"rows"},t.registerType("JSON",o),o}),i(e,"Data/Modifiers/ChainModifier.js",[e["Data/Modifiers/DataModifier.js"],e["Core/Utilities.js"]],function(t,e){let{merge:i}=e;class s extends t{constructor(e,...o){super(),this.chain=o,this.options=i(s.defaultOptions,e);let n=this.options.chain||[];for(let e=0,i=n.length,s,r;e<i;++e)(s=n[e]).type&&(r=t.types[s.type])&&o.push(new r(s))}add(t,e){this.emit({type:"addModifier",detail:e,modifier:t}),this.chain.push(t),this.emit({type:"addModifier",detail:e,modifier:t})}clear(t){this.emit({type:"clearChain",detail:t}),this.chain.length=0,this.emit({type:"afterClearChain",detail:t})}modify(t,e){let i=this.options.reverse?this.chain.slice().reverse():this.chain.slice();t.modified===t&&(t.modified=t.clone(!1,e));let s=Promise.resolve(t);for(let t=0,o=i.length;t<o;++t){let o=i[t];s=s.then(t=>o.modify(t.modified,e))}return(s=s.then(e=>(t.modified.deleteColumns(),t.modified.setColumns(e.modified.getColumns()),t))).catch(i=>{throw this.emit({type:"error",detail:e,table:t}),i})}modifyCell(t,e,i,s,o){let n=this.options.reverse?this.chain.reverse():this.chain;if(n.length){let r=t.clone();for(let t=0,a=n.length;t<a;++t)n[t].modifyCell(r,e,i,s,o),r=r.modified;t.modified=r}return t}modifyColumns(t,e,i,s){let o=this.options.reverse?this.chain.reverse():this.chain.slice();if(o.length){let n=t.clone();for(let t=0,r=o.length;t<r;++t)o[t].modifyColumns(n,e,i,s),n=n.modified;t.modified=n}return t}modifyRows(t,e,i,s){let o=this.options.reverse?this.chain.reverse():this.chain.slice();if(o.length){let n=t.clone();for(let t=0,r=o.length;t<r;++t)o[t].modifyRows(n,e,i,s),n=n.modified;t.modified=n}return t}modifyTable(t,e){this.emit({type:"modify",detail:e,table:t});let i=this.options.reverse?this.chain.reverse():this.chain.slice(),s=t.modified;for(let t=0,o=i.length;t<o;++t)s=i[t].modifyTable(s,e).modified;return t.modified=s,this.emit({type:"afterModify",detail:e,table:t}),t}remove(t,e){let i=this.chain;this.emit({type:"removeModifier",detail:e,modifier:t}),i.splice(i.indexOf(t),1),this.emit({type:"afterRemoveModifier",detail:e,modifier:t})}}return s.defaultOptions={type:"Chain"},t.registerType("Chain",s),s}),i(e,"Data/Modifiers/InvertModifier.js",[e["Data/Modifiers/DataModifier.js"],e["Core/Utilities.js"]],function(t,e){let{merge:i}=e;class s extends t{constructor(t){super(),this.options=i(s.defaultOptions,t)}modifyCell(t,e,i,s,o){let n=t.modified,r=n.getRowIndexBy("columnNames",e);return void 0===r?n.setColumns(this.modifyTable(t.clone()).getColumns(),void 0,o):n.setCell(`${i}`,r,s,o),t}modifyColumns(t,e,i,s){let o=t.modified,n=o.getColumn("columnNames")||[],r=t.getColumnNames(),a=t.getRowCount()!==n.length;if(!a){for(let t=0,e=r.length;t<e;++t)if(r[t]!==n[t]){a=!0;break}}if(a)return this.modifyTable(t,s);r=Object.keys(e);for(let t=0,n=r.length,a,l,h;t<n;++t){a=e[l=r[t]],h=o.getRowIndexBy("columnNames",l)||o.getRowCount();for(let t=0,e=i,n=a.length;t<n;++t,++e)o.setCell(`${e}`,h,a[t],s)}return t}modifyRows(t,e,i,s){let o=t.getColumnNames(),n=t.modified,r=n.getColumn("columnNames")||[],a=t.getRowCount()!==r.length;if(!a){for(let t=0,e=o.length;t<e;++t)if(o[t]!==r[t]){a=!0;break}}if(a)return this.modifyTable(t,s);for(let t=0,r=i,a=e.length,l;t<a;++t,++r)if((l=e[t])instanceof Array)n.setColumn(`${r}`,l);else for(let t=0,e=o.length;t<e;++t)n.setCell(`${r}`,t,l[o[t]],s);return t}modifyTable(t,e){this.emit({type:"modify",detail:e,table:t});let i=t.modified;if(t.hasColumns(["columnNames"])){let e=((t.deleteColumns(["columnNames"])||{}).columnNames||[]).map(t=>`${t}`),s={};for(let i=0,o=t.getRowCount(),n;i<o;++i)(n=t.getRow(i))&&(s[e[i]]=n);i.deleteColumns(),i.setColumns(s)}else{let e={};for(let i=0,s=t.getRowCount(),o;i<s;++i)(o=t.getRow(i))&&(e[`${i}`]=o);e.columnNames=t.getColumnNames(),i.deleteColumns(),i.setColumns(e)}return this.emit({type:"afterModify",detail:e,table:t}),t}}return s.defaultOptions={type:"Invert"},t.registerType("Invert",s),s}),i(e,"Data/Modifiers/RangeModifier.js",[e["Data/Modifiers/DataModifier.js"],e["Core/Utilities.js"]],function(t,e){let{merge:i}=e;class s extends t{constructor(t){super(),this.options=i(s.defaultOptions,t)}modifyTable(t,e){this.emit({type:"modify",detail:e,table:t});let{additive:i,ranges:s,strict:o}=this.options;if(s.length){let e=t.modified,n=t.getColumns(),r=[];for(let a=0,l=s.length,h,d;a<l;++a)if(h=s[a],!o||typeof h.minValue==typeof h.maxValue){a>0&&!i&&(e.deleteRows(),e.setRows(r),n=e.getColumns(),r=[]),d=n[h.column]||[];for(let s=0,n=d.length,a,l;s<n;++s){switch(typeof(a=d[s])){default:continue;case"boolean":case"number":case"string":}(!o||typeof a==typeof h.minValue)&&a>=h.minValue&&a<=h.maxValue&&(l=i?t.getRow(s):e.getRow(s))&&r.push(l)}}e.deleteRows(),e.setRows(r)}return this.emit({type:"afterModify",detail:e,table:t}),t}}return s.defaultOptions={type:"Range",ranges:[]},t.registerType("Range",s),s}),i(e,"Data/Modifiers/SortModifier.js",[e["Data/Modifiers/DataModifier.js"],e["Data/DataTable.js"],e["Core/Utilities.js"]],function(t,e,i){let{merge:s}=i;class o extends t{static ascending(t,e){return(t||0)<(e||0)?-1:(t||0)>(e||0)?1:0}static descending(t,e){return(e||0)<(t||0)?-1:(e||0)>(t||0)?1:0}constructor(t){super(),this.options=s(o.defaultOptions,t)}getRowReferences(t){let e=t.getRows(),i=[];for(let t=0,s=e.length;t<s;++t)i.push({index:t,row:e[t]});return i}modifyCell(t,i,s,o,n){let{orderByColumn:r,orderInColumn:a}=this.options;return i===r&&(a?(t.modified.setCell(i,s,o),t.modified.setColumn(a,this.modifyTable(new e({columns:t.getColumns([r,a])})).modified.getColumn(a))):this.modifyTable(t,n)),t}modifyColumns(t,i,s,o){let{orderByColumn:n,orderInColumn:r}=this.options,a=Object.keys(i);return a.indexOf(n)>-1&&(r&&i[a[0]].length?(t.modified.setColumns(i,s),t.modified.setColumn(r,this.modifyTable(new e({columns:t.getColumns([n,r])})).modified.getColumn(r))):this.modifyTable(t,o)),t}modifyRows(t,i,s,o){let{orderByColumn:n,orderInColumn:r}=this.options;return r&&i.length?(t.modified.setRows(i,s),t.modified.setColumn(r,this.modifyTable(new e({columns:t.getColumns([n,r])})).modified.getColumn(r))):this.modifyTable(t,o),t}modifyTable(t,e){this.emit({type:"modify",detail:e,table:t});let i=t.getColumnNames(),s=t.getRowCount(),n=this.getRowReferences(t),{direction:r,orderByColumn:a,orderInColumn:l}=this.options,h="asc"===r?o.ascending:o.descending,d=i.indexOf(a),c=t.modified;if(-1!==d&&n.sort((t,e)=>h(t.row[d],e.row[d])),l){let t=[];for(let e=0;e<s;++e)t[n[e].index]=e;c.setColumns({[l]:t})}else{let t=[];for(let e=0;e<s;++e)t.push(n[e].row);c.setRows(t,0)}return this.emit({type:"afterModify",detail:e,table:t}),t}}return o.defaultOptions={type:"Sort",direction:"desc",orderByColumn:"y"},t.registerType("Sort",o),o}),i(e,"Dashboards/Components/ComponentRegistry.js",[],function(){var t,e;return(e=t||(t={})).types={},e.registerComponent=function(t,i){return!!t&&!e.types[t]&&!!(e.types[t]=i)},t}),i(e,"Dashboards/Actions/Bindings.js",[e["Dashboards/Components/ComponentRegistry.js"],e["Dashboards/Globals.js"],e["Core/Utilities.js"]],function(t,e,i){var s;let{addEvent:o,fireEvent:n,error:r}=i;return function(i){function s(t){let e;let i="string"==typeof t?document.getElementById(t):t;return null!==i&&n(i,"bindedGUIElement",{},function(t){e=t.guiElement}),e}async function a(s,a,l){let h=s.states,d=s.events,c=s.renderTo||s.cell;if(!c){r("The `renderTo` option is required to render the component.");return}l=l||i.getCell(c);let u=l?.container||document.querySelector("#"+c);if(!u||!s.type){r("The component is misconfigured and is unable to find theHTML cell element ${renderTo} to render the content.");return}let p=t.types[s.type];!p&&(r(`The component's type ${s.type} does not exist.`),l&&(p=t.types.HTML,s.title={text:a.editMode?.lang.errorMessage,className:e.classNamePrefix+"component-title-error "+e.classNamePrefix+"component-title"}));let m=new p(l,s,a),f=m.load().catch(t=>{console.error(t),m.update({connector:{id:""},title:{text:a.editMode?.lang.errorMessage,className:e.classNamePrefix+"component-title-error "+e.classNamePrefix+"component-title"}})});return l&&(m.setCell(l),l.mountedComponent=m),a.mountedComponents.push({options:s,component:m,cell:l||{id:c,container:u,mountedComponent:m}}),n(m,"mount"),d&&d.click&&o(u,"click",()=>{d.click(),l&&m&&u&&h&&h.active&&l.setActiveState()}),h?.hover&&u.classList.add(e.classNames.cellHover),n(m,"afterLoad"),f}i.addComponent=a,i.componentFromJSON=function(e){let s=t.types[e.$class];if(!s)return;let o=i.getCell(e.options.renderTo||"");if(!o)return;let n=s.fromJSON(e,o);return n&&n.render(),n},i.getCell=function(t){let e=s(t);if(e&&"cell"===e.getType())return e},i.getRow=function(t){let e=s(t);if(e&&"row"===e.getType())return e},i.getLayout=function(t){let e=s(t);if(e&&"layout"===e.getType())return e}}(s||(s={})),s}),i(e,"Dashboards/Accessibility/DashboardsAccessibility.js",[],function(){return class{constructor(t){this.board=t,this.addTabIndexToCells()}addTabIndexToCells(){let t;let e=this.board.mountedComponents;for(let i=0,s=e.length;i<s;++i)(t=e[i].cell)&&t.container&&t.container.setAttribute("tabindex",-1)}}}),i(e,"Data/DataCursor.js",[],function(){class t{constructor(t={}){this.emittingRegister=[],this.listenerMap={},this.stateMap=t}addListener(t,e,i){let s=this.listenerMap[t]=this.listenerMap[t]||{};return(s[e]=s[e]||[]).push(i),this}buildEmittingTag(t){return("position"===t.cursor.type?[t.table.id,t.cursor.column,t.cursor.row,t.cursor.state,t.cursor.type]:[t.table.id,t.cursor.columns,t.cursor.firstRow,t.cursor.lastRow,t.cursor.state,t.cursor.type]).join("\x00")}emitCursor(e,i,s,o,n){let r="object"==typeof i?i:s,a="object"==typeof o?o:s,l="string"==typeof i?i:void 0,h=e.id,d=r.state,c=this.listenerMap[h]&&this.listenerMap[h][d];if(n=n||!0===o,c){let i=this.stateMap[h]=this.stateMap[h]||{},s=i[r.state]||[];n&&(s.length||(i[r.state]=s),-1===t.getIndex(r,s)&&s.push(r));let o={cursor:r,cursors:s,table:e};a&&(o.event=a),l&&(o.group=l);let d=this.emittingRegister,u=this.buildEmittingTag(o);if(d.indexOf(u)>=0)return this;try{this.emittingRegister.push(u);for(let t=0,e=c.length;t<e;++t)c[t].call(this,o)}finally{let t=this.emittingRegister.indexOf(u);t>=0&&this.emittingRegister.splice(t,1)}}return this}remitCursor(e,i){let s=this.stateMap[e]&&this.stateMap[e][i.state];if(s){let e=t.getIndex(i,s);e>=0&&s.splice(e,1)}return this}removeListener(t,e,i){let s=this.listenerMap[t]&&this.listenerMap[t][e];if(s){let t=s.indexOf(i);t&&s.splice(t,1)}return this}}return t.version="1.0.0",function(t){function e(t,e){if("range"===t.type)return t;let i={type:"range",firstRow:t.row??(e&&e.firstRow)??0,lastRow:t.row??(e&&e.lastRow)??Number.MAX_VALUE,state:t.state};return void 0!==t.column&&(i.columns=[t.column]),i}t.getIndex=function(t,e){if("position"===t.type){for(let i,s=0,o=e.length;s<o;++s)if("position"===(i=e[s]).type&&i.state===t.state&&i.column===t.column&&i.row===t.row)return s}else{let i=JSON.stringify(t.columns);for(let s,o=0,n=e.length;o<n;++o)if("range"===(s=e[o]).type&&s.state===t.state&&s.firstRow===t.firstRow&&s.lastRow===t.lastRow&&JSON.stringify(s.columns)===i)return o}return -1},t.isEqual=function(t,e){return"position"===t.type&&"position"===e.type?t.column===e.column&&t.row===e.row&&t.state===e.state:"range"===t.type&&"range"===e.type&&t.firstRow===e.firstRow&&t.lastRow===e.lastRow&&JSON.stringify(t.columns)===JSON.stringify(e.columns)},t.isInRange=function(t,i){"position"===i.type&&(i=e(i)),"position"===t.type&&(t=e(t,i));let s=t.columns,o=i.columns;return t.firstRow>=i.firstRow&&t.lastRow<=i.lastRow&&(!s||!o||s.every(t=>o.indexOf(t)>=0))},t.toPositions=function(t){if("position"===t.type)return[t];let e=t.columns||[],i=[],s=t.state;for(let o=t.firstRow,n=t.lastRow;o<n;++o){if(!e.length){i.push({type:"position",row:o,state:s});continue}for(let t=0,n=e.length;t<n;++t)i.push({type:"position",column:e[t],row:o,state:s})}return i},t.toRange=e}(t||(t={})),t}),i(e,"Dashboards/SerializeHelper/DataCursorHelper.js",[e["Data/DataCursor.js"],e["Dashboards/Serializable.js"]],function(t,e){let i={$class:"Data.DataCursor",fromJSON:function(e){return new t(e.stateMap)},jsonSupportFor:function(e){return e instanceof t},toJSON:function(t){let e,i,s,o,n;let r=t.stateMap,a={},l=Object.keys(t.stateMap);for(let t=0,h=l.length;t<h;++t){n=Object.keys(r[s=l[t]]),a[s]={};for(let t=0,l=n.length;t<l;++t){o=n[t],e=r[s][o],a[s][o]=i=[];for(let t=0,s=e.length;t<s;++t)i.push({...e[t]})}}return{$class:"Data.DataCursor",stateMap:a}}};return e.registerHelper(i),i}),i(e,"Data/DataPoolDefaults.js",[],function(){return{connectors:[]}}),i(e,"Data/DataPool.js",[e["Data/Connectors/DataConnector.js"],e["Data/DataPoolDefaults.js"],e["Core/Utilities.js"]],function(t,e,i){class s{constructor(t=e){t.connectors=t.connectors||[],this.connectors={},this.options=t,this.waiting={}}emit(t){i.fireEvent(this,t.type,t)}getConnector(t){let e=this.connectors[t];if(e)return Promise.resolve(e);let i=this.waiting[t];if(!i){i=this.waiting[t]=[];let e=this.getConnectorOptions(t);if(!e)throw Error(`Connector not found. (${t})`);this.loadConnector(e).then(e=>{delete this.waiting[t];for(let t=0,s=i.length;t<s;++t)i[t][0](e)}).catch(e=>{delete this.waiting[t];for(let t=0,s=i.length;t<s;++t)i[t][1](e)})}return new Promise((t,e)=>{i.push([t,e])})}getConnectorIds(){let t=this.options.connectors,e=[];for(let i=0,s=t.length;i<s;++i)e.push(t[i].id);return e}getConnectorOptions(t){let e=this.options.connectors;for(let i=0,s=e.length;i<s;++i)if(e[i].id===t)return e[i]}getConnectorTable(t){return this.getConnector(t).then(t=>t.table)}isNewConnector(t){return!this.connectors[t]}loadConnector(e){return new Promise((i,s)=>{this.emit({type:"load",options:e});let o=t.types[e.type];if(!o)throw Error(`Connector type not found. (${e.type})`);new o(e.options).load().then(t=>{this.connectors[e.id]=t,this.emit({type:"afterLoad",options:e}),i(t)}).catch(s)})}on(t,e){return i.addEvent(this,t,e)}setConnectorOptions(t){let e=this.options.connectors,i=this.connectors;this.emit({type:"setConnectorOptions",options:t});for(let i=0,s=e.length;i<s;++i)if(e[i].id===t.id){e.splice(i,1);break}i[t.id]&&(i[t.id].stopPolling(),delete i[t.id]),e.push(t),this.emit({type:"afterSetConnectorOptions",options:t})}}return s.version="1.0.0",s}),i(e,"Dashboards/EditMode/EditGlobals.js",[e["Dashboards/Globals.js"]],function(t){let e=t.classNamePrefix+"edit-";return{classNames:{resizeSnap:e+"resize-snap",resizeSnapX:e+"resize-snap-x",resizeSnapY:e+"resize-snap-y",separator:e+"separator",contextMenuBtn:e+"context-menu-btn",contextMenuBtnText:e+"context-menu-btn-text",contextMenu:e+"context-menu",contextMenuItem:e+"context-menu-item",editModeEnabled:e+"enabled",editToolbar:e+"toolbar",editToolbarCellOutline:e+"toolbar-cell-outline",editToolbarRowOutline:e+"toolbar-row-outline",editToolbarItem:e+"toolbar-item",editToolbarRow:e+"toolbar-row",editToolbarCell:e+"toolbar-cell",editSidebar:e+"sidebar",editSidebarShow:e+"sidebar-show",editSidebarHide:e+"sidebar-hide",editSidebarTitle:e+"sidebar-title",editSidebarMenuItem:e+"sidebar-item",rowContextHighlight:e+"row-context-highlight",cellEditHighlight:e+"cell-highlight",dashboardCellEditHighlightActive:e+"cell-highlight-active",dragMock:e+"drag-mock",dropPointer:e+"drop-pointer",contextDetectionPointer:e+"ctx-detection-pointer",resizePointer:e+"resize-pointer",currentEditedElement:e+"unmask",maskElement:e+"mask",menuItem:e+"menu-item",menu:e+"menu",menuVerticalSeparator:e+"menu-vertical-separator",menuHorizontalSeparator:e+"menu-horizontal-separator",menuDestroy:e+"menu-destroy",editSidebarWrapper:e+"sidebar-wrapper",customSelect:e+"custom-select",customSelectButton:e+"custom-option-button",toggleContainer:e+"toggle-container",toggleWrapper:e+"toggle-wrapper",toggleSlider:e+"toggle-slider",toggleWrapperColored:e+"toggle-wrapper-colored",toggleLabels:e+"toggle-labels",button:e+"button",sidebarNavButton:e+"sidebar-button-nav",labelText:e+"label-text",editSidebarTabBtn:e+"sidebar-tab-btn",editToolsBtn:e+"tools-btn",editTools:e+"tools",editGridItems:e+"grid-items",confirmationPopup:e+"confirmation-popup",popupButtonContainer:e+"confirmation-popup-button-container",popupContentContainer:e+"confirmation-popup-content",popupCancelBtn:e+"confirmation-popup-cancel-btn",popupConfirmBtn:e+"confirmation-popup-confirm-btn",popupCloseButton:e+"popup-close",editOverlay:e+"overlay",editOverlayActive:e+"overlay-active",resizerMenuBtnActive:e+"resizer-menu-btn-active",sidebarCloseButton:e+"close-btn",editSidebarTabBtnWrapper:e+"tabs-buttons-wrapper",editSidebarRight:e+"sidebar-right",editSidebarRightShow:e+"sidebar-right-show",viewFullscreen:e+"view-fullscreen",accordionMenu:e+"accordion-menu",accordionContainer:e+"accordion",accordionHeader:e+"accordion-header",accordionHeaderBtn:e+"accordion-header-btn",accordionHeaderIcon:e+"accordion-header-icon",accordionContent:e+"accordion-content",accordionNestedWrapper:e+"accordion-nested",accordionMenuButtonsContainer:e+"accordion-menu-buttons-container",accordionMenuButton:e+"accordion-menu-button",hiddenElement:e+"hidden-element",collapsableContentHeader:e+"collapsable-content-header",collapsedElement:e+"collapsed-element",dropdown:e+"dropdown",dropdownContent:e+"dropdown-content",dropdownButton:e+"dropdown-button",dropdownButtonContent:e+"dropdown-button-content",dropdownIcon:e+"pointer",icon:e+"icon"},lang:{accessibility:{contextMenu:{button:"Context menu"},editMode:{editMode:"Edit mode toggle button"}},addComponent:"Add component",cancelButton:"Cancel",caption:"Caption",chartClassName:"Chart class name",chartConfig:"Chart configuration",chartID:"Chart ID",chartOptions:"Chart options",chartType:"Chart type",connectorName:"Connector name",confirmButton:"Confirm",confirmDestroyCell:"Do you really want to destroy the cell?",confirmDestroyRow:"Do you really want to destroy the row?",dataLabels:"Data labels",editMode:"Edit mode",errorMessage:"Something went wrong",exitFullscreen:"Exit full screen",id:"Id",off:"off",on:"on",pointFormat:"Point format",settings:"Settings",style:"Styles",title:"Title",viewFullscreen:"View in full screen",sidebar:{HTML:"HTML",layout:"Layout",Highcharts:"Highcharts",DataGrid:"DataGrid",KPI:"KPI"}}}}),i(e,"Dashboards/Layout/GUIElement.js",[e["Core/Utilities.js"],e["Dashboards/Globals.js"]],function(t,e){let{addEvent:i,createElement:s,uniqueKey:o,objectEach:n,error:r}=t;return class{static getOffsets(t,e){let i={left:0,top:0,right:0,bottom:0};if(t.container){let s=t.container.getBoundingClientRect(),o=e?e.getBoundingClientRect():{left:0,top:0};i.left=s.left-o.left,i.top=s.top-o.top,i.right=s.right-o.left,i.bottom=s.bottom-o.top}return i}static getDimFromOffsets(t){return{width:t.right-t.left,height:t.bottom-t.top}}static createElementId(t){return e.classNamePrefix+t+"-"+o().slice(11)}static getPercentageWidth(t){let e;let i=/^([0-9]{1})[\-\/\.]([0-9]{1,2})$/;if(i.test(t)){let s=t.match(i)||[];e=((e=100*+s[1]/+s[2])<=100?e:100)+"%"}else if(-1!==t.indexOf("%")){let i=parseFloat(t);e=(i<=100?i>=0?i:0:100)+"%"}return e}getElementContainer(t){let e;let o=this;if(t.render)t.attribs&&!t.attribs.id&&delete t.attribs.id;else if("string"==typeof t.elementId){let e=document.getElementById(t.elementId);e?o.container=e:r("Element "+t.elementId+" does not exist")}return e=t.element instanceof HTMLElement?t.element:s("div",t.attribs||{},t.style||{},t.parentContainer),o.removeBindedEventFn=i(e,"bindedGUIElement",function(t){t.guiElement=o,t.stopImmediatePropagation()}),e}destroy(){let t=this;t.removeBindedEventFn&&t.removeBindedEventFn(),t.container&&t.container.parentNode&&t.container.parentNode.removeChild(t.container),n(t,function(e,i){delete t[i]})}getType(){return this.type}changeVisibility(t=!0,e){let i=this.isVisible&&!t||!this.isVisible&&t;this.container&&i&&(this.container.style.display=t?e||"block":"none",this.isVisible=t)}hide(){this.changeVisibility(!1)}show(){this.changeVisibility()}}}),i(e,"Dashboards/Layout/Cell.js",[e["Dashboards/Actions/Bindings.js"],e["Dashboards/EditMode/EditGlobals.js"],e["Dashboards/Globals.js"],e["Dashboards/Layout/GUIElement.js"],e["Core/Utilities.js"]],function(t,e,i,s,o){let{componentFromJSON:n}=t,{merge:r,fireEvent:a}=o;class l extends s{static fromJSON(t,e){if(e){let i=t.options,s=i.containerId;return e.layout.copyId&&(s=s+"_"+e.layout.copyId),new l(e,{id:s,parentContainerId:e.container&&e.container.id||i.parentContainerId,mountedComponentJSON:i.mountedComponentJSON,style:i.style,layoutJSON:i.layoutJSON,width:i.width,height:i.height})}}constructor(t,e,s){let o;super(),this.type=i.guiElementType.cell,this.id=e.id,this.options=e,this.row=t,this.isVisible=!0;let n=document.getElementById(e.parentContainerId||"")||t.container,a=t.layout.options||{},l=t.options||{},h=a.cellClassName||"";if(e.height&&(o="number"==typeof e.height?e.height+"px":e.height),this.container=this.getElementContainer({render:t.layout.board.guiEnabled,parentContainer:n,attribs:{id:e.id,className:i.classNames.cell+" "+h},element:s,elementId:e.id,style:r(a.style,l.style,e.style,{height:o})}),this.options.mountedComponentJSON&&this.mountComponentFromJSON(this.options.mountedComponentJSON),this.options.layout&&this.setNestedLayout(),this.options.layoutJSON){let t=this.row.layout,e=t.board,i=t.constructor.fromJSON;this.nestedLayout=i(r(this.options.layoutJSON,{parentContainerId:this.options.id}),e,this)}}setNestedLayout(){let t=this.row.layout.board,e=this.row.layout.constructor,i=t.options.gui;this.nestedLayout=new e(t,r({},i&&i.layoutOptions,this.options.layout,{parentContainerId:this.options.id}),this)}mountComponentFromJSON(t){this.id!==t.options.parentElement&&(t.options.parentElement=this.id);let e=n(t);return!!e&&(this.mountedComponent=e,!0)}destroy(){let{row:t}=this;this.mountedComponent?.destroy(),this.nestedLayout?.destroy(),t.unmountCell(this);let e=t.cells?.length===0;super.destroy(),e&&t.destroy()}toJSON(){let t=(this.row.container||{}).id||"";return{$class:"Dashboards.Layout.Cell",options:{containerId:this.container.id,parentContainerId:t,width:this.options.width,height:this.options.height,mountedComponentJSON:this.mountedComponent&&this.mountedComponent.toJSON(),style:this.options.style,layoutJSON:this.nestedLayout&&this.nestedLayout.toJSON()}}}getOptions(){return this.options}changeVisibility(t=!0){super.changeVisibility(t);let e=this,i=e.row;e.row.getVisibleCells().length?e.isVisible&&!i.isVisible&&e.row.show():e.row.hide(),setTimeout(()=>{a(i,"cellChange",{row:i,cell:e})},0)}getParentCell(t){let e;if(t<=this.row.layout.level){if(this.row.layout.level===t)return this;if(this.row.layout.level-1>=0&&(e=this.row.layout.parentCell))return e.getParentCell(t)}}getOverlappingLevels(t,e,i){let o=this.row.layout.parentCell,n=[this.row.layout.level];if(o){let r=i||s.getOffsets(this)[t],a=s.getOffsets(o)[t];Math.abs(r-a)<e&&(n=[...n,...o.getOverlappingLevels(t,e,a)])}return n}setSize(t,e){let i=this.row.layout.board.editMode;if(this.container){if(t){if("auto"===t&&"1 1 0%"!==this.container.style.flex)this.container.style.flex="1 1 0%";else{let e=this.convertWidthToValue(t);e&&this.container.style.flex!=="0 0 "+e&&(this.container.style.flex="0 0 "+e),this.options.width=e}}e&&(this.options.height=this.container.style.height=e+"px"),i&&(i.hideContextPointer(),i.cellToolbar&&i.cellToolbar.isVisible&&(i.cellToolbar.cell===this?i.cellToolbar.showToolbar(this):i.cellToolbar.hide())),a(this.row.layout.board,"cellResize",{cell:this}),a(this.row,"cellChange",{cell:this,row:this.row})}}setHighlight(t){let i=this.row.layout.board.editMode;if(this.container&&i){let i=this.container,s=i.classList.contains(e.classNames.cellEditHighlight);t||s?t&&s&&(i.classList.remove(e.classNames.cellEditHighlight),this.row.layout.board.container.classList.remove(e.classNames.dashboardCellEditHighlightActive),this.isHighlighted=!1):(i.classList.add(e.classNames.cellEditHighlight),this.row.layout.board.container.classList.add(e.classNames.dashboardCellEditHighlightActive),this.isHighlighted=!0)}}setActiveState(){this.row.layout.board.mountedComponents.forEach(t=>{t.cell.container&&t.cell.container.classList.remove(i.classNames.cellActive)}),this.container&&this.container.classList.add(i.classNames.cellActive)}setLoadingState(t=!0){this.container?.classList?.toggle(i.classNames.cellLoading,t)}convertWidthToValue(t){return"number"==typeof t?t+"px":/px/.test(t)?t:s.getPercentageWidth(t)||""}}return l}),i(e,"Dashboards/Layout/Row.js",[e["Dashboards/Globals.js"],e["Dashboards/Layout/Cell.js"],e["Dashboards/Layout/GUIElement.js"],e["Core/Utilities.js"],e["Dashboards/EditMode/EditGlobals.js"]],function(t,e,i,s,o){let{pick:n,defined:r,merge:a,objectEach:l,fireEvent:h}=s;class d extends i{static fromJSON(t,e){if(e){let i=t.options,s=i.containerId||"";return s&&e.copyId&&(s=s+"_"+e.copyId),new d(e,{id:s,parentContainerId:e.container&&e.container.id||i.parentContainerId,cellsJSON:i.cells,style:i.style})}}static setContainerHeight(t,e){e&&(t.style.height=e+"px")}constructor(e,i,s){super(),this.type=t.guiElementType.row,this.layout=e,this.cells=[],this.options=i,this.isVisible=!0;let o=document.getElementById(i.parentContainerId||"")||e.container,n=e.options||{},r=n.rowClassName||"";this.container=this.getElementContainer({render:e.board.guiEnabled,parentContainer:o,attribs:{id:i.id,className:t.classNames.row+" "+r},element:s,elementId:i.id,style:a(n.style,i.style)}),this.options.cells&&this.setCells(),i.cellsJSON&&!this.cells.length&&this.setCellsFromJSON(i.cellsJSON)}setCells(){let t,e,i;let s=(this.layout.options||{}).cellClassName||"",o=n(this.options.cells,this.container&&this.container.getElementsByClassName(s))||[];for(e=0,i=o.length;e<i;++e)t=o[e],this.addCell(this.layout.board.guiEnabled?t:{id:""},t instanceof HTMLElement?t:void 0)}setCellsFromJSON(t){let i,s;let o=[];for(let n=0,r=t.length;n<r;++n)s=t[n],(i=e.fromJSON({$class:s.$class,options:{containerId:s.options.containerId,parentContainerId:s.options.parentContainerId,width:s.options.width,height:s.options.height,style:s.options.style,layoutJSON:s.options.layoutJSON,mountedComponentJSON:void 0}},this))&&(this.cells.push(i),s.options.mountedComponentJSON&&o.push({cell:i,mountedComponentJSON:s.options.mountedComponentJSON}));for(let t=0,e=o.length;t<e;++t)o[t].cell.mountComponentFromJSON(o[t].mountedComponentJSON)}addCell(t,i,s){let o=new e(this,t,i);return r(s)?this.mountCell(o,s):this.cells.push(o),this.layout.board.editMode&&this.layout.board.editMode.setCellEvents(o),o}destroy(){let{layout:t}=this,e=[...this.cells];for(let t=0,i=e?.length;t<i;++t)e[t]&&e[t].destroy();this.layout&&(this.layout.unmountRow(this),super.destroy(),t.rows?.length===0&&t.destroy())}toJSON(){let t=(this.layout.container||{}).id||"",e=[];for(let t=0,i=this.cells.length;t<i;++t)e.push(this.cells[t].toJSON());return{$class:"Dashboards.Layout.Row",options:{containerId:this.container.id,parentContainerId:t,cells:e,style:this.options.style}}}getOptions(){let t=[];for(let e=0,i=this.cells.length;e<i;++e)t.push(this.cells[e].getOptions());return{id:this.options.id,style:this.options.style,cells:t}}setSize(t){d.setContainerHeight(this.container,t)}getCellIndex(t){for(let e=0,i=this.cells?.length;e<i;++e)if(this.cells[e].id===t.id)return e}mountCell(t,e=0){let i=this,s=i.cells[e],o=i.cells[e-1];t.container&&(s&&s.container?s.container.parentNode.insertBefore(t.container,s.container):o&&o.container?o.container.parentNode.insertBefore(t.container,o.container.nextSibling):o||s||!i.container||i.container.appendChild(t.container),i.cells.splice(e,0,t),t.row=i,setTimeout(()=>{h(i,"cellChange",{row:i,cell:t})},0))}unmountCell(t){let e=this.getCellIndex(t);r(e)&&this.cells.splice(e,1),setTimeout(()=>{h(this,"cellChange",{row:this,cell:t})},0)}getVisibleCells(){let t=[];for(let e=0,i=this.cells.length;e<i;++e)this.cells[e].isVisible&&t.push(this.cells[e]);return t}changeVisibility(t=!0,e){super.changeVisibility(t,e),this.layout.getVisibleRows().length?this.isVisible&&!this.layout.isVisible&&this.layout.show():this.layout.hide()}show(){this.changeVisibility(!0,"flex")}setHighlight(t){if(this.container){let e=this.container,i=e.classList.contains(o.classNames.rowContextHighlight);t||i?t&&i&&e.classList.remove(o.classNames.rowContextHighlight):e.classList.add(o.classNames.rowContextHighlight)}}getRowLevels(){let t,e;let s={},o=[];for(let o=0,n=this.cells.length;o<n;++o)(t=this.cells[o]).isVisible&&(s[(e=i.getOffsets(t)).top]||(s[e.top]={top:e.top,bottom:e.bottom,cells:[]}),s[e.top].bottom<e.bottom&&(s[e.top].bottom=e.bottom),s[e.top].cells.push(t));return l(s,t=>{o.push(t)}),o}getRowLevelInfo(t){let e;let i=this.getRowLevels();for(let s=0,o=i.length;s<o;++s)i[s].top<=t&&i[s].bottom>t&&(e={index:s,rowLevels:i,rowLevel:i[s]});return e}}return d}),i(e,"Dashboards/Layout/Layout.js",[e["Dashboards/Utilities.js"],e["Core/Utilities.js"],e["Dashboards/Layout/Row.js"],e["Dashboards/Layout/GUIElement.js"],e["Dashboards/Globals.js"]],function(t,e,i,s,o){let{uniqueKey:n}=t,{pick:r,defined:a}=e;class l extends s{static fromJSON(t,e,i){let s=t.options,o=document.getElementById(t.options.containerId),r=new l(e,{id:s.containerId,copyId:o?n():"",parentContainerId:s.parentContainerId||e.container.id,rowsJSON:s.rows,style:s.style},i);return r&&!i&&e.layouts.push(r),r}static importLocal(t,e){let i;let s=localStorage.getItem(o.classNamePrefix+t);return s&&(i=l.fromJSON(JSON.parse(s),e)),i}constructor(t,e,i){super(),this.type=o.guiElementType.layout,this.board=t,this.rows=[],this.options=e,this.isVisible=!0;let s=i?i.container:document.getElementById(e.parentContainerId||"")||t.layoutsWrapper;i?(this.parentCell=i,this.level=i.row.layout.level+1):this.level=0,e.copyId&&(this.copyId=e.copyId);let n=(this.options||{}).rowClassName||"";this.container=this.getElementContainer({render:t.guiEnabled,parentContainer:s,attribs:{id:(e.id||"")+(this.copyId?"_"+this.copyId:""),className:o.classNames.layout+" "+n},elementId:e.id,style:this.options.style}),this.options.rows&&this.setRows(),e.rowsJSON&&!this.rows.length&&this.setRowsFromJSON(e.rowsJSON)}setRows(){let t,e,i;let s=r(this.options.rows,this.container&&this.container.getElementsByClassName(this.options.rowClassName||""))||[];for(e=0,i=s.length;e<i;++e)t=s[e],this.addRow(this.board.guiEnabled?t:{},t instanceof HTMLElement?t:void 0)}setRowsFromJSON(t){let e;for(let s=0,o=t.length;s<o;++s)(e=i.fromJSON(t[s],this))&&this.rows.push(e)}addRow(t,e,s){let o=new i(this,t,e);return a(s)?this.mountRow(o,s):this.rows.push(o),this.board.editMode&&this.board.editMode.setRowEvents(o),o}destroy(){for(let t=this.board.layouts.length-1;t>=0;t--)this.board.layouts[t]===this&&this.board.layouts.splice(t,1);this.parentCell&&delete this.parentCell.nestedLayout;for(let t=this.rows.length-1;t>=0;t--)this.rows[t].destroy();this.parentCell&&this.parentCell.destroy(),super.destroy()}exportLocal(){localStorage.setItem(o.classNamePrefix+this.options.id,JSON.stringify(this.toJSON()))}getRowIndex(t){for(let e=0,i=this.rows.length;e<i;++e)if(this.rows[e]===t)return e}mountRow(t,e){let i=this.rows[e],s=this.rows[e-1];t.container&&(i&&i.container?i.container.parentNode.insertBefore(t.container,i.container):s&&s.container&&s.container.parentNode.insertBefore(t.container,s.container.nextSibling),this.rows.splice(e,0,t),t.layout=this)}unmountRow(t){let e=this.getRowIndex(t);a(e)&&this.rows.splice(e,1)}getVisibleRows(){let t=[];for(let e=0,i=this.rows.length;e<i;++e)this.rows[e].isVisible&&t.push(this.rows[e]);return t}changeVisibility(t=!0){super.changeVisibility(t),this.parentCell&&(this.isVisible&&!this.parentCell.isVisible?this.parentCell.show():!this.isVisible&&this.parentCell.isVisible&&this.parentCell.hide())}toJSON(){let t=(this.board.container||{}).id||"",e=[];for(let t=0,i=this.rows.length;t<i;++t)e.push(this.rows[t].toJSON());return{$class:"Dashboards.Layout",options:{containerId:this.container.id,parentContainerId:t,rows:e,style:this.options.style}}}getOptions(){let t=[];for(let e=0,i=this.rows.length;e<i;++e)t.push(this.rows[e].getOptions());return{id:this.options.id,layoutClassName:this.options.layoutClassName,rowClassName:this.options.rowClassName,cellClassName:this.options.cellClassName,style:this.options.style,rows:t}}}return l}),i(e,"Dashboards/Board.js",[e["Dashboards/Actions/Bindings.js"],e["Dashboards/Components/ComponentRegistry.js"],e["Dashboards/Accessibility/DashboardsAccessibility.js"],e["Data/DataCursor.js"],e["Dashboards/SerializeHelper/DataCursorHelper.js"],e["Data/DataPool.js"],e["Dashboards/Globals.js"],e["Dashboards/Layout/Layout.js"],e["Dashboards/Serializable.js"],e["Core/Utilities.js"],e["Dashboards/Components/HTMLComponent.js"]],function(e,i,s,o,n,r,a,l,h,d,c){var u;let{merge:p,addEvent:m,error:f,objectEach:g,uniqueKey:y,createElement:b}=d;class C{static board(t,e,i){return new C(t,e).init(i)}constructor(t,e){this.componentTypes=i.types,this.options=p(C.defaultOptions,e),this.dataPool=new r(e.dataPool),this.id=y(),this.guiEnabled=!!e.gui&&this.options?.gui?.enabled,this.editModeEnabled=!!e.editMode&&this.options?.editMode?.enabled,this.layouts=[],this.mountedComponents=[],this.initContainer(t),this.guiEnabled&&this.initLayout(),this.dataCursor=new o,this.index=a.boards.length,a.boards.push(this),this.a11y=new s(this)}init(t){let e=this.options,i=e.components?this.setComponents(e.components):[];return(this.initEvents(),t)?Promise.all(i).then(()=>this):this}initEvents(){let e=this,i=()=>{e.reflow()};if("function"==typeof ResizeObserver)this.resizeObserver=new ResizeObserver(i),this.resizeObserver.observe(e.container);else{let e=m(t,"resize",i);m(this,"destroy",e)}}initContainer(e){"string"==typeof e&&(e=t.document.getElementById(e)),e||f(13,!0),this.guiEnabled?(e.innerHTML="",this.boardWrapper=e,this.container=b("div",{className:a.classNames.boardContainer},{},this.boardWrapper)):this.container=e}initLayout(){let t=this.options;if(Dashboards.EditMode)this.layoutsWrapper=b("div",{className:a.classNames.layoutsWrapper},{},this.container),t.gui&&this.setLayouts(t.gui),t.layoutsJSON&&!this.layouts.length&&this.setLayoutsFromJSON(t.layoutsJSON),this.editModeEnabled&&(this.editMode=new Dashboards.EditMode(this,this.options.editMode),this.fullscreen=new Dashboards.FullScreen(this));else throw Error("Missing layout.js module")}setLayouts(t){let e=t.layouts;for(let i=0,s=e.length;i<s;++i)this.layouts.push(new l(this,p({},t.layoutOptions,e[i])))}setLayoutsFromJSON(t){let e;for(let i=0,s=t.length;i<s;++i)(e=l.fromJSON(t[i],this))&&this.layouts.push(e)}setComponents(t){let i=[];for(let s=0,o=t.length;s<o;++s)i.push(e.addComponent(t[s],this));return i}destroy(){let t=this;for(let e=0,i=t.layouts?.length;e<i;++e)t.layouts[e].destroy();this.resizeObserver?.unobserve(t.container),t.container?.remove(),g(t,function(e,i){delete t[i]}),a.boards[this.index]=void 0}exportLocal(){localStorage.setItem(a.classNamePrefix+"1",JSON.stringify(this.toJSON()))}importLayoutLocal(t){return l.importLocal(t,this)}reflow(){if(this.editMode){let t=this.editMode.tools;this.editMode.hideToolbars(["cell","row"]),this.editMode.hideContextPointer(),t.contextMenu&&t.contextMenu.updatePosition(t.contextButtonElement)}}fromJSON(t){let e=t.options,i=new C(e.containerId,{componentOptions:e.componentOptions,dataPool:e.dataPool,layoutsJSON:e.layouts});return i.dataCursor=n.fromJSON(t.dataCursor),i}toJSON(){let t=[];for(let e=0,i=this.layouts.length;e<i;++e)t.push(this.layouts[e].toJSON());return{$class:"Board",dataCursor:n.toJSON(this.dataCursor),options:{containerId:this.container.id,dataPool:this.options.dataPool,guiEnabled:this.guiEnabled,layouts:t,componentOptions:this.options.componentOptions}}}getOptions(){let t=[],e=[];for(let e=0,i=this.layouts.length;e<i;++e)t.push(this.layouts[e].getOptions());for(let t=0,i=this.mountedComponents.length;t<i;++t)this.mountedComponents[t].cell&&this.mountedComponents[t].cell.mountedComponent&&e.push(this.mountedComponents[t].component.getOptions());return{...this.options,gui:{layouts:t},components:e}}}return(u=C||(C={})).defaultOptions={gui:{enabled:!0,layoutOptions:{rowClassName:void 0,cellClassName:void 0},layouts:[]},components:[]},u.importLocal=function(){let t=localStorage.getItem(a.classNamePrefix+"1");if(t)try{return h.fromJSON(JSON.parse(t))}catch(t){}},h.registerClassPrototype("Board",C.prototype),i.registerComponent("HTML",c),C}),i(e,"Dashboards/Plugins/DataGridComponent/DataGridSyncHandlers.js",[e["Core/Utilities.js"]],function(t){let{addEvent:e,removeEvent:i}=t,s={emitters:{highlightEmitter:function(){if("DataGrid"!==this.type)return;let{dataGrid:t,board:s}=this,o=this.sync.syncConfig.highlight;if(!s||!t||!o.enabled)return;let{dataCursor:n}=s,r=t=>{let e=this.connector&&this.connector.table;if(e){let i=t.row,s=i.querySelector(`.highcharts-datagrid-cell[data-original-data="${i.dataset.rowXIndex}"]`);n.emitCursor(e,{type:"position",row:parseInt(i.dataset.rowIndex,10),column:s?s.dataset.columnName:void 0,state:"dataGrid.hoverRow"})}},a=()=>{let t=this.connector&&this.connector.table;t&&n.emitCursor(t,{type:"position",state:"dataGrid.hoverOut"})};return e(t.container,"dataGridHover",r),e(t.container,"mouseout",a),function(){i(t.container,"dataGridHover",r),i(t.container,"mouseout",a)}}},handlers:{highlightHandler:function(){let{board:t}=this;if(!this.sync.syncConfig.highlight.enabled)return;let e=t=>{let e=t.cursor;if("position"===e.type){let{row:t}=e,{dataGrid:i}=this;if(void 0!==t&&i){let e=i.container.querySelector(`.highcharts-datagrid-row[data-row-index="${t}"]`);e&&(i.toggleRowHighlight(e),i.hoveredRow=e)}}},i=()=>{let{dataGrid:t}=this;t&&t.toggleRowHighlight(void 0)};if(t)return(()=>{let{dataCursor:s}=t;if(!s)return;let o=this.connector&&this.connector.table;o&&(s.addListener(o.id,"point.mouseOver",e),s.addListener(o.id,"point.mouseOut",i))})(),()=>{let s=t.dataCursor,o=this.connector&&this.connector.table;o&&(s.removeListener(o.id,"point.mouseOver",e),s.removeListener(o.id,"point.mouseOut",i))}},extremesHandler:function(){let{board:t}=this,e=t=>{let e=t.cursor;if("position"===e.type&&this.dataGrid&&"number"==typeof e?.row){let{row:t}=e;this.dataGrid.scrollToRow(t)}};if(t)return(()=>{let{dataCursor:i}=t;if(!i)return;let s=this.connector&&this.connector.table;s&&i.addListener(s.id,"xAxis.extremes.min",e)})(),()=>{let i=this.connector&&this.connector.table,{dataCursor:s}=t;i&&s.removeListener(i.id,"xAxis.extremes.min",e)}},visibilityHandler:function(){let t=this,{board:e}=t,i=e=>{let i=e.cursor,s=t.dataGrid;if(!(s&&"position"===i.type&&i.column))return;let o=i.column;s.update({columns:{[o]:{show:"series.hide"!==i.state}}})};if(e)return(()=>{let{dataCursor:t}=e;if(!t)return;let s=this.connector&&this.connector.table;s&&(t.addListener(s.id,"series.show",i),t.addListener(s.id,"series.hide",i))})(),()=>{let t=this.connector&&this.connector.table,{dataCursor:s}=e;t&&(s.removeListener(t.id,"series.show",i),s.removeListener(t.id,"series.hide",i))}}}};return{highlight:{emitter:s.emitters.highlightEmitter,handler:s.handlers.highlightHandler},extremes:{handler:s.handlers.extremesHandler},visibility:{handler:s.handlers.visibilityHandler}}}),i(e,"Dashboards/Plugins/DataGridComponent/DataGridComponentDefaults.js",[e["Data/Converters/DataConverter.js"],e["Dashboards/Plugins/DataGridComponent/DataGridSyncHandlers.js"],e["Core/Utilities.js"]],function(t,e,i){let{uniqueKey:s}=i;return{dataGridClassName:"dataGrid-container",dataGridID:"dataGrid-"+s(),dataGridOptions:{},editableOptions:[{name:"connectorName",propertyPath:["connector","id"],type:"select"}],syncHandlers:e,onUpdate:(e,i)=>{let s=e.target;if(s){let e=s.closest(".highcharts-datagrid-row"),o=s.closest(".highcharts-datagrid-cell"),n=new t;if(e&&e instanceof HTMLElement&&o&&o instanceof HTMLElement){let t=e.dataset.rowIndex,{columnName:r}=o.dataset;if(void 0!==t&&void 0!==r){let e=i.table;if(e){let i=n.asGuessedType(s.value);i instanceof Date&&(i=i.toString()),e.setCell(r,parseInt(t,10),i)}}}}}}}),i(e,"Dashboards/Plugins/DataGridComponent/DataGridComponent.js",[e["Dashboards/Components/Component.js"],e["Dashboards/Plugins/DataGridComponent/DataGridSyncHandlers.js"],e["Dashboards/Plugins/DataGridComponent/DataGridComponentDefaults.js"],e["Core/Utilities.js"]],function(t,e,i,s){let{diffObjects:o,merge:n}=s;class r extends t{static fromJSON(t,e){let i=new r(e,n(t.options,{dataGridOptions:JSON.parse(t.options.dataGridOptions||""),syncHandlers:r.syncHandlers}));return i.emit({type:"fromJSON",json:t}),i}constructor(t,e,i){super(t,e=n(r.defaultOptions,e),i),this.connectorListeners=[],this.options=e,this.type="DataGrid",this.options.dataGridClassName&&this.contentElement.classList.add(this.options.dataGridClassName),this.options.dataGridID&&(this.contentElement.id=this.options.dataGridID),this.sync=new r.Sync(this,this.syncHandlers),this.dataGridOptions=this.options.dataGridOptions||{},this.innerResizeTimeouts=[],this.on("afterSetConnector",t=>{this.disableEditingModifiedColumns(t.connector)})}onTableChanged(){this.dataGrid&&!this.dataGrid?.cellInputEl&&this.dataGrid.update({dataTable:this.filterColumns()})}disableEditingModifiedColumns(t){let e=this.getColumnOptions(t);this.dataGrid?.update({columns:e})}getColumnOptions(t){let e=t.options.dataModifier;if(!e||"Math"!==e.type)return{};let i=e.columnFormulas;if(!i)return{};let s={};for(let t=0,e=i.length;t<e;++t)s[i[t].column]={editable:!1};return s}async load(){if(this.emit({type:"load"}),await super.load(),this.connector&&!this.connectorListeners.length){let t=this.connectorListeners;t.push(this.connector.on("afterLoad",t=>{t.table&&this.connector&&this.connector.table.setColumns(t.table.getColumns())})),t.push(this.connector.table.on("afterSetCell",t=>{let e=this.dataGrid,i=!0;if(e){let s=e.rowElements[t.rowIndex],o=[];s&&(o=Array.prototype.slice.call(s.childNodes)),o.forEach(e=>{if(e.childElementCount>0){let s=e.childNodes[0],o="string"==typeof t.cellValue?s.value:+s.value;e.dataset.columnName===t.columnName&&o===t.cellValue&&(i=!1)}})}i&&this.update({})}))}return this.emit({type:"afterLoad"}),this}render(){return super.render(),this.dataGrid||(this.dataGrid=this.constructDataGrid()),this.connector&&this.dataGrid&&this.dataGrid.dataTable.modified!==this.connector.table.modified&&this.dataGrid.update({dataTable:this.filterColumns()}),this.sync.start(),this.emit({type:"afterRender"}),this.setupConnectorUpdate(),this}resize(t,e){this.dataGrid&&super.resize(t,e)}async update(t){if(t.connector?.id!==this.connectorId){let t=this.connectorListeners;for(let e=0,i=t.length;e<i;++e)t[e]();t.length=0}await super.update(t),this.dataGrid&&(this.filterAndAssignSyncOptions(e),this.dataGrid.update(this.options.dataGridOptions||{})),this.emit({type:"afterUpdate"})}constructDataGrid(){if(r.DataGridNamespace){let t=r.DataGridNamespace.DataGrid,e=this.connector?this.getColumnOptions(this.connector):{};return this.dataGrid=new t(this.contentElement,{...this.options.dataGridOptions,dataTable:this.options.dataGridOptions?.dataTable||this.filterColumns(),columns:n(e,this.options.dataGridOptions?.columns)}),this.dataGrid}throw Error("DataGrid not connected.")}setupConnectorUpdate(){let{connector:t,dataGrid:e}=this;t&&e&&e.on("cellClick",e=>{"input"in e&&e.input.addEventListener("keyup",e=>this.options.onUpdate(e,t))})}filterColumns(){let t=this.connector?.table.modified,e=this.options.visibleColumns;if(t){if(!e?.length)return t;let i=t.getColumnNames().filter(t=>e?.length>0&&!e.includes(t)),s=t.clone();return s.deleteColumns(i),s}}getOptionsOnDrop(t){let e=t.editMode.board.dataPool.getConnectorIds(),i={cell:"",type:"DataGrid"};return e.length&&(i={...i,connector:{id:e[0]}}),i}toJSON(){let t=JSON.stringify(this.options.dataGridOptions),e=super.toJSON(),i={...e,options:{...e.options,dataGridOptions:t}};return this.emit({type:"toJSON",json:i}),i}getOptions(){return{...o(this.options,r.defaultOptions),type:"DataGrid"}}destroy(){this.dataGrid?.containerResizeObserver.disconnect(),super.destroy()}}return r.syncHandlers=e,r.defaultOptions=n(t.defaultOptions,i),r}),i(e,"Dashboards/Plugins/DataGridPlugin.js",[e["Dashboards/Plugins/DataGridComponent/DataGridComponent.js"]],function(t){return{custom:{connectDataGrid:function(e){t.DataGridNamespace=e}},name:"DataGrid.DashboardsPlugin",onRegister:function(e){let{ComponentRegistry:i}=e;i.registerComponent("DataGrid",t)},onUnregister:function(t){}}}),i(e,"Dashboards/Plugins/HighchartsComponent/HighchartsSyncHandlers.js",[e["Core/Utilities.js"]],function(t){let{addEvent:e}=t;function i(t,e){let{ranges:i}=e;if(i){let e=i.reduce((t,e)=>(e.minValue>t.minValue&&(t=e),t),i[0]),s=t.getRowIndexBy(e.column,e.minValue);if(s)return s}return 0}let s={emitters:{highlightEmitter:function(){if("Highcharts"!==this.type)return;let{chart:t,board:e}=this;if(!this.sync.syncConfig.highlight.enabled)return;let{dataCursor:s}=e,o=this.connector&&this.connector.table;return t?.series&&o&&t.series.forEach(e=>{e.update({point:{events:{mouseOver:function(){let t=0,n=o.getModifier();n?.options.type==="Range"&&(t=i(o,n.options)),s.emitCursor(o,{type:"position",row:t+this.index,column:e.name,state:"point.mouseOver"})},mouseOut:function(){let t=0,n=o.getModifier();n?.options.type==="Range"&&(t=i(o,n.options)),s.emitCursor(o,{type:"position",row:t+this.index,column:e.name,state:"point.mouseOut"})}}}},!1),t.redraw()}),function(){t&&t.series&&(t.series.forEach(t=>{t.update({point:{events:{mouseOver:void 0,mouseOut:void 0}}},!1)}),t.redraw())}},seriesVisibilityEmitter:function(){if("Highcharts"!==this.type)return;let{chart:t,connector:e,board:i}=this;if(!i||!t)return;let s=e?.table;if(s){let{dataCursor:e}=i,{series:o}=t;o.forEach(t=>{t.update({events:{show:function(){e.emitCursor(s,{type:"position",state:"series.show",column:this.name})},hide:function(){e.emitCursor(s,{type:"position",state:"series.hide",column:this.name})}}},!1)}),t.redraw()}return function(){t&&(t.series.forEach(t=>{t.update({events:{show:void 0,hide:void 0}},!1)}),t.redraw())}},extremesEmitter:function(){if("Highcharts"===this.type){let t=[],{chart:i,connector:s,board:o}=this,n=s&&s.table,{dataCursor:r}=o;if(n&&i){let s=t=>{let e=!!t.resetSelection;if((!t.trigger||t.trigger&&"dashboards-sync"!==t.trigger)&&!e){let e=t.target,i=e.series.filter(t=>n.hasColumns([t.name])),[s]=i.length?i:e.series;if(s){let o=s.points.filter(t=>t.isInside||!1),a={type:"position",state:`${e.coll}.extremes.min`},l={type:"position",state:`${e.coll}.extremes.max`};if(i.length&&"xAxis"===e.coll&&o.length){let t=e.dateTime&&n.hasColumns(["x"])?"x":s.name;a.row=o[0].index,a.column=t,l.row=o[o.length-1].index,l.column=t}r.emitCursor(n,a,t,!0).emitCursor(n,l,t,!0)}}},o=()=>i.axes.map(t=>e(t,"afterSetExtremes",s)),a=o(),l=()=>{a.forEach(t=>{t()}),a=[]};t.push(e(i,"selection",t=>{t.resetSelection&&(l(),r.emitCursor(n,{type:"position",state:"chart.zoomOut"},t),a.push(...o()))})),t.push(()=>{r.remitCursor(n.id,{type:"position",state:"xAxis.extremes.min"}),r.remitCursor(n.id,{type:"position",state:"xAxis.extremes.max"}),l()})}return function(){t.forEach(t=>{t()})}}}},handlers:{seriesVisibilityHandler:function(){let t=this,{board:e}=this,i=(t,e)=>{for(let i of t)if(i.name===e)return i},s=e=>{let s=t.chart;if(s&&"position"===e.cursor.type&&void 0!==e.cursor.column){let t=i(s.series,e.cursor.column);t&&t.setVisible(!0,!0)}},o=e=>{let s=t.chart;if(s&&"position"===e.cursor.type&&void 0!==e.cursor.column){let t=i(s.series,e.cursor.column);t&&t.setVisible(!1,!0)}};if(e)return(()=>{let{dataCursor:t}=e;if(!t)return;let i=this.connector&&this.connector.table;i&&(t.addListener(i.id,"series.show",s),t.addListener(i.id,"series.hide",o))})(),()=>{let t=this.connector&&this.connector.table;t&&(e.dataCursor.removeListener(t.id,"series.show",s),e.dataCursor.removeListener(t.id,"series.hide",o))}},highlightHandler:function(){let{chart:t,board:e}=this,s=e=>{let s=this.connector&&this.connector.table;if(!s)return;let o=0,n=s.getModifier();if(n&&"Range"===n.options.type&&(o=i(s,n.options)),t&&t.series.length){let i=e.cursor;if("position"===i.type){let[e]=t.series;if(t.series.length>1&&i.column){let s=t.series.filter(t=>t.name===i.column);s.length>0&&([e]=s)}if(e?.visible&&void 0!==i.row){let t=e.data[i.row-o];if(t?.graphic)return t}}}},o=e=>{let i=this.sync.syncConfig.highlight;if(!i.enabled)return;let o=s(e);if(!o||!t||!o.isInside&&!o.series.is("pie")||o===t.hoverPoint)return;let n=t.tooltip;if(n&&i.showTooltip){let e=n.shared,i=t.hoverPoint,s=i?.series||t.hoverSeries,r=t.pointer?.getHoverData(o,s,t.series,!0,!0);t.tooltip&&r&&n.refresh(e?r.hoverPoints:o)}i.highlightPoint&&(!n?.shared&&i.showTooltip||!i.showTooltip)&&o.setState("hover"),i.showCrosshair&&(o.series.xAxis?.drawCrosshair(void 0,o),o.series.yAxis?.drawCrosshair(void 0,o))},n=e=>{let i=this.sync.syncConfig.highlight;if(!t||!t.series.length||!i.enabled)return;let o=s(e);if(o&&(!o.isInside||o===t.hoverPoint))return;let n=!1,r=()=>{let e=t.series.length;for(let i=0;i<e;i++){let e=t.series[i].points,s=e.length;for(let t=0;t<s;t++)e[t].setState()}},a=t.tooltip;if(a&&i.showTooltip&&(a.hide(),a.shared&&(r(),n=!0)),i.highlightPoint&&!n&&(o?o.setState():r()),i.showCrosshair){if(o)o.series.xAxis?.drawCrosshair(),o.series.yAxis?.drawCrosshair();else{let e=t.xAxis,i=t.yAxis;for(let t=0,i=e.length;t<i;t++)e[t].drawCrosshair();for(let t=0,e=i.length;t<e;t++)i[t].drawCrosshair()}}};if(e)return(()=>{let{dataCursor:t}=e;if(t){let e=this.connector&&this.connector.table;e&&(t.addListener(e.id,"point.mouseOver",o),t.addListener(e.id,"dataGrid.hoverRow",o),t.addListener(e.id,"point.mouseOut",n),t.addListener(e.id,"dataGrid.hoverOut",n))}})(),()=>{let t=this.connector&&this.connector.table;t&&(e.dataCursor.removeListener(t.id,"point.mouseOver",o),e.dataCursor.removeListener(t.id,"dataGrid.hoverRow",o),e.dataCursor.removeListener(t.id,"point.mouseOut",n),e.dataCursor.removeListener(t.id,"dataGrid.hoverOut",n))}},extremesHandler:function(){let{chart:t,board:e}=this;if(t&&e&&t.zooming?.type){let i=t.zooming.type.split("").map(t=>t+"Axis"),s=[];return i.forEach(i=>{let o=e=>{let{cursor:s,event:o}=e;if("position"===s.type){let e=o&&o.target;if(e&&t){let s=t[i],o=!1;s.forEach(t=>{e.coll===t.coll&&e!==t&&null!==e.min&&null!==e.max&&(t.max!==e.max||t.min!==e.min)&&(t.setExtremes(e.min,e.max,!1,void 0,{trigger:"dashboards-sync"}),o=!0)}),o&&!t.resetZoomButton&&t.showResetZoom(),t.redraw()}}};e&&(()=>{let{dataCursor:n}=e,{connector:r}=this;if(r){let{table:e}=r;n.addListener(e.id,`${i}.extremes.min`,o),n.addListener(e.id,`${i}.extremes.max`,o);let a=()=>{t.zoomOut(),setTimeout(()=>{this.element.querySelectorAll(".highcharts-reset-zoom").forEach(t=>{t.remove()})})};n.addListener(e.id,"chart.zoomOut",a),s.push(()=>{n.removeListener(e.id,`${i}.extremes.min`,o),n.removeListener(e.id,`${i}.extremes.max`,o),n.removeListener(e.id,"chart.zoomOut",a)})}})()}),function(){s.forEach(t=>{t()})}}}}};return{extremes:{emitter:s.emitters.extremesEmitter,handler:s.handlers.extremesHandler},highlight:{emitter:s.emitters.highlightEmitter,handler:s.handlers.highlightHandler},visibility:{emitter:s.emitters.seriesVisibilityEmitter,handler:s.handlers.seriesVisibilityHandler}}}),i(e,"Dashboards/Plugins/HighchartsComponent/HighchartsComponentDefaults.js",[e["Dashboards/Components/Component.js"],e["Dashboards/Plugins/HighchartsComponent/HighchartsSyncHandlers.js"],e["Core/Utilities.js"]],function(t,e,i){let{merge:s,uniqueKey:o}=i;return{allowConnectorUpdate:!0,className:[t.defaultOptions.className,`${t.defaultOptions.className}-highcharts`].join(" "),chartClassName:"chart-container",chartID:"chart-"+o(),chartOptions:{chart:{styledMode:!0},series:[]},chartConstructor:"chart",editableOptions:(t.defaultOptions.editableOptions||[]).concat([{name:"chartOptions",type:"nested",nestedOptions:[{name:"chart",options:[{name:"title",propertyPath:["chartOptions","title","text"],type:"input"},{name:"subtitle",propertyPath:["chartOptions","subtitle","text"],type:"input"},{name:"type",propertyPath:["chartOptions","chart","type"],type:"select",selectOptions:[{name:"column",iconURL:"series-types/icon-column.svg"},{name:"line",iconURL:"series-types/icon-line.svg"},{name:"scatter",iconURL:"series-types/icon-scatter.svg"},{name:"pie",iconURL:"series-types/icon-pie.svg"}]}]},{name:"xAxis",options:[{name:"title",propertyPath:["chartOptions","xAxis","title","text"],type:"input"},{name:"type",propertyPath:["chartOptions","xAxis","type"],type:"select",selectOptions:[{name:"linear"},{name:"datetime"},{name:"logarithmic"}]}]},{name:"yAxis",options:[{name:"title",propertyPath:["chartOptions","yAxis","title","text"],type:"input"},{name:"type",propertyPath:["chartOptions","yAxis","type"],type:"select",selectOptions:[{name:"linear"},{name:"datetime"},{name:"logarithmic"}]}]},{name:"legend",showToggle:!0,propertyPath:["chartOptions","legend","enabled"],options:[{name:"align",propertyPath:["chartOptions","legend","align"],type:"select",selectOptions:[{name:"left"},{name:"center"},{name:"right"}]}]},{name:"tooltip",showToggle:!0,propertyPath:["chartOptions","tooltip","enabled"],options:[{name:"split",propertyPath:["chartOptions","tooltip","split"],type:"toggle"}]},{name:"dataLabels",propertyPath:["chartOptions","plotOptions","series","dataLabels","enabled"],showToggle:!0,options:[{name:"align",propertyPath:["chartOptions","plotOptions","series","dataLabels","align"],type:"select",selectOptions:[{name:"left"},{name:"center"},{name:"right"}]}]},{name:"credits",showToggle:!0,propertyPath:["chartOptions","credits","enabled"],options:[{name:"name",propertyPath:["chartOptions","credits","text"],type:"input"},{name:"url",propertyPath:["chartOptions","credits","href"],type:"input"}]}]},{name:"chartConfig",propertyPath:["chartOptions"],type:"textarea"},{name:"chartClassName",propertyPath:["chartClassName"],type:"input"},{name:"chartID",propertyPath:["chartID"],type:"input"}]),syncHandlers:e,editableOptionsBindings:s(t.defaultOptions.editableOptionsBindings,{skipRedraw:["chartOptions","chartConfig"]}),columnAssignment:void 0}}),i(e,"Dashboards/Plugins/HighchartsComponent/HighchartsComponent.js",[e["Dashboards/Components/Component.js"],e["Data/Converters/DataConverter.js"],e["Data/DataTable.js"],e["Dashboards/Globals.js"],e["Dashboards/Plugins/HighchartsComponent/HighchartsSyncHandlers.js"],e["Dashboards/Plugins/HighchartsComponent/HighchartsComponentDefaults.js"],e["Core/Utilities.js"]],function(t,e,i,s,o,n,r){let{addEvent:a,createElement:l,diffObjects:h,isString:d,merge:c,splat:u,isObject:p}=r;class m extends t{static fromJSON(t,e){let i=new m(e,c(t.options,{chartOptions:JSON.parse(t.options.chartOptions||"{}"),syncHandlers:m.syncHandlers}));return i.emit({type:"fromJSON",json:t}),i}constructor(t,e,i){super(t,e=c(m.defaultOptions,e),i),this.options=e,this.chartConstructor=this.options.chartConstructor||"chart",this.type="Highcharts",this.chartContainer=l("figure",void 0,void 0,this.contentElement,!0),this.setOptions(),this.sync=new m.Sync(this,this.syncHandlers),this.chartOptions=c(this.options.chartOptions||{chart:{}},{tooltip:{}}),this.connector&&this.connector.on("afterLoad",t=>{t.table&&this.connector&&this.connector.table.setColumns(t.table.getColumns())}),this.innerResizeTimeouts=[]}onTableChanged(){this.updateSeries()}async load(){return this.emit({type:"load"}),await super.load(),this.emit({type:"afterLoad"}),this}render(){return super.render(),this.chart=this.getChart(),this.updateSeries(),this.cell?.container?.style.height||(this.contentElement.style.height="100%",super.resize(null,null)),this.sync.start(),this.emit({type:"afterRender"}),this.setupConnectorUpdate(),this}resize(t,e){for(super.resize(t,e);this.innerResizeTimeouts.length;){let t=this.innerResizeTimeouts.pop();t&&clearTimeout(t)}return this.innerResizeTimeouts.push(setTimeout(()=>{this.chart&&this.chart.container&&this.chart.setSize(null,this.contentElement.clientHeight,!1)},33)),this}setupConnectorUpdate(){let{connector:t,chart:e}=this;t&&e&&this.options.allowConnectorUpdate&&e.series.forEach(e=>{e.points.forEach(e=>{a(e,"drag",()=>{this.onChartUpdate(e,t)})})})}setOptions(){this.options.chartClassName&&this.chartContainer.classList.add(this.options.chartClassName),this.options.chartID&&(this.chartContainer.id=this.options.chartID)}onChartUpdate(t,i){let s=i.table,o=t.series.name,n=t.index,r=new e().asNumber(t.y);s.setCell(o,n,r)}async update(t,e=!0){await super.update(t,!1),this.setOptions(),this.filterAndAssignSyncOptions(o),this.chart&&this.chart.update(c(this.options.chartOptions)||{}),this.emit({type:"afterUpdate"}),e&&this.render()}updateSeries(){if(this.chart&&this.connector){this.presentationTable=this.presentationModifier?this.connector.table.modified.clone():this.connector.table;let{id:t}=this.connector.table,{chart:e}=this;this.presentationModifier&&(this.presentationTable=this.presentationModifier.modifyTable(this.presentationTable).modified);let s=this.presentationTable,o=s.getModifier()?.options,n=s.modified.getColumnNames(),r=this.options.columnAssignment||this.getDefaultColumnAssignment(n),a={};this.emit({type:"afterPresentationModifier",table:s});let l=s.modified.getColumnNames().filter(t=>(!this.activeGroup||!1!==this.activeGroup.getSharedState().getColumnVisibility(t))&&!!r[t]&&("x"!==r[t]||(a[t]=t,!1)));Object.keys(r).forEach(function(t){p(r[t])&&l.push(t)}),l.map((i,s)=>{let n=0;for(;n<e.series.length;){let i=e.series[n],o=i.options.id===`${t}-series-${s}`,r=-1!==l.indexOf(i.name);if(n++,r&&o)return i;!r&&o&&i.destroy()}let r=!(o?.type==="Math"&&o.columnFormulas?.some(t=>t.column===i)),a={name:i,id:`${t}-series-${s}`,dragDrop:{draggableY:r}},h=e.series.find(t=>t.name===i);return h?(h.update(a,!1),h):e.addSeries(a,!1)}).forEach(t=>{let e=Object.keys(a)[0],o=p(r[t.name]),n=[];if(o){let e=r[t.name];Object.keys(e).forEach(t=>{n.push(e[t])})}let l=o?[e].concat(n):[e,t.name],h=new i({columns:s.modified.getColumns(l)});o||h.renameColumn(t.name,"y"),e&&h.renameColumn(e,"x");let d=h.getRowObjects().reduce((t,e)=>(o?t.push([e.x].concat(n.map(function(t){return e[t]}))):t.push([e.x,e.y]),t),[]);t.setData(d,!1)}),this.chart.redraw()}}getChart(){return this.chart||this.createChart()}destroy(){this.chart?.destroy(),super.destroy()}getDefaultColumnAssignment(t=[]){let e={};for(let i=0,s=t.length;i<s;++i)if(e[t[i]]="y",0===i){let s=this.presentationTable?.getColumn(t[i],!0);s&&d(s[0])&&(e[t[i]]="x")}return e}createChart(){let t=m.charter||s.win.Highcharts;this.chartConstructor||(this.chartConstructor="chart");let e=t[this.chartConstructor];if(e)try{if("chart"===this.chartConstructor)return t.Chart.chart(this.chartContainer,this.chartOptions);return new e(this.chartContainer,this.chartOptions)}catch{throw Error("The Highcharts component is misconfigured: `"+this.cell.id+"`")}if("function"!=typeof t.chart)throw Error("Chart constructor not found");return this.chart}registerChartEvents(){if(this.chart&&this.chart.options){let t=this.chart.options;["chart","series","yAxis","xAxis","colorAxis","annotations","navigation"].map(e=>{let i=t[e]||{};return!Array.isArray(i)&&i.events&&(i=[i]),i&&"object"==typeof i&&Array.isArray(i)&&i.reduce((t,i,s)=>(i&&i.events&&(t[i.id||`${e}-${s}`]=i.events),t),{})||{}}).forEach(t=>{Object.keys(t).forEach(e=>{let i=t[e];Object.keys(i).forEach(t=>{this.callbackRegistry.addCallback(`${e}-${t}`,{type:"seriesEvent",func:i[t]})})})})}}setConnector(t){let e=this.chart;if(this.connector&&e&&e.series&&this.connector.table.id!==t?.table.id){let t=this.connector.table.id;for(let i=e.series.length-1;i>=0;i--){let s=e.series[i];s.options.id?.indexOf(t)!==-1&&s.remove(!1)}}return super.setConnector(t),this}getOptionsOnDrop(t){let e=t.editMode.board.dataPool.getConnectorIds(),i={cell:"",type:"Highcharts",chartOptions:{chart:{animation:!1,type:"column",zooming:{}}}};return e.length&&(i={...i,connector:{id:e[0]}}),i}toJSON(){let t=JSON.stringify(this.options.chartOptions),e=this.options.chartConstructor||"chart";this.registerChartEvents();let i=super.toJSON(),s={...i,type:"Highcharts",options:{...i.options,chartOptions:t,chartConstructor:e,type:"Highcharts",sync:{}}};return this.emit({type:"toJSON",json:s}),s}getOptions(){return{...h(this.options,m.defaultOptions),type:"Highcharts"}}getEditableOptions(){let t=this.options,e=this.chart,i=e&&e.options,s=i&&i.chart?.type||"line";return c(t,{chartOptions:i},{chartOptions:{yAxis:u(e&&e.yAxis[0].options),xAxis:u(e&&e.xAxis[0].options),plotOptions:{series:(i&&i.plotOptions||{})[s]}}})}getEditableOptionValue(t){return t?1===t.length&&"chartOptions"===t[0]?JSON.stringify(this.options.chartOptions,null,2):super.getEditableOptionValue.call(this,t):void 0}}return m.syncHandlers=o,m.defaultOptions=c(t.defaultOptions,n),m}),i(e,"Dashboards/Plugins/KPIComponent/KPISyncHandlers.js",[e["Core/Utilities.js"]],function(t){let{defined:e}=t;return{extremes:{handler:({emitters:{},handlers:{extremesHandler:function(){let{board:t}=this,i=t=>{let i=t.cursor;if("position"===i.type&&"number"==typeof i?.row&&e(i.column)&&this.connector&&!e(this.options.value)){let t=this.connector.table.modified.getCellAsString(i.column,i.row);this.setValue(t)}};if(t)return(()=>{let{dataCursor:e}=t;if(!e)return;let s=this.connector&&this.connector.table;s&&e.addListener(s.id,"xAxis.extremes.max",i)})(),()=>{let e=this.connector&&this.connector.table,{dataCursor:s}=t;e&&s.removeListener(e.id,"xAxis.extremes.max",i)}}}}).handlers.extremesHandler}}}),i(e,"Dashboards/Plugins/KPIComponent/KPIComponentDefaults.js",[e["Dashboards/Components/Component.js"],e["Dashboards/Plugins/KPIComponent/KPISyncHandlers.js"]],function(t,e){return{type:"KPI",className:[t.defaultOptions.className,`${t.defaultOptions.className}-kpi`].join(" "),minFontSize:20,syncHandlers:e,thresholdColors:["#f45b5b","#90ed7d"],editableOptions:(t.defaultOptions.editableOptions||[]).concat([{name:"Value",type:"input",propertyPath:["value"]},{name:"Column name",type:"input",propertyPath:["columnName"]},{name:"Value format",type:"input",propertyPath:["valueFormat"]}]),linkedValueTo:{enabled:!0,seriesIndex:0,pointIndex:0}}}),i(e,"Core/Chart/ChartDefaults.js",[],function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}}),i(e,"Core/Color/Palettes.js",[],function(){return{colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"]}}),i(e,"Core/Time.js",[e["Core/Globals.js"],e["Core/Utilities.js"]],function(t,e){let{win:i}=t,{defined:s,error:o,extend:n,isNumber:r,isObject:a,merge:l,objectEach:h,pad:d,pick:c,splat:u,timeUnits:p}=e,m=t.isSafari&&i.Intl&&i.Intl.DateTimeFormat.prototype.formatRange,f=t.isSafari&&i.Intl&&!i.Intl.DateTimeFormat.prototype.formatRange;return class{constructor(t){this.options={},this.useUTC=!1,this.variableTimezone=!1,this.Date=i.Date,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.update(t)}get(t,e){if(this.variableTimezone||this.timezoneOffset){let i=e.getTime(),s=i-this.getTimezoneOffset(e);e.setTime(s);let o=e["getUTC"+t]();return e.setTime(i),o}return this.useUTC?e["getUTC"+t]():e["get"+t]()}set(t,e,i){if(this.variableTimezone||this.timezoneOffset){if("Milliseconds"===t||"Seconds"===t||"Minutes"===t&&this.getTimezoneOffset(e)%36e5==0)return e["setUTC"+t](i);let s=this.getTimezoneOffset(e),o=e.getTime()-s;e.setTime(o),e["setUTC"+t](i);let n=this.getTimezoneOffset(e);return o=e.getTime()+n,e.setTime(o)}return this.useUTC||m&&"FullYear"===t?e["setUTC"+t](i):e["set"+t](i)}update(t={}){let e=c(t.useUTC,!0);this.options=t=l(!0,this.options,t),this.Date=t.Date||i.Date||Date,this.useUTC=e,this.timezoneOffset=e&&t.timezoneOffset||void 0,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.variableTimezone=e&&!!(t.getTimezoneOffset||t.timezone)}makeTime(t,e,i,s,o,n){let r,a,l;return this.useUTC?(r=this.Date.UTC.apply(0,arguments),a=this.getTimezoneOffset(r),r+=a,a!==(l=this.getTimezoneOffset(r))?r+=l-a:a-36e5!==this.getTimezoneOffset(r-36e5)||f||(r-=36e5)):r=new this.Date(t,e,c(i,1),c(s,0),c(o,0),c(n,0)).getTime(),r}timezoneOffsetFunction(){let t=this,e=this.options,i=e.getTimezoneOffset;return this.useUTC?e.timezone?t=>{try{let[i,s,o,n,a=0]=Intl.DateTimeFormat("en",{timeZone:e.timezone,timeZoneName:"shortOffset"}).format(t).split(/(GMT|:)/).map(Number),l=-(36e5*(o+a/60));if(r(l))return l}catch(t){o(34)}return 0}:this.useUTC&&i?t=>6e4*i(t.valueOf()):()=>6e4*(t.timezoneOffset||0):t=>6e4*new Date(t.toString()).getTimezoneOffset()}dateFormat(e,i,o){if(!s(i)||isNaN(i))return t.defaultOptions.lang&&t.defaultOptions.lang.invalidDate||"";e=c(e,"%Y-%m-%d %H:%M:%S");let r=this,a=new this.Date(i),l=this.get("Hours",a),u=this.get("Day",a),p=this.get("Date",a),m=this.get("Month",a),f=this.get("FullYear",a),g=t.defaultOptions.lang,y=g&&g.weekdays,b=g&&g.shortWeekdays;return h(n({a:b?b[u]:y[u].substr(0,3),A:y[u],d:d(p),e:d(p,2," "),w:u,b:g.shortMonths[m],B:g.months[m],m:d(m+1),o:m+1,y:f.toString().substr(2,2),Y:f,H:d(l),k:l,I:d(l%12||12),l:l%12||12,M:d(this.get("Minutes",a)),p:l<12?"AM":"PM",P:l<12?"am":"pm",S:d(this.get("Seconds",a)),L:d(Math.floor(i%1e3),3)},t.dateFormats),function(t,s){for(;-1!==e.indexOf("%"+s);)e=e.replace("%"+s,"function"==typeof t?t.call(r,i):t)}),o?e.substr(0,1).toUpperCase()+e.substr(1):e}resolveDTLFormat(t){return a(t,!0)?t:{main:(t=u(t))[0],from:t[1],to:t[2]}}getTimeTicks(t,e,i,o){let r,a,l,h;let d=this,u=d.Date,m=[],f={},g=new u(e),y=t.unitRange,b=t.count||1;if(o=c(o,1),s(e)){d.set("Milliseconds",g,y>=p.second?0:b*Math.floor(d.get("Milliseconds",g)/b)),y>=p.second&&d.set("Seconds",g,y>=p.minute?0:b*Math.floor(d.get("Seconds",g)/b)),y>=p.minute&&d.set("Minutes",g,y>=p.hour?0:b*Math.floor(d.get("Minutes",g)/b)),y>=p.hour&&d.set("Hours",g,y>=p.day?0:b*Math.floor(d.get("Hours",g)/b)),y>=p.day&&d.set("Date",g,y>=p.month?1:Math.max(1,b*Math.floor(d.get("Date",g)/b))),y>=p.month&&(d.set("Month",g,y>=p.year?0:b*Math.floor(d.get("Month",g)/b)),a=d.get("FullYear",g)),y>=p.year&&(a-=a%b,d.set("FullYear",g,a)),y===p.week&&(h=d.get("Day",g),d.set("Date",g,d.get("Date",g)-h+o+(h<o?-7:0))),a=d.get("FullYear",g);let t=d.get("Month",g),n=d.get("Date",g),c=d.get("Hours",g);e=g.getTime(),(d.variableTimezone||!d.useUTC)&&s(i)&&(l=i-e>4*p.month||d.getTimezoneOffset(e)!==d.getTimezoneOffset(i));let u=g.getTime();for(r=1;u<i;)m.push(u),y===p.year?u=d.makeTime(a+r*b,0):y===p.month?u=d.makeTime(a,t+r*b):l&&(y===p.day||y===p.week)?u=d.makeTime(a,t,n+r*b*(y===p.day?1:7)):l&&y===p.hour&&b>1?u=d.makeTime(a,t,n,c+r*b):u+=y*b,r++;m.push(u),y<=p.hour&&m.length<1e4&&m.forEach(function(t){t%18e5==0&&"000000000"===d.dateFormat("%H%M%S%L",t)&&(f[t]="day")})}return m.info=n(t,{higherRanks:f,totalRange:y*b}),m}getDateFormat(t,e,i,s){let o=this.dateFormat("%m-%d %H:%M:%S.%L",e),n="01-01 00:00:00.000",r={millisecond:15,second:12,minute:9,hour:6,day:3},a="millisecond",l=a;for(a in p){if(t===p.week&&+this.dateFormat("%w",e)===i&&o.substr(6)===n.substr(6)){a="week";break}if(p[a]>t){a=l;break}if(r[a]&&o.substr(r[a])!==n.substr(r[a]))break;"week"!==a&&(l=a)}return this.resolveDTLFormat(s[a]).main}}}),i(e,"Core/Defaults.js",[e["Core/Chart/ChartDefaults.js"],e["Core/Globals.js"],e["Core/Color/Palettes.js"],e["Core/Time.js"],e["Core/Utilities.js"]],function(t,e,i,s,o){let{isTouchDevice:n,svg:r}=e,{merge:a}=o,l={colors:i.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:t,title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:"",align:"center",widthAdjust:-44},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:r,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %e %b, %H:%M:%S.%L",second:"%A, %e %b, %H:%M:%S",minute:"%A, %e %b, %H:%M",hour:"%A, %e %b, %H:%M",day:"%A, %e %b %Y",week:"Week from %A, %e %b %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:n?25:10,headerFormat:'<span style="font-size: 0.8em">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}};l.chart.styledMode=!1;let h=new s(l.time);return{defaultOptions:l,defaultTime:h,getOptions:function(){return l},setOptions:function(t){return a(!0,l,t),(t.time||t.global)&&(e.time?e.time.update(a(l.global,l.time,t.global,t.time)):e.time=h),l}}}),i(e,"Core/Templating.js",[e["Core/Defaults.js"],e["Core/Utilities.js"]],function(t,e){let{defaultOptions:i,defaultTime:s}=t,{extend:o,getNestedProperty:n,isArray:r,isNumber:a,isObject:l,pick:h,pInt:d}=e,c={add:(t,e)=>t+e,divide:(t,e)=>0!==e?t/e:"",eq:(t,e)=>t==e,each:function(t){let e=arguments[arguments.length-1];return!!r(t)&&t.map((i,s)=>u(e.body,o(l(i)?i:{"@this":i},{"@index":s,"@first":0===s,"@last":s===t.length-1}))).join("")},ge:(t,e)=>t>=e,gt:(t,e)=>t>e,if:t=>!!t,le:(t,e)=>t<=e,lt:(t,e)=>t<e,multiply:(t,e)=>t*e,ne:(t,e)=>t!=e,subtract:(t,e)=>t-e,unless:t=>!t};function u(t="",e,o){let r=/\{([a-zA-Z0-9\:\.\,;\-\/<>%_@"'= #\(\)]+)\}/g,a=/\(([a-zA-Z0-9\:\.\,;\-\/<>%_@"'= ]+)\)/g,l=[],d=/f$/,m=/\.([0-9])/,f=i.lang,g=o&&o.time||s,y=o&&o.numberFormatter||p,b=(t="")=>{let i;return"true"===t||"false"!==t&&((i=Number(t)).toString()===t?i:n(t,e))},C,w,O=0,v;for(;null!==(C=r.exec(t));){let i=a.exec(C[1]);i&&(C=i,v=!0),w&&w.isBlock||(w={ctx:e,expression:C[1],find:C[0],isBlock:"#"===C[1].charAt(0),start:C.index,startInner:C.index+C[0].length,length:C[0].length});let s=C[1].split(" ")[0].replace("#","");c[s]&&(w.isBlock&&s===w.fn&&O++,w.fn||(w.fn=s));let o="else"===C[1];if(w.isBlock&&w.fn&&(C[1]===`/${w.fn}`||o)){if(O)!o&&O--;else{let e=w.startInner,i=t.substr(e,C.index-e);void 0===w.body?(w.body=i,w.startInner=C.index+C[0].length):w.elseBody=i,w.find+=i+C[0],o||(l.push(w),w=void 0)}}else w.isBlock||l.push(w);if(i&&!w?.isBlock)break}return l.forEach(i=>{let s,o;let{body:n,elseBody:r,expression:a,fn:l}=i;if(l){let t=[i],h=a.split(" ");for(o=c[l].length;o--;)t.unshift(b(h[o+1]));s=c[l].apply(e,t),i.isBlock&&"boolean"==typeof s&&(s=u(s?n:r,e))}else{let t=a.split(":");if(s=b(t.shift()||""),t.length&&"number"==typeof s){let e=t.join(":");if(d.test(e)){let t=parseInt((e.match(m)||["","-1"])[1],10);null!==s&&(s=y(s,t,f.decimalPoint,e.indexOf(",")>-1?f.thousandsSep:""))}else s=g.dateFormat(e,s)}}t=t.replace(i.find,h(s,""))}),v?u(t,e,o):t}function p(t,e,s,o){let n,r;t=+t||0,e=+e;let l=i.lang,c=(t.toString().split(".")[1]||"").split("e")[0].length,u=t.toString().split("e"),p=e;-1===e?e=Math.min(c,20):a(e)?e&&u[1]&&u[1]<0&&((r=e+ +u[1])>=0?(u[0]=(+u[0]).toExponential(r).split("e")[0],e=r):(u[0]=u[0].split(".")[0]||0,t=e<20?(u[0]*Math.pow(10,u[1])).toFixed(e):0,u[1]=0)):e=2;let m=(Math.abs(u[1]?u[0]:t)+Math.pow(10,-Math.max(e,c)-1)).toFixed(e),f=String(d(m)),g=f.length>3?f.length%3:0;return s=h(s,l.decimalPoint),o=h(o,l.thousandsSep),n=(t<0?"-":"")+(g?f.substr(0,g)+o:""),0>+u[1]&&!p?n="0":n+=f.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+o),e&&(n+=s+m.slice(-e)),u[1]&&0!=+n&&(n+="e"+u[1]),n}return{dateFormat:function(t,e,i){return s.dateFormat(t,e,i)},format:u,helpers:c,numberFormat:p}}),i(e,"Dashboards/Plugins/KPIComponent/KPIComponent.js",[e["Core/Renderer/HTML/AST.js"],e["Dashboards/Components/Component.js"],e["Dashboards/Plugins/KPIComponent/KPISyncHandlers.js"],e["Dashboards/Plugins/KPIComponent/KPIComponentDefaults.js"],e["Core/Templating.js"],e["Core/Utilities.js"]],function(t,e,i,s,o,n){let{format:r}=o,{createElement:a,css:l,defined:h,diffObjects:d,isArray:c,isNumber:u,merge:p}=n;class m extends e{static fromJSON(t,e){let i=t.options,s=i.chartOptions&&JSON.parse(i.chartOptions),o=JSON.parse(i.subtitle||"{}"),n=i.title&&JSON.parse(i.title);return new m(e,p(i,{chartOptions:s,title:n,subtitle:o}))}constructor(t,e,i){super(t,e=p(m.defaultOptions,e),i),this.options=e,this.type="KPI",this.sync=new m.Sync(this,this.syncHandlers),this.value=a("span",{className:`${e.className}-value`},{},this.contentElement),this.subtitle=a("span",{className:this.getSubtitleClassName()},{},this.contentElement)}async load(){return await super.load(),this.linkValueToChart(),this}resize(t,e){return super.resize(t,e),this.chart&&this.chart.container&&this.chart.reflow(),this}render(){super.render(),this.updateElements();let t=m.charter?.Chart;return t&&this.options.chartOptions&&!this.chart?(this.chartContainer||(this.chartContainer=a("div",{className:`${this.options.className}-chart-container`},{height:"100%"},this.contentElement),this.cell?.container?.style.height||(this.contentElement.style.height="100%",super.resize(null,null))),this.chart=t.chart(this.chartContainer,p(m.defaultChartOptions,this.options.chartOptions))):this.chart&&!this.options.chartOptions&&"chartOptions"in this.options&&(this.chart.destroy(),this.chart=void 0),this.sync.start(),this.emit({type:"afterRender"}),this}setOptions(){this.filterAndAssignSyncOptions(i)}async update(t,e=!0){await super.update(t),this.setOptions(),t.chartOptions&&this.chart&&this.chart.update(t.chartOptions),e&&this.render()}onTableChanged(){this.setValue()}destroy(){this.chart?.destroy(),super.destroy()}getValue(){if(h(this.options.value))return this.options.value;if(this.connector&&this.options.columnName){let t=this.connector?.table.modified,e=t.getColumn(this.options.columnName),i=e?.length||0;return t.getCellAsString(this.options.columnName,i-1)}}setValue(e=this.getValue()){let{valueFormat:i,valueFormatter:s}=this.options;if(h(e)){let o;u(+e)&&(o=+e),s?e=s.call(this,e):i?e=r(i,{value:e}):u(e)&&(e=e.toLocaleString()),t.setElementHTML(this.value,""+e),this.linkValueToChart(o),this.prevValue=o}}linkValueToChart(t=this.getValue()){let e=this.chart,i=this.options.linkedValueTo;if(!e||!i.enabled||!h(t)||!u(+t))return;t=+t;let s=e.series[i.seriesIndex??0],o=s?.points[i.pointIndex??0];if(s){if(o){o.update({y:t});return}s.addPoint({y:t});return}e.addSeries({data:[{y:t}]})}updateElements(){let{style:e,subtitle:i}=this.options;this.setValue(),t.setElementHTML(this.subtitle,this.getSubtitle()),e&&l(this.element,e),"object"==typeof i&&(i.style&&l(this.subtitle,i.style),this.subtitle.className=this.getSubtitleClassName()),this.chartContainer&&(this.chartContainer.style.flex=this.options.chartOptions?"1":"0"),this.chart&&this.chart.reflow(),this.value.style.color=this.getValueColor()}getSubtitle(){let{subtitle:t,value:e}=this.options;if("string"==typeof t)return t;if(t){if(u(this.prevValue)&&u(e)){let i=e-this.prevValue,s="";if(i>0)s='<span style="color:green">&#9650;</span> +';else{if(!(i<0))return this.subtitle.innerHTML;s='<span style="color:red">&#9660;</span> '}if("diff"===t.type)return s+i.toLocaleString();if("diffpercent"===t.type)return s+r("{v:,.2f}%",{v:i/this.prevValue*100})}return t.text||""}return""}getSubtitleClassName(){let{subtitle:t}=this.options;return`${e.defaultOptions.className}-subtitle`+("object"==typeof t&&t.className||"")}getValueColor(){let{threshold:t,thresholdColors:e,value:i}=this.options;if(e&&t&&u(i)){if(c(t)){for(let s=t.length-1;s>=0;s--)if(i>=t[s]){if(s+1<e.length)return e[s+1];return e[e.length-1]}}else if(i>=t)return e[1];return e[0]}return""}getOptionsOnDrop(t){let e=t.editMode.board.dataPool.getConnectorIds(),i={cell:"",type:"KPI"};return e.length&&(i={...i,connector:{id:e[0]}}),i}toJSON(){let t=super.toJSON(),e={...t,type:"KPI",options:{...t.options,type:"KPI",value:this.options.value,subtitle:JSON.stringify(this.options.subtitle),title:JSON.stringify(this.options.title),threshold:this.options.threshold,thresholdColors:this.options.thresholdColors,chartOptions:JSON.stringify(this.options.chartOptions),valueFormat:this.options.valueFormat}};return this.emit({type:"toJSON",json:t}),e}getOptions(){return{...d(this.options,m.defaultOptions),type:"KPI"}}}return m.defaultOptions=p(e.defaultOptions,s),m.syncHandlers=i,m.defaultChartOptions={chart:{type:"spline",styledMode:!0,zooming:{mouseWheel:{enabled:!1}}},title:{text:void 0},xAxis:{visible:!1},yAxis:{visible:!1,title:{text:null}},legend:{enabled:!1},credits:{enabled:!1},tooltip:{outside:!0},plotOptions:{series:{marker:{enabled:!1}}}},m}),i(e,"Dashboards/Plugins/NavigatorComponent/NavigatorComponentDefaults.js",[e["Dashboards/Components/Component.js"]],function(t){return{type:"Navigator",chartOptions:{chart:{animation:!1,height:200,styledMode:!0,type:"column",zooming:{mouseWheel:{enabled:!1}}},credits:{enabled:!1},legend:{enabled:!1},navigator:{enabled:!0,outlineWidth:0,series:{animation:!1,lineWidth:0},xAxis:{endOnTick:!0,gridZIndex:4,labels:{x:1,y:22},opposite:!0,showFirstLabel:!0,showLastLabel:!0,startOnTick:!0,tickPosition:"inside"},yAxis:{maxPadding:.5}},plotOptions:{series:{borderRadius:0,marker:{enabled:!1},states:{hover:{enabled:!1}}}},scrollbar:{enabled:!0},title:{text:""},tooltip:{enabled:!1},xAxis:{visible:!1,minRange:Number.MIN_VALUE},yAxis:{visible:!1}},editableOptions:(t.defaultOptions.editableOptions||[]).concat()}}),i(e,"Dashboards/Plugins/NavigatorComponent/NavigatorSyncHandlers.js",[e["Data/Modifiers/DataModifier.js"],e["Core/Utilities.js"]],function(t,e){let{Range:i}=t.types,{addEvent:s,pick:o}=e,n={emitters:{crossfilterEmitter(){let t;let e=this,o=async t=>{if(e.connector){let s=e.connector.table,o=e.board.dataCursor,n=e.getColumnAssignment()[0],[r,a]=e.getAxisExtremes(),l=s.getModifier();l instanceof i?function(t,e,i,s){let o=!1;for(let n=0,r=t.length;n<r;++n)if(t[n].column===e){t[n].maxValue=s,t[n].minValue=i,o=!0;break}o||t.push({column:e,maxValue:s,minValue:i})}(l.options.ranges,n,r,a):l=new i({ranges:[{column:n,maxValue:a,minValue:r}]}),await s.setModifier(l),o.emitCursor(s,{type:"range",columns:[n],firstRow:0,lastRow:s.getRowCount()-1,state:"crossfilter"},t)}};return s(e.chart.xAxis[0],"afterSetExtremes",function(e){clearTimeout(t),t=setTimeout(o,50,this,e)})},extremesEmitter(){let t;let e=this,i=t=>{if(e.connector){let i=e.connector.table,s=e.board.dataCursor,o=e.getColumnAssignment()[0],[n,r]=e.getAxisExtremes();s.emitCursor(i,{type:"position",column:o,row:i.getRowIndexBy(o,n),state:"xAxis.extremes.min"},t),s.emitCursor(i,{type:"position",column:o,row:i.getRowIndexBy(o,r),state:"xAxis.extremes.max"},t)}};return s(e.chart.xAxis[0],"afterSetExtremes",function(e){clearTimeout(t),t=setTimeout(i,50,this,e)})}}};return{crossfilter:{emitter:n.emitters.crossfilterEmitter},extremes:{emitter:n.emitters.extremesEmitter,handler:n.emitters.extremesHandler}}}),i(e,"Dashboards/Plugins/NavigatorComponent/NavigatorComponent.js",[e["Dashboards/Components/Component.js"],e["Dashboards/Globals.js"],e["Dashboards/Plugins/NavigatorComponent/NavigatorComponentDefaults.js"],e["Dashboards/Plugins/NavigatorComponent/NavigatorSyncHandlers.js"],e["Core/Utilities.js"]],function(t,e,i,s,o){let{diffObjects:n,isNumber:r,isString:a,merge:l,pick:h}=o;class d extends t{static fromJSON(t,e){let i=new d(e,t.options);return i.emit({type:"fromJSON",json:t}),i}constructor(t,i){super(t,i),this.options=l(d.defaultOptions,i);let o=d.charter.Chart||e.win.Highcharts;this.chartContainer=e.win.document.createElement("div"),this.chart=o.chart(this.chartContainer,this.options.chartOptions||{}),this.chartContainer.classList.add(e.classNamePrefix+"navigator"),this.filterAndAssignSyncOptions(s),this.sync=new d.Sync(this,this.syncHandlers),this.sync.syncConfig.crossfilter?.enabled&&this.chart.update(l({navigator:{xAxis:{labels:{format:"{value}"}}}},this.options.chartOptions||{}),!1)}adjustNavigator(){let t=this.chart,e=h(t.chartHeight,this.contentElement.clientHeight),i=this.contentElement.clientWidth,s={};if((t.chartHeight!==e||t.chartWidth!==i)&&(s.chart={height:e,width:i}),t.navigator){let i=t.navigator,o=i.top-t.plotTop+i.height;i.height!==o&&(s.navigator={handles:{height:Math.round(e/4)},height:o}),Object.keys(s).length&&t.update(s,!1),i.series&&i.series[0]&&i.series[0].update({type:t.series[0].type},!1)}else Object.keys(s).length&&t.update(s,!1)}getColumnAssignment(){let t;let e=this.options.columnAssignments||{};for(let i of Object.keys(e))if(null!==(t=e[i]))return[i,t];if(this.connector){let t=this.connector.table.getColumnNames();if(t.length)return[t[0],"y"]}return["","y"]}getOptions(){return{...n(this.options,i),type:"Navigator"}}getAxisExtremes(){let t=this.chart.xAxis[0],e=t.getExtremes(),i=r(e.min)?e.min:e.dataMin,s=r(e.max)?e.max:e.dataMax;return this.categories?[this.categories[Math.max(0,Math.ceil(i))],this.categories[Math.min(this.categories.length-1,Math.floor(s))]]:t.hasNames?[t.names[Math.ceil(i)],t.names[Math.floor(s)]]:[i,s]}async load(){return await super.load(),this.contentElement.appendChild(this.chartContainer),this.parentElement.appendChild(this.element),this.adjustNavigator(),this.emit({type:"afterLoad"}),this}onTableChanged(){this.renderNavigator()}redrawNavigator(){let t=this.resizeTimeouts;for(let e=0,i=t.length;e<i;++e)clearTimeout(t[e]);t.length=0,t.push(setTimeout(()=>{this.adjustNavigator(),this.chart.redraw()},33))}render(){return super.render(),this.renderNavigator(),this.sync.start(),this.emit({type:"afterRender"}),this}renderNavigator(){let t=this.chart;if(this.connector){let e;let i=this.connector.table,s=this.getColumnAssignment(),o=i.getColumn(s[0],!0)||[];e=this.sync.syncConfig.crossfilter?.enabled?this.generateCrossfilterData():o.slice(),t.series[0]?t.series[0].setData(e,!1):t.addSeries({id:i.id,data:e},!1)}this.redrawNavigator()}generateCrossfilterData(){let t;let e=this.sync.syncConfig.crossfilter,i=this.connector?.table,s=i?.getColumn(this.getColumnAssignment()[0],!0)||[];if(!i||s.length<1||!e)return[];let o=[],n=[];for(let t=0,e=s.length;t<e;t++){let e=s[t];if(null!==e){if(r(e)||(e=`${e}`),void 0===this.stringData)this.stringData=a(e);else if(this.stringData!==a(e))throw Error("Mixed data types in crossfilter navigator are not supported.");o.push(e),-1===n.indexOf(e)&&n.push(e)}}n.sort((t,e)=>h(t,NaN)<h(e,NaN)?-1:t===e?0:1);let l=i.getModifier()?.options;if(e.affectNavigator&&l){let e=[],s=[],{ranges:n}=l;for(let t=0,o=n.length;t<o;t++)n[t].column!==this.getColumnAssignment()[0]&&(e.push(n[t]),s.push(i.getColumn(n[t].column,!0)||[]));t=[];let r=e.length;for(let i=0,n=o.length;i<n;i++){let n=o[i],a=!0;for(let t=0;t<r;t++){let o=e[t];if(!(s[t][i]>=(o.minValue??-1/0)&&s[t][i]<=(o.maxValue??1/0))){a=!1;break}}a&&t.push(n)}}else t=o;let d=[];if(this.stringData){this.categories=n;for(let t=0,e=n.length;t<e;t++)d.push([t,null])}else for(let t=0,e=n.length;t<e;t++)d.push([n[t],null]);for(let e=0,i=t.length;e<i;e++){let i=n.indexOf(t[e]);d[i][1]=(d[i][1]||0)+1}return d}resize(t,e){return super.resize(t,e),this.redrawNavigator(),this}async update(t,e=!0){let i=this.chart;await super.update(t,!1),t.sync&&this.filterAndAssignSyncOptions(s),t.chartOptions&&i.update(l(this.sync.syncConfig.crossfilter?.enabled?{navigator:{xAxis:{labels:{format:"{value}"}}}}:{},t.chartOptions),!1),this.emit({type:"afterUpdate"}),e&&this.render()}getOptionsOnDrop(t){return{}}}return d.defaultOptions=l(t.defaultOptions,i),d}),i(e,"Dashboards/Plugins/HighchartsPlugin.js",[e["Dashboards/Plugins/HighchartsComponent/HighchartsComponent.js"],e["Dashboards/Plugins/HighchartsComponent/HighchartsSyncHandlers.js"],e["Dashboards/Plugins/KPIComponent/KPIComponent.js"],e["Dashboards/Plugins/NavigatorComponent/NavigatorComponent.js"]],function(t,e,i,s){return{custom:{connectHighcharts:function(e){t.charter=e,i.charter=e,s.charter=e}},name:"Highcharts.DashboardsPlugin",onRegister:function(o){let{Sync:n,ComponentRegistry:r}=o;r.registerComponent("Highcharts",t),r.registerComponent("KPI",i),r.registerComponent("Navigator",s),n.defaultHandlers={...n.defaultHandlers,...e}},onUnregister:function(t){let{Sync:i}=t;Object.keys(e).forEach(t=>{i.defaultHandlers[t]===e[t]&&delete i.defaultHandlers[t]})}}}),i(e,"Dashboards/PluginHandler.js",[e["Dashboards/Board.js"],e["Dashboards/Components/Sync/Sync.js"],e["Dashboards/Components/ComponentRegistry.js"]],function(t,e,i){var s,o;return(o=s||(s={})).registry={},o.revision=0,o.addPlugin=function(s,n=s.name){let{maxRevision:r,minRevision:a,onRegister:l}=s;if(o.registry[n]){if(n!==s.name)throw Error(`Plugin '${n}' already registered.`);return}if("number"==typeof a&&a>o.revision||"number"==typeof r&&r<o.revision)throw Error(`Plugin '${n}' does not support revision ${o.revision}.`);l({Board:t,ComponentRegistry:i,Sync:e,revision:o.revision}),o.registry[n]=s},o.removePlugin=function(s){o.registry[s]&&(o.registry[s].onUnregister({ComponentRegistry:i,Board:t,Sync:e,revision:o.revision}),delete o.registry[s])},s}),i(e,"masters/dashboards.src.js",[e["Core/Renderer/HTML/AST.js"],e["Data/Connectors/DataConnector.js"],e["Dashboards/Board.js"],e["Dashboards/Components/Component.js"],e["Dashboards/Components/ComponentRegistry.js"],e["Data/DataPool.js"],e["Data/DataCursor.js"],e["Data/Modifiers/DataModifier.js"],e["Data/DataTable.js"],e["Dashboards/Globals.js"],e["Dashboards/Plugins/DataGridPlugin.js"],e["Dashboards/Plugins/HighchartsPlugin.js"],e["Dashboards/PluginHandler.js"],e["Dashboards/Components/Sync/Sync.js"],e["Dashboards/Utilities.js"]],function(t,e,i,s,o,n,r,a,l,h,d,c,u,p,m){return h.board=i.board,h.error=m.error,h.merge=m.merge,h.uniqueKey=m.uniqueKey,h.AST=t,h.Board=i,h.Component=s,h.ComponentRegistry=o,h.DataConnector=e,h.DataCursor=r,h.DataModifier=a,h.DataPool=n,h.DataTable=l,h.DataGridPlugin=d,h.HighchartsPlugin=c,h.PluginHandler=u,h.Sync=p,h.win.Dashboards||(h.win.Dashboards=h),h.win.DataGrid&&(d.custom.connectDataGrid(h.win.DataGrid),h.PluginHandler.addPlugin(d)),h.win.Highcharts&&(c.custom.connectHighcharts(h.win.Highcharts),h.PluginHandler.addPlugin(c)),h}),e["masters/dashboards.src.js"]._modules=e,e["masters/dashboards.src.js"]});